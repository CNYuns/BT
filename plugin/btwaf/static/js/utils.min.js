var lan={get:function(e,t){var s={diskinfo_span_1:"磁盘分区[{1}]的可用容量小于1GB，这可能会导致MySQL自动停止，面板无法访问等问题，请及时清理！",process_kill_confirm:"结束进程名[{1}],PID[{2}]后可能会影响服务器的正常运行，继续吗？",del:"删除[{1}]",del_all_task:"您共选择了[{1}]个任务,删除后将无法恢复,真的要删除吗?",del_all_task_ok:"成功删除[{1}]个任务!",del_all_task_the:"正在删除[{1}],请稍候...",add_all_task_ok:"成功添加[{1}]个计划任务!",add:"正在添加[{1}],请稍候...",confirm_del:"您真的要删除[{1}]吗？",update_num:"一次只能选择{1}个文件上传，剩下的不作处理！",service_confirm:"您真的要{1}{2}服务吗？",service_the:"正在{1}{2}服务,请稍候...",service_ok:"{1}服务已{2}",service_err:"{1}服务{2}失败!",recycle_bin_confirm:"您真的要删除文件[{1}]?",recycle_bin_confirm_dir:"您真的要删除目录[{1}]?",del_all_ftp:"您共选择了[{1}]个FTP,删除后将无法恢复,真的要删除吗?",del_all_ftp_ok:"成功删除{1}个FTP帐户",del_all_database:"您共选择了[{1}]个数据库,删除后将无法恢复,真的要删除吗?",del_all_database_ok:"成功删除[{1}]个数据库!",config_edit_ps:"此处为{1}主配置文件,若您不了解配置规则,请勿随意修改",install_confirm:"您真的要安装{1}-{2}吗?",del_all_site:"您共选择了[{1}]个站点,删除后将无法恢复,真的要删除吗?",del_all_site_ok:"成功删除[{1}]个站点!",ssl_enable:'您已启用[{1}]证书，如需关闭，请点击"关闭SSL"按钮',lack_param:"缺少必要参数[{1}]",del_ftp:"是否删除[{1}]该FTP账号？"};if(!s[e])return"";msg=s[e];for(var a=0;a<t.length;a++)msg=msg.replace("{"+(a+1)+"}",t[a]+"");return msg},index:{memre:"内存释放",memre_ok:"释放完成",memre_ok_0:"释放中",memre_ok_1:"已释放",memre_ok_2:"状态最佳",mem_warning:"当前可用物理内存小于64M，这可能导致MySQL自动停止，站点502等错误，请尝试释放内存！",user_warning:"当前面板用户为admin,这可能为面板安全带来风险！",cpu_core:"核心",interfacespeed:"接口速率",package_num:"报文数量",interface_net:"接口流量实时",net_up:"上行",net_down:"下行",unit:"单位",net_font:"宋体",update_go:"立即更新",update_get:"正在获取版本信息...",update_check:"检查更新",update_to:"升级到",update_the:"正在升级面板..",update_ok:"升级成功!",update_log:"版本更新",reboot_title:"安全重启服务器",reboot_warning:"注意，若您的服务器是一个容器，请取消",reboot_ps:"安全重启有利于保障文件安全，将执行以下操作：",reboot_ps_1:"1.停止Web服务",reboot_ps_2:"2.停止MySQL服务",reboot_ps_3:"3.开始重启服务器",reboot_ps_4:"4.等待服务器启动",reboot_msg_1:"正在停止Web服务",reboot_msg_2:"正在停止MySQL服务",reboot_msg_3:"开始重启服务器",reboot_msg_4:"等待服务器启动",reboot_msg_5:"服务器重启成功!",panel_reboot_title:"重启面板服务",panel_reboot_msg:"即将重启面板服务，继续吗？",panel_reboot_to:"正在重启面板服务,请稍候...",panel_reboot_ok:"面板服务重启成功!",net_dorp_ip:"屏蔽此IP",net_doup_ip_msg:"屏蔽此IP后，对方将无法访问本服务器，你可以在【安全】中删除，继续吗？",net_doup_ip_ps:"手动屏蔽",net_doup_ip_to:"手动屏蔽",net_status_title:"网络状态",net_protocol:"协议",net_address_dst:"本地地址",net_address_src:"远程地址",net_address_status:"状态",net_process:"进程",net_process_pid:"PID",process_check:"正在分析...",process_kill:"结束",process_kill_title:"结束此进程",process_title:"进程管理",process_pid:"PID",process_name:"名称",process_cpu:"CPU",process_mem:"内存",process_disk:"读/写",process_status:"状态",process_thread:"线程",process_user:"用户",process_act:"操作",kill_msg:"正在结束进程...",rep_panel_msg:"修复面板会获取最新的面板代码程序，<br>包括BUG修复，是否继续操作？",rep_panel_title:"修复面板",rep_panel_the:"正在校验模块...",rep_panel_ok:"修复完成，请按 Ctrl+F5 刷新缓存!"},config:{close_panel_msg:"关闭面板会导致您无法访问面板 ,您真的要关闭宝塔Linux面板吗？",close_panel_title:"关闭面板",config_save:"正在保存配置...",config_sync:"正在同步时间...",config_user_binding:"绑定宝塔帐号",config_user_edit:"修改绑定宝塔账号",binding:"绑定",token_get:"正在获取密钥...",user_bt:"宝塔官网账户",pass_bt:"宝塔官网密码",binding_un_msg:"您确定要解除绑定宝塔帐号码？",binding_un_title:"解除绑定",binding_un:"解绑",ssl_close_msg:"关闭SSL后,必需使用http协议访问面板,继续吗?",ssl_open_ps:"危险！此功能不懂别开启!",ssl_open_ps_1:"必须要用到且了解此功能才决定自己是否要开启!",ssl_open_ps_2:"面板SSL是自签证书，不被浏览器信任，显示不安全是正常现象",ssl_open_ps_3:"开启后导致面板不能访问，可以点击下面链接了解解决方法",ssl_open_ps_4:"我已了经解详情,并愿意承担风险",ssl_open_ps_5:"了解详情",ssl_title:"设置面板SSL",ssl_ps:"请先确认风险!",ssl_msg:"正在安装并设置SSL组件,这需要几分钟时间...",qrcode_no_list:"当前绑定列表为空,请先绑定然后重试"},control:{save_day_err:"保存天数不合法!",close_log:"清空记录",close_log_msg:"您真的清空所有监控记录吗？",disk_read_num:"读取次数",disk_write_num:"写入次数",disk_read_bytes:"读取字节数",disk_write_bytes:"写入字节数"},crontab:{task_log_title:"任务执行日志",task_empty:"当前没有计划任务",del_task:"您确定要删除该任务吗?",del_task_all_title:"批量删除任务",del_task_err:"以下任务删除失败:",add_task_empty:"任务名称不能为空!",input_hour_err:"小时值不合法!",input_minute_err:"分钟值不合法!",input_number_err:"不能有负数!",input_file_err:"请选择脚本文件!",input_script_err:"脚本代码不能为空!",input_url_err:"URL地址不正确!",input_empty_err:"对象列表为空，无法继续!",backup_site:"备份网站",backup_database:"备份数据库",backup_log:"切割日志",backup_all_err:"以下对象添加任务失败:",day:"天",hour:"小时",minute:"分钟",sun:"日",sbody:"脚本内容",log_site:"切割网站",url_address:"URL地址",backup_to:"备份到",disk:"服务器磁盘",save_new:"保留最新",save_num:"份",TZZ1:"周一",TZZ2:"周二",TZZ3:"周三",TZZ4:"周四",TZZ5:"周五",TZZ6:"周六",TZZ7:"周日",mem_ps:"释放PHP、MYSQL、PURE-FTPD、APACHE、NGINX的内存占用,建议在每天半夜执行!",mem:"释放内存"},firewall:{empty:"已清理!",port:"端口",accept:"放行",port_ps:"说明: 支持放行端口范围，如: 3000:3500",ip:"欲屏蔽的IP地址",drop:"屏蔽",ip_ps:"说明: 支持屏蔽IP段，如: 192.168.0.0/24",ssh_port_msg:"更改远程端口后，有安全组的需在安全组放行新的端口才能访问，您真的要更改远程端口吗？",ssh_port_title:"远程端口",ssh_off_msg:"停用SSH服务后您将无法使用终端工具连接服务器,继续吗？",ssh_on_msg:"确定启用SSH服务吗？",ping_msg:"禁PING后不影响服务器正常使用，但无法ping通服务器，您真的要禁PING吗？",ping_un_msg:"解除禁PING状态可能会被黑客发现您的服务器，您真的要解禁吗？",ping_title:"是否禁ping",ping:"已禁Ping",ping_un:"已解除禁Ping",ping_err:"连接服务器失败",status_not:"未使用",status_net:"外网不通",status_ok:"正常",drop_ip:"屏蔽IP",accept_port:"放行端口",port_err:"端口范围不合法!",ps_err:"备注/说明 不能为空!",del_title:"删除防火墙规则",close_log:"清空日志",close_log_msg:"即将清空面板日志，继续吗？",close_the:"正在清理,请稍候..."},upload:{file_type_err:"不允许上传的文件类型!",file_err:"错误的文件",file_err_empty:"不能为空字节文件!",select_file:"请选择文件!",select_empty:"没有可用文件上传，重新选择文件",up_sleep:"等待上传",up_the:"已上传",up_save:"正在保存..",up_ok:"已上传成功",up_ok_1:"上传完成",up_ok_2:"已上传",up_speed:"上传进度:",up_err:" 上传错误",ie_err:"抱歉,IE 6/7/8 不支持请更换浏览器再上传"},bt:{empty:"空",dir:"选择目录",path:"当前路径",comp:"计算机",filename:"文件名",etime:"修改时间",access:"权限",own:"所有者",adddir:"新建文件夹",path_ok:"选择",save_file:"正在保存,请稍候...",read_file:"正在读取文件,请稍候...",edit_title:"在线编辑",edit_ps:"提示：Ctrl+F 搜索关键字，Ctrl+S 保存，Ctrl+H 查找替换!",stop:"停止",start:"启动",restart:"重启",reload:"重载",php_status_err:"抱歉，不支持PHP5.2",php_status_title:"PHP负载状态",php_pool:"应用池(pool)",php_manager:"进程管理方式(process manager)",dynamic:"动态",static:"静态",php_start:"启动日期(start time)",php_accepted:"请求数(accepted conn)",php_queue:"请求队列(listen queue)",php_max_queue:"最大等待队列(max listen queue)",php_len_queue:"socket队列长度(listen queue len)",php_idle:"空闲进程数量(idle processes)",php_active:"活跃进程数量(active processes)",php_total:"总进程数量(total processes)",php_max_active:"最大活跃进程数量(max active processes)",php_max_children:"到达进程上限次数(max children reached)",php_slow:"慢请求数量(slow requests)",nginx_title:"Nginx负载状态",nginx_active:"活动连接(Active connections)",nginx_accepts:"总连接次数(accepts)",nginx_handled:"总握手次数(handled)",nginx_requests:"总请求数(requests)",nginx_reading:"请求数(Reading)",nginx_writing:"响应数(Writing)",nginx_waiting:"驻留进程(Waiting)",nginx_worker:"工作进程(Worker)",nginx_workercpu:"Nginx占用CPU(Workercpu)",nginx_workermen:"Nginx占用内存(Workermen)",apache_uptime:"启动时间(Uptime)",apache_restarttime:"重启时间(RestartTime)",apache_totalaccesses:"总连接数(TotalAccesses)",apache_totalkbytes:"传送总字节(TotalkBytes)",apache_reqpersec:"每秒请求数(ReqPerSec)",apache_idleworkers:"空闲进程(IdleWorkers)",apache_busyworkers:"繁忙进程(BusyWorkers)",apache_workercpu:"Apache使用CPU",apache_workermem:"Apache使用内存",drop_ip_title:"屏蔽此IP",net_status_title:"网络状态",net_pool:"协议",copy_ok:"复制成功",copy_empty:"密码为空",cal_msg:"计算结果：",cal_empty:"输入计算结果，否则无法删除",cal_err:"计算错误，请重新计算",loginout:"您真的要退出面板吗?",pass_err_len:"面板密码不能少于8位!",pass_err:"面板密码不能为弱口令",pass_err_re:"两次输入的密码不一致",pass_title:"修改密码",pass_new_title:"新的密码",pass_rep:"随机密码",pass_rep_btn:"随机",pass_re:"重复",pass_re_title:"再输一次",pass_rep_ps:"请在修改前记录好您的新密码!",user_len:"用户名长度不能少于3位",user_err_re:"两次输入的用户名不一致",user_title:"修改面板用户名",user:"用户名",user_new:"新的用户名",task_list:"任务列表",task_msg:"消息列表",task_not_list:"当前没有任务!",task_scan:"正在扫描",task_install:"正在安装",task_sleep:"等待",task_downloading:"下载中",task_the:"正在处理",task_ok:"已完成",task_close:"任务已取消!",time:"耗时",s:"秒",install_title:"推荐安装套件",install_ps:"我们为您推荐以下一键套件，请按需选择或在",install_s:"软件管理",install_s1:"页面中自动选择，推荐安装LNMP",install_lnmp:"LNMP(推荐)",install_type:"安装方式",install_rpm:"极速安装",install_rpm_title:"即rpm/deb，安装时间极快（5-10分钟），版本与稳定性略低于编译安装，适合快速部署测试",install_src:"编译安装",install_src_title:"安装时间长（30分钟到2小时），性能最大化，适合生产环境",install_key:"一键安装",install_apache22:"您选择的是Apache2.2,PHP将会以php5_module模式运行!",install_apache24:"您选择的是Apache2.4,PHP将会以php-fpm模式运行!",insatll_s22:"Apache2.2不支持",insatll_s24:"Apache2.4不支持",insatll_mem:"您的内存小于{1},不建议安装MySQL-{2}",install_to:"正在添加到安装器...",install_ok:"已将安装请求添加到安装器",task_add:"已添加到队列",panel_open:"正在打开面板...",panel_add:"关联宝塔面板",panel_edit:"修改关联",panel_err_format:"面板地址格式不正确，示例：",panel_err_empty:"面板资料不能为空",panel_address:"面板地址",panel_user:"用户名",panel_pass:"密码",panel_ps:"备注",panel_ps_1:"收藏其它服务器面板资料，实现一键登录面板功能",panel_ps_2:"面板备注不可重复",panel_ps_3:"<font style='color:red'>注意，开启广告拦截会导致无法快捷登录</font>",task_time:"时间",task_name:"名称",task_msg_title:"消息提醒",task_title:"消息盒子",task_tip_read:"标记已读",task_tip_all:"全部已读",no_data:"当前没有数据"},files:{recycle_bin_re:"恢复",recycle_bin_del:"永久删除",recycle_bin_on:"文件回收站",recycle_bin_on_db:"数据库回收站",recycle_bin_ps:"注意：关闭回收站，删除的文件无法恢复！",recycle_bin_close:"清空回收站",recycle_bin_type1:"全部",recycle_bin_type2:"文件夹",recycle_bin_type3:"文件",recycle_bin_type4:"图片",recycle_bin_type5:"文档",recycle_bin_type6:"数据库",recycle_bin_th1:"文件名",recycle_bin_th2:"原位置",recycle_bin_th3:"大小",recycle_bin_th4:"删除时间",recycle_bin_th5:"操作",recycle_bin_title:"回收站",recycle_bin_re_title:"恢复文件",recycle_bin_re_msg:"若您的原位置已有同名文件或目录，将被覆盖，继续吗？",recycle_bin_re_the:"正在恢复,请稍候...",recycle_bin_del_title:"删除文件",recycle_bin_del_msg:"删除操作不可逆，继续吗？",recycle_bin_del_the:"正在删除,请稍候...",recycle_bin_close_msg:"清空回收站操作会永久删除回收站中的文件，继续吗？",recycle_bin_close_the:"正在删除,请稍候...",dir_menu_webshell:"目录查杀",file_menu_webshell:"查杀",file_menu_copy:"复制",file_menu_mv:"剪切",file_menu_rename:"重命名",file_menu_auth:"权限",file_menu_zip:"压缩",file_menu_unzip:"解压",file_menu_edit:"编辑",file_menu_img:"预览",file_menu_down:"下载",file_menu_del:"删除",file_name:"文件名",file_size:"大小",file_etime:"修改时间",file_auth:"权限",file_own:"所有者",file_read:"读取",file_write:"写入",file_exec:"执行",file_public:"公共",file_group:"用户组",file_act:"操作",get_size:"共{1}个目录与{2}个文件,大小:",get:"获取",new:"新建",new_empty_file:"新建空白文件",new_dir:"新建目录",dir_name:"目录名称",return:"返回上一级",shell:"终端",paste:"粘贴",paste_all:"粘贴所有",path_root:"根目录",all:"批量",set_auth:"设置权限",up_title:"上传文件",up_add:"添加文件",up_start:"开始上传",up_coding:"文件编码",up_bin:"二进制",unzip_title:"解压文件",unzip_name:"文件名",unzip_name_title:"压缩文件名",unzip_to:"解压到",unzip_coding:"编码",unzip_the:"正在解压,请稍候...",zip_title:"压缩文件",zip_to:"压缩到",zip_the:"正在压缩,请稍候...",zip_ok:"服务器正在后台压缩文件,请稍候刷新文件列表查看进度!",zip_pass_title:"解压密码",zip_pass_msg:"不需要请留空",mv_the:"正在移动,请稍候...",copy_the:"正在复制,请稍候...",copy_ok:"已复制",mv_ok:"已剪切",shell_title:"执行SHELL (仅支持非交互命令)",shell_go:"发送",shell_ps:"shell命令",down_title:"下载文件",down_url:"URL地址",down_to:"下载到",down_save:"保存文件名",down_task:"正在添加到队列，请稍候..",del_file:"删除文件",del_dir:"删除目录",del_all_file:"批量删除文件",del_all_msg:"您确定要删除选中的文件/目录吗?",file_conver_msg:"即将覆盖以下文件,是否确定？"},ftp:{empty:"当前没有FTP数据",stop_title:"停用这个帐号",start_title:"启用这个帐号",stop:"已停用",start:"已启用",copy:"复制密码",open_path:"打开目录",edit_pass:"改密",ps:"备注信息",add_title:"添加FTP帐户",add_user:"用户名",add_user_tips:"请输入FTP用户名",add_pass:"密码",add_pass_tips:"请输入FTP密码",add_pass_rep:"随机密码",add_path:"根目录",add_path_tips:"请输入或选择FTP目录",add_path_rep:"选择文件目录",add_path_title:"帐户根目录，会自动创建同名目录",add_path_ps:"FTP所指向的目录",add_ps:"备注",add_ps_title:"备注信息(小于255个字符)",del_all:"是否批量删除选中的FTP账号？",del_all_err:"以下FTP帐户删除失败:",stop_confirm:"您真的要停止{1}的FTP吗?",stop_title:"FTP帐户",pass_title:"修改FTP用户密码",pass_user:"用户名",pass_new:"新密码",pass_confirm:"您确定要修改该FTP帐户密码吗?",port_title:"修改FTP端口",port_name:"端口",port_tips:"请填写端口",del_ftp_title:"删除FTP",del_ftp_all_title:"删除选中FTP"},database:{empty:"当前没有数据库数据",backup_empty:"无备份",backup_ok:"有备份",copy_pass:"复制密码",input:"导入",input_title:"导入数据库",admin:"管理",admin_title:"数据库管理",auth:"权限",auth_title:"设置访问权限",edit_pass:"改密",edit_pass_title:"修改数据库密码",del_title:"删除数据库",ps:"备注信息",add_title:"添加数据库",add_name:"数据库名",add_name_title:"新的数据库名称",add_pass:"密码",add_pass_title:"数据库密码",add_pass_rep:"随机密码",add_auth:"访问权限",add_auth_local:"本地服务器",add_auth_all:"所有人",add_auth_ip:"指定IP",add_auth_ip_title:"请输允许访问此数据库的IP地址",add_ps:"备注",edit_root:"root密码",user:"用户名",edit_pass_new:"新密码",edit_pass_new_title:"新的数据库密码",edit_pass_confirm:"您确定要修改数据库密码吗?",backup_re:"恢复",backup_name:"文件名称",backup_size:"文件大小",backup_time:"备份时间",backup_title:"数据库备份详情",backup:"备份",input_confirm:"数据库将被覆盖，继续吗?",input_the:"正在导入,请稍候...",backup_the:"正在备份,请稍候...",backup_del_title:"删除备份文件",backup_del_confirm:"您真的要删除备份文件吗?",del_all_title:"批量删除数据库",del_all_err:"以下数据库删除失败:",input_title_file:"从文件导入数据库",input_local_up:"从本地上传",input_ps1:"仅支持sql、zip、sql.gz、(tar.gz|gz|tgz)",input_ps2:"zip、tar.gz压缩包结构：test.zip或test.tar.gz压缩包内，必需包含test.sql",input_ps3:"若文件过大，您还可以使用SFTP工具，将数据库文件上传到/www/backup/database",input_up_type:"请上传sql、zip、sql.gz、(tar.gz|gz|tgz)",auth_err:"此数据库不能修改访问权限",auth_title:"设置数据库权限",auth_name:"访问权限",sync_the:"正在同步,请稍候...",phpmyadmin_err:"请先安装phpMyAdmin",phpmyadmin:"正在打开phpMyAdmin"},soft:{php_main1:"php服务",php_main2:"上传限制",php_main3:"超时限制",php_main4:"配置文件",php_main5:"安装扩展",php_main6:"禁用函数",php_main7:"性能调整",php_main8:"负载状态",php_main9:"Session配置",php_menu_ext:"扩展配置",admin:"管理",off:"关闭",on:"开启",stop:"停止",start:"启动",status:"当前状态",restart:"重启",reload:"重载配置",mysql_mem_err:"机器内存小于1G，不建议使用mysql5.5以上版本</li><li>如果数据库经常自动停止，请尝试使用linux工具箱增加SWAP或者升级服务器内存",concurrency_m:"自定义",concurrency:"并发",concurrency_type:"并发方案",php_fpm_model:"运行模式",php_fpm_ps1:"PHP-FPM运行模式",php_fpm_ps2:"允许创建的最大子进程数",php_fpm_ps3:"起始进程数（服务启动后初始进程数量）",php_fpm_ps4:"最小空闲进程数（清理空闲进程后的保留数量）",php_fpm_ps5:"最大空闲进程数（当空闲进程达到此值时清理）",php_fpm_err1:"max_spare_servers 不能大于 max_children",php_fpm_err2:"min_spare_servers 不能大于 start_servers",php_fpm_err3:"min_spare_servers 不能大于 max_spare_servers",php_fpm_err4:"start_servers 不能大于 max_children",php_fpm_err5:"配置值不能小于1",phpinfo:"查看phpinfo()",get:"正在获取...",get_config:"正在获取配置文件，请稍候...",get_list:"正在获取列表...",the_save:"正在保存数据...",config_edit:"配置修改",edit_empty:"不修改请留空",php_upload_size:"上传大小限制不能小于2M",mvc_ps:"MVC架构的程序需要开启,如typecho",the_install:"正在安装...",the_uninstall:"正在卸载...",install_the:"安装中...",sleep_install:"等待安装...",install:"安装",uninstall:"卸载",php_ext_name:"名称",php_ext_type:"类型",php_ext_ps:"说明",php_ext_status:"状态",php_ext_install_confirm:"您真的要安装{1}吗?",php_ext_uninstall_confirm:"您真的要卸载{1}吗?",add_install:"正在添加到安装器...",install_title:"软件安装",insatll_type:"安装方式",install_version:"安装版本",type_title:"选择安装方式",err_install1:"请先卸载Apache",err_install2:"请先卸载Nginx",err_install3:"请先安装php",err_install4:"请先安装MySQL",setup:"设置",apache22:"警告:当前为php-fpm模式,将不被Apache2.2支持,请重新安装此PHP版本!",apache24:"警告:当前为php5_module模式,将不被nginx/apache2.4支持,请重新安装此PHP版本!",apache22_err:"Apache2.2不支持多PHP版本共存,请先卸载已安装PHP版本,再安装此版本!",mysql_f:"注意: 安装新的MySQL版本,会覆盖数据库数据,请先备份数据库!",mysql_d:"抱歉,出于安全考虑,请先到[数据库]管理备份数据库,并中删除所有数据库!",fun_ps1:"添加要被禁止的函数名,如: exec",fun_ps2:"在此处可以禁用指定函数的调用,以增强环境安全性!",fun_ps3:"强烈建议禁用如exec,system等危险函数!",fun_msg:"您输入的函数已被禁用!",nginx_status:"负载状态",nginx_version:"切换版本",waf_title:"过滤器",web_service:"Web服务",waf_not:"您当前Nginx版本不支持waf模块,请安装Nginx1.12,重装Nginx不会丢失您的网站配置!",waf_edit:"编辑规则",waf_up:"上传限制",waf_input1:"URL过滤",waf_input2:"Cookie过滤",waf_input3:"POST过滤",waf_input4:"防CC攻击",waf_input5:"记录防御信息",waf_input6:"CC攻击触发频率(次)",waf_input7:"CC攻击触发周期",waf_input8:"IP白名单",waf_input9:"IP黑名单",waf_ip:"IP地址",waf_up_title:"文件上传后缀黑名单",waf_up_from1:"添加禁止上传的扩展名,如: zip",waf_up_from2:"扩展名",waf_url_white:"URL白名单",waf_index:"警告内容",waf_cloud:"从云端更新",waf_update:"正在更新规则文件,请稍候..",waf_cc_err:"CC防御配置值超出可用值 (频率1-3000|周期1-1800)",php_version:"php版本",save_path:"存储位置",service:"服务",safe:"安全设置",log:"日志",error_log:"错误日志",mysql_to_msg:"迁移数据库文件过程中将会停止数据库运行,继续吗?",mysql_to_msg1:"正在迁移文件,请稍候...",mysql_to:"迁移",mysql_log_close:"清空",mysql_log_bin:"二进制日志",mysql_log_err:"错误日志",mysql_log_ps1:"当前没有日志内容!",mysql_port_title:"修改数据库端口可能会导致您的站点无法连接数据库,确定要修改吗?",select_version:"选择版本",version_to:"切换",pma_port:"访问端口",pma_port_title:"phpmyadmin访问端口",pma_pass:"密码访问",pma_user:"授权账号",pma_pass1:"访问密码",pma_pass2:"重复密码",pma_ps:"为phpmyadmin增加一道访问安全锁",pma_pass_close:"您真的要关闭访问认证吗?",pma_pass_empty:"授权用户或密码不能为空!",menu_temp:"正在获取模板...",menu_phpsafe:"php守护已启动，无需设置",qiniu_lise:"正在从云端获取...",qiniu_file_title:"文件列表",qiniu_th1:"名称",qiniu_th2:"类型",qiniu_th3:"大小",qiniu_th4:"更新时间",mysql_del_err:"抱歉,为安全考虑,请先到[数据库]管理备份数据库并中删除所有数据库!",uninstall_confirm:"您真的要卸载[{1}-{2}]吗?",from_err:"表单错误!",lib_the:"正在提交配置,请稍候...",lib_config:"配置",lib_insatll_confirm:"您真的要安装[{1}]插件吗？",lib_uninsatll_confirm:"您真的要卸载[{1}]插件吗？",lib_install:"安装插件",lib_uninstall:"卸载插件",lib_install_the:"正在安装,请稍候...",lib_uninstall_the:"正在卸载,请稍候...",mysql_set_msg:"优化方案",mysql_set_select:"请选择",mysql_set_maxmem:"最大使用内存",mysql_set_key_buffer_size:"用于索引的缓冲区大小",mysql_set_query_cache_size:"查询缓存,不开启请设为0",mysql_set_tmp_table_size:"临时表缓存大小",mysql_set_innodb_buffer_pool_size:"Innodb缓冲区大小",mysql_set_innodb_log_buffer_size:"Innodb日志缓冲区大小",mysql_set_sort_buffer_size:"每个线程排序的缓冲大小",mysql_set_read_buffer_size:"读入缓冲区大小",mysql_set_read_rnd_buffer_size:"随机读取缓冲区大小",mysql_set_join_buffer_size:"关联表缓存大小",mysql_set_thread_stack:"每个线程的堆栈大小",mysql_set_binlog_cache_size:"二进制日志缓存大小(4096的倍数)",mysql_set_thread_cache_size:"线程池大小",mysql_set_table_open_cache:"表缓存",mysql_set_max_connections:"最大连接数",mysql_set_restart:"重启数据库",mysql_set_conn:"连接数",mysql_set_err:"错误,内存分配过高!<p style='color:red;'>物理内存: {1}MB<br>最大使用内存: {2}MB<br>可能造成的后果: 导致数据库不稳定,甚至无法启动MySQLd服务!</p>",mysql_status_title1:"启动时间",mysql_status_title2:"总连接次数",mysql_status_title3:"发送",mysql_status_title4:"接收",mysql_status_title5:"每秒查询",mysql_status_title6:"每秒事务",mysql_status_title7:"File",mysql_status_title8:"Position",mysql_status_title9:"活动/峰值连接数",mysql_status_title10:"线程缓存命中率",mysql_status_title11:"索引命中率",mysql_status_title12:"Innodb索引命中率",mysql_status_title13:"查询缓存命中率",mysql_status_title14:"创建临时表到磁盘",mysql_status_title15:"已打开的表",mysql_status_title16:"没有使用索引的量",mysql_status_title17:"没有索引的JOIN量",mysql_status_title18:"排序后的合并次数",mysql_status_title19:"锁表次数",mysql_status_ps1:"若值过大,增加max_connections",mysql_status_ps2:"若过低,增加thread_cache_size",mysql_status_ps3:"若过低,增加key_buffer_size",mysql_status_ps4:"若过低,增加innodb_buffer_pool_size",mysql_status_ps5:"若过低,增加query_cache_size",mysql_status_ps6:"若过大,尝试增加tmp_table_size",mysql_status_ps7:"table_open_cache配置值应大于等于此值",mysql_status_ps8:"若不为0,请检查数据表的索引是否合理",mysql_status_ps9:"若不为0,请检查数据表的索引是否合理",mysql_status_ps10:"若值过大,增加sort_buffer_size",mysql_status_ps11:"若值过大,请考虑增加您的数据库性能",config_php_tips:"默认已开启Openssl/Curl/Mysql等扩展，详情可点击<a href='javascript:;'  class='btlink return_php_info'>phpinfo</a>查看"},site:{running:"正在运行",running_title:"停用这个站点",running_text:"运行中",stopped:"已停止",stopped_title:"启用这个站点",backup_yes:"有备份",backup_no:"无备份",web_end_time:"永久",open_path_txt:"打开目录",set:"设置",site_del_title:"删除站点",site_no_data:"当前没有站点数据",site_null:"null",site_bak:"备注信息",saving_txt:"正在保存...",domain_err_txt:"域名格式不正确，请重新输入!",ftp:"FTP账号资料",ftp_tips:"只要将网站上传至以上FTP即可访问!",user:"用户",password:"密码",database_txt:"数据库账号资料",database:"数据库",database_name:"数据库名",database_set:"数据库设置",success_txt:"成功创建站点",php_ver:"PHP版本",site_add:"添加网站",domain:"域名",port:"端口",note:"备注",note_ph:"网站备注",web_root_dir:"网站根目录",web_dir:"网站目录",root_dir:"根目录",yes:"创建",no:"不创建",ftp_set:"FTP设置",ftp_help:"创建站点的同时，为站点创建一个对应FTP帐户，并且FTP目录指向站点所在目录",database_help:"创建站点的同时，为站点创建一个对应的数据库帐户，方便不同站点使用不同数据库",domain_help:"每行填写一个域名，默认为80端口<br>泛解析添加方法 *.domain.com<br>如另加端口格式为 www.domain.com:88",domain_len_msg:"不要超出20个字符",anti_XSS_attack:"防跨站攻击",write_access_log:"写访问日志",run_dir:"运行目录",site_help_1:"部分程序需要指定二级目录作为运行目录，如ThinkPHP5，Laravel",site_help_2:"选择您的运行目录，点保存即可",default_doc_help:"默认文档，每行一个，优先级由上至下",site_stop_txt:"站点停用后将无法访问，您真的要停用这个站点吗？",site_start_txt:"即将启动站点，您真的要启用这个站点吗？",site_del_info:"是否要删除同名的FTP、数据库、根目录",all_del_info:"同时删除站点根目录",all_del_site:"批量删除站点",del_err:"以下站点删除失败",click_access:"点击访问",operate:"操作",domain_man:"域名管理",unresolved:"未解析",parsed:"已解析",this_domain_un:"该域名未解析",analytic_ip:"域名解析IP为",current_server_ip:"当前服务器IP",parsed_info:"仅供参考,使用CDN的用户请无视",domain_empty:"域名不能为空!",domain_last_cannot:"最后一个域名不能删除",domain_del_confirm:"您真的要从站点中删除这个域名吗？",webback_del_confirm:"真的要删除备份包吗?",del_bak_file:"删除备份文件",filename:"文件名称",filesize:"文件大小",backuptime:"打包时间",backup_title:"打包备份",public_set:"全局设置",local_site:"本站",setindex:"设置网站默认文档",default_doc:"新建网站默认页面",default_site:"默认站点",default_site_yes:"设置默认站点",default_site_no:"未设置默认站点",default_site_help_1:"设置默认站点后,所有未绑定的域名和IP都被定向到默认站点",default_site_help_2:"可有效防止恶意解析",site_menu_1:"子目录绑定",site_menu_2:"网站目录",site_menu_3:"流量限制",site_menu_4:"伪静态",site_menu_5:"默认文档",site_menu_6:"配置文件",site_menu_7:"SSL",site_menu_8:"PHP版本",site_menu_9:"Tomcat",site_menu_10:"301重定向",site_menu_11:"反向代理",site_menu_12:"防盗链",website_change:"站点修改",addtime:"添加时间",the_msg:"正在提交任务...",start_scan:"开始扫描",update_lib:"更新特征库",scanned:"已扫描",risk_quantity:"风险数量",danger_fun:"危险函数",danger_fun_no:"未禁用危险函数",danger:"危险",file:"文件",ssh_port:"SSH端口",high_risk:"高危",sshd_tampering:"sshd文件被篡改",xss_attack:"跨站攻击",site_xss_attack:"站点未开启防跨站攻击!",mod_time:"修改时间",code:"代码",behavior:"行为",risk:"风险",details:"详情",to_update:"正在更新，请稍候...",limit_net_1:"论坛/博客",limit_net_2:"图片站",limit_net_3:"下载站",limit_net_4:"商城",limit_net_5:"门户",limit_net_6:"企业站",limit_net_7:"视频站",limit_net_8:"启用流量控制",limit_net_9:"限制方案",limit_net_10:"并发限制",limit_net_11:"限制当前站点最大并发数",limit_net_12:"单IP限制",limit_net_13:"限制单个IP访问最大并发数",limit_net_14:"流量限制",limit_net_15:"限制每个请求的流量上限（单位：KB）",subdirectories:"子目录",url_rewrite_alter:"你真的要为这个子目录创建独立的伪静态规则吗？",rule_cov_tool:"规则转换工具",a_c_n:"Apache转Nginx",save_as_template:"另存为模板",url_rw_help_1:"请选择您的应用，若设置伪静态后，网站无法正常访问，请尝试设置回default",url_rw_help_2:"您可以对伪静态规则进行修改，修改完后保存即可",config_url:"配置伪静态规则",d_s_empty:"域名和子目录名称不能为空",s_bin_del:"您真的要删除这个子目录绑定吗？",proxy_url:"目标URL",proxy_url_info:"请填写完整URL,例：http://www.test.com",proxy_domain:"发送域名",proxy_domian_info:"发送到目标服务器的域名,例：www.test.com",proxy_cache:"开启缓存",con_rep:"内容替换",con_rep_info:"被替换的文本,可留空",to_con:"替换为,可留空",proxy_enable:"启用反向代理",proxy_help_1:"目标Url必需是可以访问的，否则将直接502",proxy_help_2:"默认本站点所有域名访问将被传递到目标服务器，请确保目标服务器已绑定域名",proxy_help_3:"若您是被动代理，请在发送域名处填写上目标站点的域名",proxy_help_4:"若您不需要内容替换功能，请直接留空",proxy_help_5:"可通过purge清理指定URL的缓存,示例：http://test.com/purge/test.png",access_domain:"访问域名",all_site:"整站",target_url:"目标URL",eg_url:"请填写完整URL,例：http://www.test.com",enable_301:"启用301",to301_help_1:"选择[整站]时请不要将目标URL设为同一站点下的域名.",to301_help_2:"取消301重定向后，需清空浏览器缓存才能看到生效结果.",bt_ssl:"宝塔SSL",lets_ssl:"Let's Encrypt免费证书",other:"其它",other_ssl:"其他证书",use_other_ssl:"使用其他证书",ssl_help_1:"本站点未设置SSL，如需设置SSL，请选择切换类目申请开启SSL<br><p style='color:red;'>关闭SSL以后,请务必清除浏览器缓存再访问站点</p>",ssl_help_2:"已为您自动生成Let's Encrypt免费证书；",ssl_help_3:"如需使用其他SSL,请切换其他证书后粘贴您的KEY以及PEM内容，然后保存即可",ssl_key:"密钥(KEY)",ssl_crt:"证书(PEM格式)",ssl_close:"关闭SSL",bt_bind_no:"未绑定宝塔账号，请注册绑定，绑定宝塔账号(非论坛账号)可实现一键部署SSL",bt_user:"宝塔账号",login:"登录",bt_reg:"注册宝塔账号",bt_ssl_help_1:"宝塔SSL证书为亚洲诚信证书，需要实名认证才能申请使用",bt_ssl_help_2:"已有宝塔账号请登录绑定",bt_ssl_help_3:"宝塔SSL申请的是TrustAsia DV SSL CA - G5 原价：1900元/1年，宝塔用户免费！",bt_ssl_help_4:"一年满期后免费颁发",btapply:"申请",endtime:"到期时间",status:"状态",bt_ssl_help_5:"申请之前，请确保域名已解析，如未解析会导致审核失败",bt_ssl_help_6:"宝塔SSL申请的是免费版TrustAsia DV SSL CA - G5证书，仅支持单个域名申请",bt_ssl_help_7:"有效期1年，不支持续签，到期后需要重新申请",bt_ssl_help_8:"Let's Encrypt免费证书，有效期3个月，支持多域名默认会自动续签",bt_ssl_help_9:"若您的站点使用了CDN或301重定向会导致续签失败",bt_ssl_help_10:"粘贴您的*.key以及*.pem内容，然后保存即可<a href='http://www.bt.cn/bbs/thread-704-1-1.html' class='btlink' target='_blank'>[帮助]</a>",phone_input:"请输入手机号码",ssl_apply_1:"正在提交订单，请稍候..",ssl_apply_2:"正在校验域名，请稍候..",ssl_apply_3:"正在部署证书，请稍候..",ssl_apply_4:"正在更新证书，请稍候..",lets_help_1:"不用实名认证，浏览器兼容较低，申请存在一定失败率",lets_help_2:"let's Encrypt证书有效期为3个月",lets_help_3:"3个月有效期后自动续签",get_ssl_list:"正在获取证书列表，请稍候..",order_success:"订单完成",deploy:"部署",deployed:"已部署",domain_wait:"待域名确认",domain_validate:"验证域名",domain_check:"请检查域名是否解析到本服务器",update_ssl:"更新证书",get_ssl_err:"证书获取失败",get_ssl_err1:"证书获取失败，返回如下错误信息",err_type:"错误类型",ssl_close_info:"已关闭SSL,请务必清除浏览器缓存后再访问站点!",switch:"切换",switch_php_help1:"请根据您的程序需求选择版本",switch_php_help2:"若非必要,请尽量不要使用PHP5.2,这会降低您的服务器安全性；",switch_php_help3:"PHP7不支持mysql扩展，默认安装mysqli以及mysql-pdo",enable_nodejs:"启用Node.js",nodejs_help1:"当前版本为Node.js",nodejs_help2:"Node.js可以与PHP共存,但无法与Tomcat共存；",nodejs_help3:"若您的Node.js应用中有php脚本,访问时请添加.php扩展名",a_n_n:"apache2.2暂不支持Tomcat!",enable_tomcat:"启用Tomcat",tomcat_help1:"当前版本为Tomcat",tomcat_help2:"若您需要其它版本,请到软件商店- 所有软件 中切换；",tomcat_help3:"部署顺序: 安装Tomcat >> 创建站点 >> 上传并配置项目 >> 启用Tomcat",tomcat_help4:"若您的tomcat应用中有php脚本,访问时请添加.php扩展名",tomcat_help5:"开启成功后,大概需要1-5分钟时间生效!",tomcat_err_msg:"您没有安装Tomcat，请先安装!",tomcat_err_msg1:"请先安装Tomcat!",web_config_help:"此处为站点主配置文件,若您不了解配置规则,请勿随意修改.",rewritename:"0.当前",template_empty:"模板名称不能为空",save_rewrite_temp:"保存为Rewrite模板",template_name:"模板名称",change_defalut_page:"修改默认页",err_404:"404错误页",empty_page:"网站不存在提示页",default_page_stop:"网站停用后的提示页"},public:{success:"操作成功!",error:"操作失败!",add_success:"添加成功!",del_success:"删除成功",save:"保存",edit:"修改",edit_ok:"修改成功!",edit_err:"修改失败!",know:"知道了",close:"关闭",cancel:"取消",ok:"确定",empty:"清空",submit:"提交",exec:"执行",script:"脚本",log:"日志",slow_log:"慢日志",bin_log:"二进制日志",del:"删除",add:"添加",the_get:"正在获取,请稍候...",fresh:"刷新",config:"正在设置...",config_ok:"设置成功!",the:"正在处理,请稍候...",user:"帐号",pass:"密码",read:"正在读取,请稍候...",pre:"百分比",num:"次数",byte:"字节",input_err:"表单不合法,请重新输入!",the_add:"正在添加,请稍候...",the_del:"正在删除,请稍候...",msg:"提示",list_empty:"列表为空!",all:"所有",upload:"上传",download:"下载",action:"操作",warning:"警告",return:"返回",help:"帮助",list:"列表",off:"关闭",on:"开启"},pro_info_detail:{pid:"进程id",status:"进程状态",ppid:"父进程id",user_name:"所属用户名",num_threads:"所拥有的线程数",io_read:"读取的IO数据量",io_write:"写入的IO数据量",socket:"连接进程数",create_time:"进程启动时间",name:"名称",exe:"可执行文件路径",start_command:"启动命令",pro_info:"查询结果"},memory_info_detail:{rss:"物理内存大小",vms:"虚拟内存大小",shared:"共享内存大小",text:"代码段内存大小",lib:"库内存大小",data:"数据段内存大小",dirty:"脏内存大小",pss:"实际使用的物理内存大小",swap:"交换内存大小",memory_info:"查询结果"},soft_info_detail:{datid:"数据库OID（Object Identifier）",datname:"数据库名称",numbackends:"已连接到此数据库的后端数量",xact_commit:"数据库提交的事务数量",xact_rollback:"数据库回滚的事务数量",blks_read:"数据库从磁盘读取的块数",blks_hit:"数据库从共享缓存中读取的块数",tup_inserted:"数据库检索的行数",tup_fetched:"数据库检索的行数含“WHERE”限制",deadlocks:"数据库由于死锁而导致的回滚数",stats_reset:"最后一次重置统计信息的时间",active_connections:"当前活跃连接数",accepts:"接收的TCP连接数",handled:"成功处理的TCP连接数",requests:"处理的HTTP请求总数",Reading:"正在读取数据的TCP连接数",Writing:"正在写入数据的TCP连接数",Waiting:"可用连接的空闲TCP连接数",bind:"绑定的IP地址",port:"运行的端口号",maxconn:"可同时处理的最大连接数",cachesize:"使用的内存大小",curr_connections:"当前连接数",cmd_get:"执行get命令的次数",get_hits:"get命中缓存的次数",get_misses:"get没有命中缓存的次数",bytes_read:"读取字节数",bytes_written:"写入字节数",limit_maxbytes:"服务器可使用的最大内存大小",bytes:"当前存储数据所占用的字节数",curr_items:"当前缓存条目数量",evictions:"缓存淘汰的条目数量",hit:"命中率，即get命中率",Aborted_clients:"服务器主动中断的数量",Aborted_connects:"连接失败的数量",Bytes_received:"接收到的字节数",Bytes_sent:"发送的字节数",Com_commit:"提交的事务数量",Com_rollback:"回滚的事务数量",Connections:"已经建立的连接数量",Created_tmp_disk_tables:"创建的临时磁盘表数量",Created_tmp_tables:"创建的临时表数量",Innodb_buffer_pool_pages_dirty:"当前脏页数量",Innodb_buffer_pool_read_requests:" 从缓冲池中读取的请求数量",Innodb_buffer_pool_reads:"从磁盘中读取的数量",Key_read_requests:"从缓存中读取索引的请求数量",Key_reads:"从磁盘中读取索引的数量",Key_write_requests:"向缓存中写入索引的请求数量",Key_writes:"向磁盘中写入索引的数量",Max_used_connections:"最大同时连接数量",Open_tables:"当前打开的表数量",Opened_files:"打开的文件数量",Opened_tables:"打开的表数量",Qcache_hits:"查询缓存命中数量",Qcache_inserts:"查询缓存插入数量",Questions:"执行的查询数量",Select_full_join:"全表关联查询数量",Select_range_check:"范围检查查询数量",Sort_merge_passes:"排序合并操作的次数",Table_locks_waited:"等待表锁的次数",Threads_cached:"缓存的线程数量",Threads_connected:"当前连接的线程数量",Threads_created:" 创建的线程数量",Threads_running:"正在运行的线程数量",Uptime:"服务运行时间",Thread_cache_hit_ratio:"线程缓存命中率",Index_hit_ratio:"索引命中率",Innodb_index_hit_ratio:"Innodb索引命中率",Query_cache_hit_ratio:"查询缓存命中率",tcp_port:"服务器监听的TCP端口号",uptime_in_days:"服务器运行的天数",connected_clients:"当前连接到Redis服务器的客户端数量",used_memory:"服务器当前占用的内存大小",used_memory_rss:"服务器使用的常驻内存大小",used_memory_peak:"服务器最高峰时使用的内存大小",mem_fragmentation_ratio:"内存碎片率",total_connections_received:"服务器总共接受过的连接数",total_commands_processed:"服务器总共执行过的命令数",instantaneous_ops_per_sec:"服务器瞬时执行命令速率",keyspace_hits:"命中缓存的键值对数量",keyspace_misses:"未命中缓存的键值对数量",latest_fork_usec:"最近一次fork操作消耗的时间",version:"版本号",now_connection:"最大并发数",maximum_connection:"可以建立的最大连接数",query_num:"查询操作的数量",insert_num:"插入操作的数量",update_num:"更新操作的数量",delete_num:"删除操作的数量",hit_times:"操作的执行时间",misses_hit:"操作执行的失败次数",dataSize:"数据量",storageSize:"存储空间",resident:"当前驻留的内存大小",ChrootEveryone:"是否需要chroot才能登录FTP服务器",BrokenClientsCompatibility:"是否支持FTP服务器的broken client兼容性",MaxClientsNumber:"最大允许的FTP客户端数量",Daemonize:"是否启用daemon模式",MaxClientsPerIP:"每个IP地址最大允许的FTP客户端数量",VerboseLog:"是否输出详细的FTP日志信息",DisplayDotFiles:"是否显示FTP文件的DOT符号",AnonymousOnly:"是否只允许匿名用户登录FTP服务器",NoAnonymous:"是否允许匿名用户登录FTP服务器",SyslogFacility:"使用FTP的系统日志记录方式",DontResolve:"是否禁用 DNS 解析",MaxIdleTime:"设置 FTP 服务器的最大空闲时间",PureDB:"纯 FTP 服务器的 PDB 文件路径",UnixAuthentication:"是否使用 Unix 认证方式",LimitRecursion:"设置 FTP 服务器的最大重试次数",AnonymousCanCreateDirs:"是否禁止匿名用户创建目录",MaxLoad:"设置FTP服务器的最大负载",PassivePortRange:"FTP服务器的passive端口范围",AntiWarez:"启用Anti-WebDAV功能",Umask:"设置文件的权限模式",MinUID:"最小用户ID",AllowUserFXP:"是否允许使用FTPFX协议",AllowAnonymousFXP:"是否允许匿名登FTPFX协议",ProhibitDotFilesWrite:"是否禁止写入dot文件",ProhibitDotFilesRead:"是否禁止读取.dot文件",AutoRename:"用于自动重命名文件",AnonymousCantUpload:"是否禁止匿名用户上传文件",CreateHomeDir:"是否创建FTP服务器的主目录",PIDFile:"服务器的进程ID文件的路径",MaxDiskUsage:"服务器的最大磁盘使用量",CustomerProof:"服务器的客户端证书",TLS:"服务器的TLS协议",AllowOverwrite:"是否允许用户覆盖文件",AllowStoreRestart:"是否允许在服务器重启时自动重新加载FTP服务器",free_memory:"当前Java应用程序可用的内存大小",total_memory:"服务器的总内存大小",max_memory:"可以使用的最大内存大小",maxThreads:"运行的最大线程数",currentThreadCount:"运行的线程数",currentThreadsBusy:"繁忙的线程数",maxTime:"服务器可以运行的最大时间",processingTime:"服务器处理请求所需的时间",requestCount:"当前正在处理的请求数",errorCount:"当前错误的请求数",bytesReceived:"当前已经接收到的字节数",bytesSent:"当前已经发送的字节数",RestartTime:"重启时间",UpTime:"的运行时间",TotalAccesses:"已经处理的请求数",TotalKBytes:"已经处理的字节数",ReqPerSec:"每秒处理的请求数",BusyWorkers:"线程数",IdleWorkers:"空闲的线程数",workercpu:"线程的CPU使用率",workermem:"线程的内存使用率",apache_RestartTime:"服务器的重启时间",apache_UpTime:"服务器的运行时间",apache_TotalAccesses:"服务器处理的总请求数",apache_TotalKBytes:"服务器处理的总字节数",apache_ReqPerSec:"平均每秒的请求数",apache_BusyWorkers:"正在处理请求的工作进程数",apache_IdleWorkers:"空闲工作进程数",apache_workercpu:"工作进程的 CPU 占用率",apache_workermem:"工作进程的内存占用",soft_info:"查询结果"}},bt={os:"Linux",site:{get_msg_configs:function(e){var t=bt.load("正在获取消息推送配置，请稍候...");bt.send("get_msg_configs","config/get_msg_configs",{},(function(s){t.close(),e&&e(s)}))},get_site_security:function(e,t,s){bt.send("GetSecurity","site/GetSecurity",{id:e,name:t},(function(e){s&&s(e)}))},set_site_security:function(e,t,s,a,n,i,l,o){var r=bt.load(lan.site.the_msg);bt.send("SetSecurity","site/SetSecurity",{id:e,name:t,fix:s,domains:a,status:n,return_rule:i,http_status:l},(function(e){r.close(),o&&o(e)}))},fullScreenLog:function(e,t,s,a){$(".full").unbind("click").click((function(){var n;n={content:a?'<div id="editor-content" style="height: 100%;"></div>':'<pre style="background:black;color:white;height:100%;margin:0">'+e.html()+"</pre>",success:function(s){if(a){var n={el:"editor-content",mode:"dockerfile",content:e.html(),readOnly:!t.hasOwnProperty("readOnly")||t.readOnly,theme:"ace/theme/monokai"};t.path&&(n.path=t.path);var i=bt.aceEditor(n);t.top||setTimeout((function(){i.ACE.getSession().setScrollTop(i.ACE.renderer.scrollBar.scrollHeight)}),50)}}},layer.open({type:1,area:["100%","100%"],shade:.4,title:t.title||"查看【"+t.name+"】"+s+"日志",closeBtn:1,content:n.content,success:function(e){$(e).css({top:"0",left:"0"}),n.success&&n.success(e)}})}))}},pub:{get_data:function(e,t,s){if(!s)var a=bt.load(lan.public.the);bt.send("getData","data/getData",e,(function(e){a&&a.close(),t&&t(e)}))},set_data_by_key:function(e,t,s){var a=$(s),n=$("<input class='baktext' type='text' placeholder='"+lan.ftp.ps+"' />").val(a.text());a.hide().after(n),n.focus(),n.blur((function(){var s=$(this).parents("tr").data("item"),n=$(this),i={table:e,id:s.id};i[t]=n.val(),bt.pub.set_data_ps(i,(function(e){e.status&&(a.text(n.val()),a.show(),n.remove())}))})),n.keyup((function(){13==event.keyCode&&n.trigger("blur")}))},set_data_ps:function(e,t){bt.send("setPs","data/setPs",e,(function(e){t&&t(e)}))},set_server_status:function(e,t){var s=e;bt.contains(e,"php-")&&(e="php-fpm-"+e.replace("php-","").replace(".","")),"pureftpd"==e&&(e="pure-ftpd"),"mysql"==e&&(e="mysqld");var a="name="+(e=e.replace("_soft",""))+"&type="+t,n=lan.bt[t],i="";switch(t){case"stop":i="停止";break;case"restart":i="重启";break;case"reload":i="重载"}bt.confirm({msg:lan.get("service_confirm",[n,e]),title:i+e+"服务"},(function(){var t=bt.load(lan.get("service_the",[n,e]));bt.send("system","system/ServiceAdmin",a,(function(a){t.close();var i=a.status?lan.get("service_ok",[e,n]):a.msg||lan.get("service_err",[e,n]);a.status?bt.msg({msg:i,icon:a.status}):layer.msg(i,{icon:2,closeBtn:2,time:0,shade:.3,shadeClose:!0}),a.status&&($(".bt-soft-menu").length?setTimeout((function(){bt.send("get_soft_find","plugin/get_soft_find",{sName:s},(function(e){$(".bt-soft-menu").data("data",e),$(".bt-soft-menu .bgw").click()}))}),1e3):setTimeout((function(){window.location.reload()}),1e3),a.status||bt.msg(a))}))}))},set_ftp_logs:function(e){var t="exec_name="+e,s="开启";if("stop"===e)s="关闭";var a="stop"!=e;layer.confirm(s+"pure-ftpd日志管理后，"+(a?"将记录所有FTP用户的登录、操作记录":"将无法记录所有FTP用户的登录、操作记录")+"，是否继续操作？",{title:s+"pure-ftpd日志管理",closeBtn:2,icon:3,cancel:function(){$("#isFtplog").prop("checked",!a)}},(function(){var e=bt.load("正在"+s+"pure-ftpd日志管理，请稍后...");bt.send("ftp","ftp/set_ftp_logs",t,(function(t){e.close(),bt.msg(t),$(".bt-soft-menu p").eq(3).click()}))}),(function(){$("#isFtplog").prop("checked",!a)}))},get_ftp_logs:function(e){bt.send("ftp","ftp/set_ftp_logs",{exec_name:"getlog"},(function(t){var s="start"===t.msg;e&&e(s)}))},set_server_status_by:function(e,t){bt.send("system","system/ServiceAdmin",e,(function(e){t&&t(e)}))},get_task_count:function(e){bt.send("GetTaskCount","ajax/GetTaskCount",{},(function(t){$(".task").text(t),e&&e(t)}))},check_install:function(e){bt.send("CheckInstalled","ajax/CheckInstalled",{},(function(t){e&&e(t)}))},get_user_info:function(e){var t=bt.load();bt.send("GetUserInfo","ssl/GetUserInfo",{},(function(s){t.close(),e&&e(s)}))},show_hide_pass:function(e){var t="glyphicon-eye-open",s="glyphicon-eye-close";$(e).hasClass(t)?($(e).removeClass(t).addClass(s),$(e).prev().text($(e).prev().attr("data-pw"))):($(e).removeClass(s).addClass(t),$(e).prev().text("**********"))},copy_pass:function(e){var t=new ClipboardJS("#bt_copys");t.on("success",(function(e){bt.msg({msg:"复制成功",icon:1})})),t.on("error",(function(e){bt.msg({msg:"复制失败，浏览器不兼容!",icon:2})})),$("#bt_copys").attr("data-clipboard-text",e),$("#bt_copys").click()},login_btname:function(e,t,s){var a=bt.load(lan.config.token_get);bt.send("GetToken","ssl/GetToken",{username:e,password:t},(function(e){a.close(),bt.msg(e),e.status&&s&&s(e)}))},bind_btname:function(e){(new BindAccount).bindUserView(1)},unbind_bt:function(){$("input[name='btusername']").val();bt.confirm({msg:lan.config.binding_un_msg,title:lan.config.binding_un_title},(function(){bt.send("DelToken","ssl/DelToken",{},(function(e){bt.msg(e),$("input[name='btusername']").val("")}))}))},get_menm:function(e){var t=bt.load();bt.send("GetMemInfo","system/GetMemInfo",{},(function(s){t.close(),e&&e(s)}))},on_edit_file:function(e,t,s){if(0==e){var a=bt.load(lan.bt.read_file);ext=bt.get_file_ext(t),bt.send("GetFileBody","files/GetFileBody","path="+t,(function(e){if(e.status){a.close();for(var n=["utf-8","GBK","GB2312","BIG5"],i="",l="",o=0;o<n.length;o++)l=e.encoding===n[o]?"selected":"",i+='<option value="'+n[o]+'" '+l+">"+n[o]+"</option>";var r={},c=bt.open({type:1,shift:5,closeBtn:1,area:["80%","80%"],shade:!1,title:lan.bt.edit_title+"["+t+"]",btn:[lan.public.save,lan.public.close],content:'                <form class="bt-form pd20">                  <div class="line">                    <p style="position: relative; color:red;margin-bottom:10px">'+lan.bt.edit_ps+'<select class="bt-input-text" name="encoding" style="width: 74px;position: absolute;top: 0;right: 0;height: 22px;z-index: 9999;border-radius: 0;">'+i+'</select>                    </p>                    <div class="mCustomScrollbar bt-input-text ace_config_editor_scroll" id="textBody" style="width:100%;margin:0 auto;line-height: 1.8;position: relative;top: 10px;min-height:300px;"></div>                  </div>                </form>',yes:function(e,t){bt.saveEditor(r)},btn2:function(e,t){c.close()},success:function(a){function n(){var e=$(a).find(".layui-layer-content").height();$("#textBody").height(e-80)}n(),$(window).on("resize",n),r=bt.aceEditor({el:"textBody",content:e.data,mode:s,saveCallback:function(e){bt.send("SaveFileBody","files/SaveFileBody",{path:t,encoding:$('[name="encoding"] option:selected').val(),data:e},(function(e){bt.msg(e)}))}})}})}else bt.msg({msg:e.msg,icon:5})}))}else{$("#PathPlace input").val();var n=encodeURIComponent($("#textBody").val()),i=$("select[name=encoding]").val(),l=bt.load(lan.bt.save_file);bt.send("SaveFileBody","files/SaveFileBody","data="+n+"&path="+t+"&encoding="+i,(function(t){1==e&&l.close(),bt.msg(t)}))}}},soft:{install:function(e,t){window.parent.postMessage("installPlugin::"+e,"*")},get_soft_find:function(e,t){var s=bt.load();bt.send("get_soft_find","plugin/get_soft_find",{sName:e},(function(e){s.close(),t&&t(e)}))},get_config_path:function(e){var t="";if("Linux"==bt.os)switch(e){case"mysql":case"mysqld":t="/etc/my.cnf";break;case"nginx":t="/www/server/nginx/conf/nginx.conf";break;case"pureftpd":t="/www/server/pure-ftpd/etc/pure-ftpd.conf";break;case"apache":t="/www/server/apache/conf/httpd.conf";break;case"tomcat":t="/www/server/tomcat/conf/server.xml";break;case"memcached":t="/etc/init.d/memcached";break;case"redis":t="/www/server/redis/redis.conf";break;case"openlitespeed":t="/usr/local/lsws/conf/httpd_config.conf";break;default:t="/www/server/php/"+e+"/etc/php.ini"}return t},set_lib_config:function(e,t,s,a){if(-1!==["btwaf_httpd","btwaf","total","rsync","tamper_proof","syssafe","task_manager","security_notice","tamper_core","bt_security","system_scan","vuln_push","disk_analysis"].indexOf(e)&&parseInt(a)<0)return bt.soft.view_expire({type:"plugin",name:e,endtime:a});bt_tools.send({url:"/plugin?action=a&name="+e},(function(a){if(a.msg&&-1!==a.msg.indexOf("您无操作此插件的权限"))return bt_tools.msg(a);var n=bt.load(lan.soft.menu_temp);$.ajax({url:"/plugin?action=getConfigHtml",data:{name:e,version:s},type:"get",success:function(s){function a(){bt.open({type:1,shift:5,offset:"auto",closeBtn:2,area:t.indexOf("Node.js版本管理器")>-1?["700px","710px"]:"700px",title:'<img style="width: 24px;margin-right: 5px;margin-left: -10px;margin-top: -3px;" src="/static/img/soft_ico/ico-'+e+'.png" />'+t,content:s.replace('"javascript/text"','"text/javascript"'),success:function(e){-1!=s.indexOf("CodeMirror")&&(loadLink(["/static/codemirror/lib/codemirror.css"]),loadScript(["/static/codemirror/lib/codemirror.js","/static/codemirror/addon/edit/editAll.js","/static/codemirror/mode/modeAll.js","/static/codemirror/addon/dialog/dialog.js","/static/codemirror/addon/search/search.js","/static/codemirror/addon/scroll/annotatescrollbar.js"]));var t=$(window).height(),a=$(e).height();a>=t?setTimeout((function(){$(e).css({top:"0px"})}),100):($(e).find(".layui-layer-content").removeAttr("style").css({"background-color":"#fff"}),$(e).css({top:(t-a)/2+"px"}),$(e).find(".layui-layer-close").addClass("layui-layer-close2").removeClass("layui-layer-close1"))},cancel:function(e){return layer.close(e),window.parent.postMessage("closePlugin","*"),!1}})}n.close(),!1!==s.status?"total"==e||"rsync"==e||"syssafe"==e||"tamper_proof"==e?"true"==bt.get_storage(e+"_config")?a():bt_tools.send({url:"/plugin?action=check_plugin_settings",data:{soft_name:e}},(function(s){s.on_config?a():layer.open({type:0,area:"200px",title:"【"+t+"】插件",closeBtn:2,icon:3,btn:["确定","取消"],content:"<div><span>检测到【"+t+'】插件存在配置文件</span><div style="display: flex;margin-top: 10px"><span>配置文件</span><div><div class="indicators-label" style="margin-left: 10px;" bt-event-click="indicatorsType" data-name="pv"><input type="radio" value="1" name="1" checked><label class="check_pv" style="font-weight:normal;cursor: pointer">导入</label><input  type="radio" name="1" value="0"><label class="check_pv" style="margin-left: 10px;   margin-bottom: 0;    font-weight: normal;cursor: pointer" class="check_pv" style="font-weight:normal">不导入</label></div></div></div></div>',success:function(t,s){$(".check_pv").click((function(){$(this).prev().prop("checked",!0)})),$(".layui-layer-btn1").click((function(){bt.set_storage(e+"_config",!0),a(),layer.close(s)}))},yes:function(t,s){bt.set_storage(e+"_config",!0),1==$('input[name="1"]:checked').val()?bt_tools.send({url:"/plugin?action=load_plugin_settings",data:{soft_name:e}},(function(e){e.status&&(layer.close(t),a())}),"导入配置文件"):(layer.close(t),a())},cancel:function(t){bt.set_storage(e+"_config",!0),layer.close(t),a()}})})):a():"phpguard"==e?layer.msg(lan.soft.menu_phpsafe,{icon:1}):layer.msg(s.msg,{icon:2})}})}),{verify:!1})},get_soft_list:function(e,t,s,a,n){null==e&&(e=1),null==t&&(t=0),null==s&&(s="");var i=bt.soft_flush_cache||0;if(null==n&&(n=12),-1==(e+="").indexOf("not_load"))var l=bt.load(lan.public.the,1);else{l=null;e=e.split("not_load")[0]}bt.send("get_soft_list","plugin/get_soft_list",{p:e,type:t,tojs:"soft.get_list",force:i,query:s,row:n},(function(e){l&&l.close(),bt.soft.softList=e.list.data,e.list.data.length%3!=0?$(".soft_card_page").css("justify-content","flex-start"):$(".soft_card_page").css("justify-content","space-between"),bt.set_cookie("force",0),bt.set_cookie("ltd_end",e.ltd),bt.set_cookie("pro_end",e.pro),a&&a(e)})),bt.soft_flush_cache=0},updata_ltd:function(){window.parent.postMessage("ProductLtdBuy","*")},product_pay_view:function(e){window.parent.postMessage("ProductPayView::"+JSON.stringify(e),"*")}},firewall:{add_accept_port:function(e,t,s,a){var n="AddDropAddress";if("port"==e){ports=t.split(":"),-1!=t.indexOf("-")&&(ports=t.split("-"));for(var i=0;i<ports.length;i++)if(!bt.check_port(ports[i]))return void layer.msg("可用端口范围：1-65535",{icon:2});n="AddAcceptPort"}if(s.length<1)return layer.msg(lan.firewall.ps_err,{icon:2}),-1;loading=bt.load(),bt.send(n,"firewall/"+n,{port:t,type:e,ps:s},(function(e){loading.close(),a&&a(e)}))},del_accept_port:function(e,t,s){var a="DelDropAddress";-1==t.indexOf(".")&&(a="DelAcceptPort"),bt.confirm({msg:lan.get("confirm_del",[t]),title:lan.firewall.del_title},(function(n){var i=bt.load(lan.public.the_del);bt.send(a,"firewall/"+a,{id:e,port:t},(function(e){i.close(),s&&s(e)}))}))}},system:{rep_panel:function(e){var t=bt.load(lan.index.rep_panel_the);bt.send("RepPanel","system/RepPanel",{},(function(s){t.close(),s&&(e&&e({status:s,msg:lan.index.rep_panel_ok}),bt.system.reload_panel())}))}},database:{get_list:function(e,t,s){null==e&&(e=1);var a="tojs=database.get_list&table=databases&limit=15&p="+e+"&search="+(t=null==t?"":t)+(bt.get_cookie("order")?"&order="+bt.get_cookie("order"):"");bt.pub.get_data(a,(function(e){s&&s(e)}))}},refreshMain:function(e){window.parent.postMessage("refreshMain"+(e?"::"+e:""),"*")},isInteger:function(e){return(0|e)===e},check_ip:function(e){return/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/.test(e)},check_ips:function(e){return/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}(\/\d{1,2})?$/.test(e)},check_domain_list:function(e,t){for(var s=e.trim().replace(" ","").split("\n"),a=0;a<s.length;a++){var n=s[a];if(t&&!bt.check_domain_port(n))return bt.msg({status:!1,msg:"第"+(a+1)+"行【"+n+"】域名格式错误"}),!1;if(!t&&!bt.check_domain(n))return bt.msg({status:!1,msg:"第"+(a+1)+"行【"+n+"】域名格式错误"}),!1}return s},check_url:function(e){return/^((https|http|ftp|rtsp|mms)?:\/\/)[^\s]+/.test(e)},check_port:function(e){return/^([1-9]|[1-9]\d|[1-9]\d{2}|[1-9]\d{3}|[1-5]\d{4}|6[0-4]\d{3}|65[0-4]\d{2}|655[0-2]\d|6553[0-5])$/.test(e)},check_chinese:function(e){return/[\u4e00-\u9fa5]/.test(e)},check_domain:function(e){return/^([\w\u4e00-\u9fa5\-\*]{1,100}\.){1,10}([\w\u4e00-\u9fa5\-]{1,24}|[\w\u4e00-\u9fa5\-]{1,24}\.[\w\u4e00-\u9fa5\-]{1,24})$/.test(bt.strim(e))},check_domain_port:function(e){return/^([\w\u4e00-\u9fa5\-\*]{1,100}\.){1,10}([\w\u4e00-\u9fa5\-]{1,24}|[\w\u4e00-\u9fa5\-]{1,24}\.[\w\u4e00-\u9fa5\-]{1,24})(:([1-9]|[1-9]\d|[1-9]\d{2}|[1-9]\d{3}|[1-5]\d{4}|6[0-4]\d{3}|65[0-4]\d{2}|655[0-2]\d|6553[0-5]))?$/.test(bt.strim(e))},check_img:function(e){return bt.check_exts(e,["jpg","jpeg","png","bmp","gif","tiff","ico"])},check_email:function(e){return/\w[-\w.+]*@([A-Za-z0-9][-A-Za-z0-9]+\.)+[A-Za-z]{2,14}/.test(e)},check_phone:function(e){return/^1(3|4|5|6|7|8|9)\d{9}$/.test(e)},check_zip:function(e){var t=e.split("."),s=t[t.length-1].toLowerCase();return"zip"==s?0:"rar"==s?2:"gz"==s||"tgz"==s?1:-1},check_text:function(e){return!bt.check_exts(e,["rar","zip","tar.gz","gz","iso","xsl","doc","xdoc","jpeg","jpg","png","gif","bmp","tiff","exe","so","7z","bz"])},check_exts:function(e,t){var s=e.split(".");if(s.length<2)return!1;for(var a=s[s.length-1].toLowerCase(),n=0;n<t.length;n++)if(a==t[n])return!0;return!1},check_version:function(e,t){for(var s=e.split("."),a=t.split("."),n=s.length>a.length?s.length:a.length;n-s.length>0;)s.push(0);for(;n-a.length>0;)a.push(0);for(var i=0;i<n;i++)if(i==n-1){if(s[i]!=a[i])return 2}else if(s[i]!=a[i])return-1;return 1},url_merge:function(e){var t=window.location.origin;return("/static"!==cdn_url?cdn_url:t+cdn_url)+e+"?version="+panel_version+"&repair="+update_code},replace_all:function(str,old_data,new_data){var reg_str="/("+old_data+"+)/g",reg=eval(reg_str);return str.replace(reg,new_data)},get_file_ext:function(e){var t=e.split(".");return t=t[t.length-1]},get_file_path:function(e){var t=e.split("/");return path=e.replace("/"+t[t.length-1],""),path},get_date:function(e){var t=new Date;t.setTime(t.getTime()+864e5*(null==e||isNaN(parseInt(e))?0:parseInt(e)));var s=t.getFullYear(),a=t.getMonth()+1,n=t.getDate();return s+"-"+(a<10?"0"+a:a)+"-"+(n<10?"0"+n:n)},get_form:function(e){for(var t=$(e).serializeArray(),s={},a=0;a<t.length;a++)s[t[a].name]=t[a].value;return s},ltrim:function(str,r){var reg_str="/(^\\"+r+"+)/g",reg=eval(reg_str);return str=str.replace(reg,""),str},rtrim:function(str,r){var reg_str="/(\\"+r+"+$)/g",reg=eval(reg_str);return str=str.replace(reg,""),str},strim:function(str){var reg_str="/ /g",reg=eval(reg_str);return str=str.replace(reg,""),str},contains:function(e,t){return!!e&&e.indexOf(t)>=0},format_size:function(e,t,s,a){if(null==e)return 0;null==t&&(t=!0),null==s&&(s=2),null==a&&(a=""),"string"==typeof e&&(e=parseInt(e));for(var n=[" B"," KB"," MB"," GB","TB"],i=0;i<n.length;i++){var l=n[i];if(a){if(l.trim()==a.trim()){var o=0==i||0==s?e:e.toFixed(s);return t?o+l:o=parseFloat(o)}}else if(e<1024){o=0==i||0==s?e:e.toFixed(s);return t?o+l:o=parseFloat(o)}e/=1024}},format_data:function(e,t){null==t&&(t="yyyy/MM/dd hh:mm:ss"),(e=e.toString()).length>10&&(e=e.substring(0,10));var s=new Date(1e3*parseInt(e)),a={"M+":s.getMonth()+1,"d+":s.getDate(),"h+":s.getHours(),"m+":s.getMinutes(),"s+":s.getSeconds(),"q+":Math.floor((s.getMonth()+3)/3),S:s.getMilliseconds()};for(var n in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(s.getFullYear()+"").substr(4-RegExp.$1.length))),a)new RegExp("("+n+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?a[n]:("00"+a[n]).substr((""+a[n]).length)));return t},format_path:function(e){return e=e.replace(/(\\)/g,"/")},get_random:function(e){e=e||32;var t="AaBbCcDdEeFfGHhiJjKkLMmNnPpRSrTsWtXwYxZyz2345678",s="";for(i=0;i<e;i++)s+=t.charAt(Math.floor(48*Math.random()));return s},refresh_pwd:function(e,t){null==t&&(t="MyPassword");var s=$("#"+t);s.length>0?s.val(bt.get_random(e)):$("."+t).val(bt.get_random(e))},get_random_num:function(e,t){var s=t-e,a=Math.random();return e+Math.round(a*s)},get_random_code:function(){for(var e=[20,21,22,23],t=bt.get_random_num(13,19),s=t%10,a=bt.get_random_num(13,29),n=a%10;$.inArray(a,e)>=0||s+n<=10||s==n;)n=(a=bt.get_random_num(13,29))%10;return{num1:t,num2:a}},set_storage:function(e,t,s){"local"!=e&&"session"!=e&&(s=t,t=e,e="local"),window[e+"Storage"].setItem(t,s)},get_storage:function(e,t){return"local"!=e&&"session"!=e&&(t=e,e="local"),window[e+"Storage"].getItem(t)},remove_storage:function(e,t){"local"!=e&&"session"!=e&&(t=e,e="local"),window[e+"Storage"].removeItem(t)},clear_storage:function(e){"local"!=e&&"session"!=e&&(key=e,e="local"),window[e+"Storage"].clear()},set_cookie:function(e,t,s){if(null!=s){(a=new Date).setTime(a.getTime()+s),s=a.toGMTString()}else{var a;(a=new Date).setTime(a.getTime()+2592e6),s=a.toGMTString()}var n="https:"==window.location.protocol;document.cookie="http"+(n?"s":"")+"_"+e+"="+encodeURIComponent(t)+";expires="+s+(n?";Secure; Path=/; SameSite=None":"")},get_cookie:function(e){var t,s="https:"==window.location.protocol,a=new RegExp("(^| )http"+(s?"s":"")+"_"+e+"=([^;]*)(;|$)");if(t=document.cookie.match(a)){var n="";if(t.length>2)try{n=decodeURIComponent(t[2])}catch(e){n=t[2]}return"undefined"==n?"":n}return null},clear_cookie:function(e){bt.set_cookie(e,"",new Date)},simple_confirm:function(e,t,s){layer.open({type:1,title:e.title,area:"430px",closeBtn:2,shadeClose:!1,btn:e.btn?e.btn:[lan.public.ok,lan.public.cancel],content:'<div class="bt-form hint_confirm pd30">            <div class="hint_title">                <i class="hint-confirm-icon"></i>                <div class="hint_con">'+e.msg+"</div>            </div>        </div>",yes:function(e,s){t&&void 0===t(e)&&layer.close(e)},btn2:function(e){s&&void 0===s(e)&&layer.close(e)},cancel:function(e){s&&void 0===s(e)&&layer.close(e)}})},format_data:function(e,t){null==t&&(t="yyyy/MM/dd hh:mm:ss"),(e=e.toString()).length>10&&(e=e.substring(0,10));var s=new Date(1e3*parseInt(e)),a={"M+":s.getMonth()+1,"d+":s.getDate(),"h+":s.getHours(),"m+":s.getMinutes(),"s+":s.getSeconds(),"q+":Math.floor((s.getMonth()+3)/3),S:s.getMilliseconds()};for(var n in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(s.getFullYear()+"").substr(4-RegExp.$1.length))),a)new RegExp("("+n+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?a[n]:("00"+a[n]).substr((""+a[n]).length)));return t},prompt_confirm:function(e,t,s){layer.open({type:1,title:e,area:"350px",closeBtn:2,btn:["确认","取消"],content:"<div class='bt-form promptDelete pd20'>\t\t\t\t\t\t\t\t<p>"+t+"</p>\t\t\t\t\t\t\t\t<div class='confirm-info-box'>\t\t\t\t\t\t\t\t\t<input onpaste='return false;' id='prompt_input_box' type='text' value=''>\t\t\t\t\t\t\t\t\t<div class='placeholder c9 prompt_input_tips' >如果确认操作，请手动输入‘<font style='color: red'>"+e+"</font>’</div>\t\t\t\t\t\t\t\t\t\t\t<div style='margin-top:5px;display: none;' class='prompt_input_ps'>验证码错误，请手动输入‘<font style='color: red'>"+e+"</font>’</div></div>\t\t\t\t\t\t\t\t</div>",success:function(){var e=$("#prompt_input_box");$(".placeholder").click((function(){$(this).hide().siblings("input").focus()})),e.focus((function(){$(".prompt_input_tips.placeholder").hide()})),e.blur((function(){""==e.val()?$(".prompt_input_tips.placeholder").show():$(".prompt_input_tips.placeholder").hide()})),e.keyup((function(){""==e.val()?($(".prompt_input_tips.placeholder").show(),$(".prompt_input_ps").hide()):$(".prompt_input_tips.placeholder").hide()}))},yes:function(t,a){bt.replace_all($("#prompt_input_box").val()," ","")==e?(layer.close(t),s&&s()):$(".prompt_input_ps").show()}})},show_confirm:function(e,t,s,a){var n=Math.round(9*Math.random()+1),i=Math.round(9*Math.random()+1),l=n+" + "+i,o=n+i;function r(e,t){var a=$("#vcodeResult"),n=a.val().replace(/ /g,"");null!=n&&""!=n&&n==a.data("value")?(layer.close(e),s&&s()):layer.msg(lan.bt.cal_err)}layer.open({type:1,title:e,area:"365px",closeBtn:2,shadeClose:!0,btn:[lan.public.ok,lan.public.cancel],content:"<div class='bt-form webDelete pd20'>                          <p style='font-size:13px;word-break: break-all;margin-bottom: 5px;'>"+t+"</p>"+(a||"")+"<div class='vcode'>"+lan.bt.cal_msg+"<span class='text'>"+l+"</span>=<input type='number' id='vcodeResult' data-value='"+o+"' value=''></div>                      </div>",success:function(e,t){$("#vcodeResult").focus().keyup((function(e){13==e.keyCode&&r(t)}))},yes:r})},simple_confirm:function(e,t,s){layer.open({type:1,title:e.title,area:"430px",closeBtn:2,shadeClose:!1,btn:e.btn?e.btn:[lan.public.ok,lan.public.cancel],content:'<div class="bt-form hint_confirm pd30">\t\t\t\t\t<div class="hint_title">\t\t\t\t\t\t<i class="hint-confirm-icon"></i>\t\t\t\t\t\t<div class="hint_con">'+e.msg+"</div>\t\t\t\t\t</div>\t\t\t\t</div>",yes:function(e,s){t&&void 0===t(e)&&layer.close(e)},btn2:function(e){s&&void 0===s(e)&&layer.close(e)},cancel:function(e){s&&void 0===s(e)&&layer.close(e)}})},compute_confirm:function(e,t){var s=Math.round(9*Math.random()+1),a=Math.round(9*Math.random()+1),n=s+" + "+a,i=s+a;function l(e,s){var a=$("#vcodeResult"),n=a.val().replace(/ /g,"");null!=n&&""!=n&&n==a.data("value")?(layer.close(e),t&&t()):layer.msg(lan.bt.cal_err)}layer.open({type:1,title:e.title,area:"430px",closeBtn:2,shadeClose:!0,btn:[lan.public.ok,lan.public.cancel],content:'<div class="bt-form hint_confirm pd30">\t\t\t\t\t\t<div class="hint_title">\t\t\t\t\t\t\t<i class="hint-confirm-icon"></i>\t\t\t\t\t\t\t<div class="hint_con">'+e.msg+'</div>\t\t\t\t\t\t</div>\t\t\t\t\t\t<div class="vcode">计算验证：<span class="text">'+n+'</span>=<input type="number" id="vcodeResult" data-value="'+i+'" value=""></div>\t\t\t\t</div>',success:function(e,t){$("#vcodeResult").focus().keyup((function(e){13==e.keyCode&&l(t)}))},yes:l})},input_confirm:function(e,t){layer.open({type:1,title:e.title,area:"430px",closeBtn:2,shadeClose:!0,btn:[lan.public.ok,lan.public.cancel],content:'<div class="bt-form hint_confirm pd30">\t\t\t\t\t\t<div class="hint_title">\t\t\t\t\t\t\t<i class="hint-confirm-icon"></i>\t\t\t\t\t\t\t<div class="hint_con">'+e.msg+'</div>\t\t\t\t\t\t</div>\t\t\t\t\t\t<div class="confirm-info-box">\t\t\t\t\t\t\t<div>请手动输入“<span class="color-org">'+e.value+'</span>”，完成验证</div>\t\t\t\t\t\t\t<input onpaste="return false;" id="prompt_input_box" type="text" value="" autocomplete="off">\t\t\t\t\t\t</div>\t\t\t\t</div>',yes:function(s,a){if(bt.replace_all($("#prompt_input_box").val()," ","")!=e.value)return $("#prompt_input_box").focus(),layer.msg("验证失败，请重新输入",{icon:2});layer.close(s),t&&t()}})},get_file_list:function(e,t,s){t=t||"dir";var a=this;bt.send("GetDir","files/GetDir",{path:e,disk:!0},(function(e){var n="",i="";if(null!=e.DISK){for(var l=0;l<e.DISK.length;l++)i+='<dd class="bt_open_dir" path ="'+e.DISK[l].path+"\"><span class='glyphicon glyphicon-hdd'></span>&nbsp;"+e.DISK[l].path+"</dd>";$("#changecomlist").html(i)}for(l=0;l<e.DIR.length;l++){var o=(r=e.DIR[l].split(";"))[0];""!=(c=r[10])&&(null==(c=c.split("：")[1])&&(c=r[10].split(":")[1]),null==c&&(c=r[10])),o.length>20&&(o=o.substring(0,20)+"..."),isChineseChar(o)&&o.length>10&&(o=o.substring(0,10)+"..."),n+="<tr><td>"+("all"===t||"dir"===t||"multiple"===t?'<span style="display: flex;align-items: center;"><input style="margin: 0;" type="checkbox" name="fileCheck" /></span>':"")+'</td><td><a class=\'fileItem bt_open_dir\' class="bt_open_dir" data-path ="'+e.PATH+"/"+r[0]+"\" title='"+r[0]+"' data-type=\"dir\"><span class='glyphicon glyphicon-folder-open'></span><span>"+o+"</span></a></td><td style='width:100px'><span style='  width: 100px;display: inline-block;text-overflow: ellipsis;overflow: hidden;white-space: pre;vertical-align: middle;'>"+c+"</span></td><td>"+bt.format_data(r[2])+"</td><td>"+r[3]+" | "+r[4]+"</td></tr>"}if(null!==e.FILES&&""!==e.FILES)for(l=0;l<e.FILES.length;l++){var r,c;o=(r=e.FILES[l].split(";"))[0];""!=(c=r[10])&&(null==(c=c.split("：")[1])&&(c=r[10].split(":")[1]),null==c&&(c=r[10])),o.length>20&&(o=o.substring(0,20)+"..."),isChineseChar(o)&&o.length>10&&(o=o.substring(0,10)+"..."),n+="<tr><td>"+("all"===t||"file"===t||"multiple"===t?'<span  style="display: flex;align-items: center;"><input style="margin: 0;" type="checkbox" name="fileCheck" /></span>':"")+"<td><a class='fileItem bt_open_dir' class=\"bt_open_dir\" title='"+r[0]+'\' data-type="files" data-path ="'+e.PATH+"/"+r[0]+"\"><span class='glyphicon glyphicon-file'></span><span>"+o+"</span></a></td><td style='width:100px'><span style='  width: 100px;display: inline-block;text-overflow: ellipsis;overflow: hidden;white-space: pre;vertical-align: middle;'>"+c+"</span></td><td>"+bt.format_data(r[2])+"</td><td>"+r[3]+" | "+r[4]+"</td></tr>"}$(".default").hide(),$(".file-list").show(),$("#tbody").html(n),"/"!==e.PATH.substr(e.PATH.length-1,1)&&(e.PATH+="/"),$("#PathPlace").find("span").html(e.PATH),$("#tbody tr").click((function(){$(this).find("td:eq(0) input").length>0&&($(this).hasClass("active")?($(this).removeClass("active"),$(this).find("td:eq(0) input").prop("checked",!1)):($(this).addClass("active"),$(this).find("td:eq(0) input").prop("checked",!0),"multiple"!==t&&($(this).addClass("active").siblings().removeClass("active"),$(this).siblings().find("td:eq(0) input").prop("checked",!1))))})),$("#changecomlist dd").click((function(){a.get_file_list($(this).attr("path"),t)})),$(".bt_open_dir").click((function(){var e=$(this).data();"dir"===e.type&&a.get_file_list(e.path,t)})),s&&s(e)}))},select_path:function(e,t,s,a){bt.set_cookie("SetName",""),"string"!=typeof t&&(s=t,t="dir"),title="all"===t?"选择目录和文件":"file"===t?lan.bt.file:lan.bt.dir,"multiple"===t&&(title="选择目录和文件，支持多选");var n=bt.open({type:1,area:"750px",title:title,closeBtn:2,shift:5,content:"<div class='changepath'>            <div class='path-top flex' style='justify-content: space-between;'><div>                <button type='button' id='btn_back' class='btn btn-default btn-sm'><span class='glyphicon glyphicon-share-alt'></span> "+lan.public.return+"</button>                    <div class='place' id='PathPlace'>"+lan.bt.path+"：<span></span></div>                </div>            <div>                    <button type='button' id='btn_refresh' class='btn btn-default btn-sm'><span class='glyphicon glyphicon-repeat'></span> 刷新</button>                </div>            </div>            <div class='path-con'><div class='path-con-left'><dl><dt id='changecomlist' >"+lan.bt.comp+"</dt></dl></div><div class='path-con-right'><ul class='default' id='computerDefautl'></ul><div class='file-list divtable'><table class='table table-hover' style='border:0 none'><thead><tr class='file-list-head'><th width='5%'></th><th width='38%'>"+lan.bt.filename+"</th><th>备注</th><th width='24%'>"+lan.bt.etime+"</th><th width='8%'>"+lan.bt.access+"</th></tr></thead><tbody id='tbody' class='list-list'></tbody></table></div></div></div></div><div class='getfile-btn' style='margin-top:0'><button type='button' class='btn btn-default btn-sm pull-left' onclick='CreateFolder()'>"+lan.bt.adddir+"</button><button type='button' class='btn btn-danger btn-sm mr5' onclick=\"layer.close(getCookie('ChangePath'))\">"+lan.public.close+"</button> <button type='button' id='bt_select' class='btn btn-success btn-sm' >"+lan.bt.path_ok+"</button></div>",success:function(){$("#btn_refresh").click((function(){var e=$("#PathPlace").find("span").text();e=bt.rtrim(bt.format_path(e),"/");var s=bt.load("正在刷新目录，请稍后...");bt.get_file_list(e,t,(function(){s.close()}))})),$("#btn_back").on("click",(function(){var e=$("#PathPlace").find("span").text();e=bt.rtrim(bt.format_path(e),"/");var s=bt.get_file_path(e);bt.get_file_list(s,t)})),$("#bt_select").on("click",(function(){var a=[],i=$("#tbody tr.active"),l="dir";if(!i.length&&"file"==t)return layer.msg("请选择文件继续操作！",{icon:0}),!1;i.each((function(){var e=$(this).find(".fileItem").data();l=e.type,a.push(bt.rtrim(e.path,"/"))})),0===a.length&&(a=[$("#PathPlace").find("span").text()]),$("#"+e).val(a[0]).change(),$("."+e).val(a[0]).change(),"function"==typeof s&&s(a[0],a,l),n.close()}));var i=$("#"+e),l=i.val(),o=$("#defaultPath");o.length>0&&i.parents(".tab-body").length>0&&(l=o.text()),a&&(l=a),bt.get_file_list(l,t)}});bt.set_cookie("ChangePath",n.form)},isInteger:function(e){return(0|e)===e},win_format_param:function(e){if("object"==typeof t){var t="";for(var s in e)t+=s+"="+e[s]+"&";return t.length>0&&(t=t.substr(0,t.length-1)),t}return e},msg:function(e){-1===e.code&&(e.closeBtn=1,e.time=0);var t={title:!!e.title&&e.title,shadeClose:!e.shadeClose||e.shadeClose,closeBtn:e.closeBtn?e.closeBtn:0,scrollbar:!0,shade:.3};e.hasOwnProperty("time")||(e.time=2e3),"string"==typeof e.msg&&bt.contains(e.msg,"ERROR")&&(e.time=0),e.hasOwnProperty("icon")?"boolean"==typeof e.icon&&(e.icon=e.icon?1:2):e.hasOwnProperty("status")&&(e.icon=e.status?1:2,e.status||(t.time=0)),e.icon&&(t.icon=e.icon),t.time=e.time;var s="";e.msg&&(s+=e.msg),e.msg_error&&(s+=e.msg_error),e.msg_solve&&(s+=e.msg_solve),layer.msg(s,t)},confirm:function(e,t,s){var a={title:!!e.title&&e.title,time:e.time?e.time:0,shadeClose:void 0===e.shadeClose||e.shadeClose,closeBtn:e.closeBtn?e.closeBtn:2,scrollbar:!0,shade:.3,icon:3,skin:e.skin?e.skin:"",cancel:e.cancel?e.cancel:function(){}};layer.confirm(e.msg,a,(function(e){t&&t(e)}),(function(e){s&&s(e)}))},load:function(e){e||(e=lan.public.the);var t={form:layer.msg(e,{icon:16,time:0,shade:[.3,"#000"]}),close:function(){layer.close(t.form)}};return t},open:function(e){e.closeBtn=2;var t={form:layer.open(e),close:function(){layer.close(t.form)}};return t},closeAll:function(){layer.closeAll()},send:function(e,t,s,a,n){t=t.replace("panel_data","data");var i=bt.get_random(16);console.time(i),e||alert(lan.get("lack_param",["response"])),modelTmp=t.split("/"),modelTmp.length<2&&alert(lan.get("lack_param",["s_module","action"])),bt.os,s=bt.win_format_param(s);var l="/"+modelTmp[0]+"?action="+modelTmp[1];$.post(l,s,(function(e){if("string"==typeof e){if(-1!=e.indexOf("/static/favicon.ico")&&-1!=e.indexOf("/static/img/qrCode.png")||0===e.indexOf("<!DOCTYPE html>"))return void(window.location.href="/login");if(e.startsWith("Traceback")){error_find=0,gl_error_body="\x3c!--\x3c!--"+e;var t=parseInt(bt.get_cookie("pro_end")||-1),s=parseInt(bt.get_cookie("ltd_end")||-1);return isBuy=0==t||s>0,void showErrorMessage()}}if(n&&n.hasOwnProperty("verify")&&!0===n.verify&&"object"==typeof e&&!1===e.status&&(e.hasOwnProperty("msg")||e.hasOwnProperty("error_msg")))return bt_tools.msg({status:e.status,msg:e.hasOwnProperty("msg")?e.msg:e.error_msg}),!1;a&&a(e)})).error((function(e,t){a&&a("error")}))},aceEditor:function(e){var t={ACE:ace.edit(e.el,{theme:e.theme||"ace/theme/chrome",mode:"ace/mode/"+(e.mode||"nginx"),wrap:!0,showInvisibles:!1,showPrintMargin:!1,showFoldWidgets:!1,useSoftTabs:!0,tabSize:2,readOnly:e.readOnly||!1}),path:e.path,content:"",saveCallback:e.saveCallback};if($("#"+e.el).css("fontSize","12px"),t.ACE.commands.addCommand({name:"保存文件",bindKey:{win:"Ctrl-S",mac:"Command-S"},exec:function(e){bt.saveEditor(t,t.saveCallback)},readOnly:!1}),void 0!==e.path){var s=layer.msg(lan.soft.get_config,{icon:16,time:0,shade:[.3,"#000"]});bt.send("GetFileBody","files/GetFileBody",{path:e.path},(function(e){if(layer.close(s),!e.status)return bt.msg(e),!1;t.ACE.setValue(e.data),t.ACE.moveCursorTo(0,0),t.ACE.resize()}))}else null!=e.content&&(t.ACE.setValue(e.content),t.ACE.moveCursorTo(0,0),t.ACE.resize());return t},saveEditor:function(e,t){if(e.saveCallback)e.saveCallback(e.ACE.getValue());else{t||(t="utf-8");var s=bt.load(lan.soft.the_save);bt.send("SaveFileBody","files/SaveFileBody",{data:e.ACE.getValue(),path:e.path,encoding:t},(function(e){s.close(),bt.msg(e)}))}},openFeedback:function(e){var t=bt_tools.open({area:["570px","380px"],btn:!1,content:'<div id="feedback">\t\t\t<div class="nps_survey_banner">\t\t\t<span class="Ftitle"> <i></i> <span style="vertical-align:4px;">'+e.title+'</span> </span>\t\t</div>\t\t<div style="padding: 25px 0 0 40px">\t\t\t<div class="flex flex-col items-center">\t\t\t\t<div id="feedForm"></div>\t\t\t</div>\t\t</div>\t\t</div>',success:function(s){s.find(".layui-layer-title").remove(),bt_tools.form({el:"#feedForm",form:[{group:{type:"textarea",name:"feed",style:{width:"500px","min-width":"500px","min-height":"130px","line-height":"22px","padding-top":"10px",resize:"none"},tips:{text:e.placeholder,style:{top:"126px",left:"50px"}}}},{group:{name:"tips",type:"other",boxcontent:'<div style="color:#20a53a;margin-left:30px;">'+e.recover+"</div>"}},{group:{type:"button",size:"",name:"submitForm",class:"feedBtn",style:"margin:6px auto 0;padding:6px 40px;",title:"提交",event:function(s,a,n){if(""==s.feed)return bt.msg({status:!1,msg:"请填写反馈内容"});var i={};i[e.key]=s.feed,bt_tools.send({url:"config?action=write_nps_new",data:{questions:JSON.stringify(i),software_name:1,rate:0,product_type:e.proType}},(function(e){e.status&&(t.close(),layer.open({title:!1,btn:!1,shadeClose:!0,shade:.1,closeBtn:0,skin:"qa_thank_dialog",area:"230px",content:'<div class="qa_thank_box" style="background-color:#F1F9F3;text-align: center;padding: 20px 0;"><img src="/static/img/feedback/QA_like.png" style="width: 55px;"><p style="margin-top: 15px;">感谢您的参与!</p></div>',success:function(e,t){$(e).find(".layui-layer-content").css({padding:"0","border-radius":"5px"}),$(e).css({"border-radius":"5px","min-width":"230px"}),setTimeout((function(){layer.close(t)}),3e3)}}))}),"提交反馈")}}}]})},yes:function(){},cancel:function(){}})},check_select:function(){setTimeout((function(){var e=$('input[type="checkbox"].check:checked').length;1==e?($('button[batch="true"]').hide(),$('button[batch="false"]').show()):e>1?($('button[batch="true"]').show(),$('button[batch="false"]').show()):($('button[batch="true"]').hide(),$('button[batch="false"]').hide())}),5)},render_help:function(e){for(var t='<ul class="help-info-text c7">',s=0;s<e.length;s++)t+="<li>"+e[s]+"</li>";return t+="</ul>"},render_ps:function(e){for(var t="<p class='p1'>"+e.title+"</p>",s=0;s<e.list.length;s++)t+="<p><span>"+e.list[s].title+"：</span><strong>"+e.list[s].val+"</strong></p>";return t+='<p style="margin-bottom: 19px; margin-top: 11px; color: #666"></p>'},render_table:function(e,t,s){var a="";for(var n in t)if(t.hasOwnProperty(n)){if(a+="<tr><th>"+n+"</th>","object"!=typeof t[n])a+="<td>"+t[n]+"</td>";else for(var i=0;i<t[n].length;i++)a+="<td>"+t[n][i]+"</td>";a+="</tr>"}s?$("#"+e).append(a):$("#"+e).html(a)},fixed_table:function(e){$("#"+e).parent().bind("scroll",(function(){var e=this.scrollTop;$(this).find("thead").css({transform:"translateY("+e+"px)",position:"relative","z-index":"1"})}))},render_tab:function(e,t){for(var s=$("#"+e).addClass("tab-nav"),a=0;a<t.length;a++){var n=t[a],i=$("<span "+(n.on?'class="on"':"")+">"+n.title+"</span>");n.callback&&(i.data("callback",n.callback),i.click((function(){$("#"+e).find("span").removeClass("on"),$(this).addClass("on");var t=$("#"+e).next(".tab-con");t.html(""),$(this).data("callback")(t)}))),s.append(i)}},render_form_line:function(e,t,s){var a=[],n="",i="",l=" ml0";t||(t=""),e.title&&(n+='<span class="tname">'+e.title+"</span>",l=""),n+="<div class='info-r "+e.class+" "+l+"'>";var o=e.name,r=e.placeholder;if(e.items&&"select"!=e.type){for(var c=0;c<e.items.length;c++){var p=e.items[c];if(!o&&!p.name)return void alert("缺少必要参数name");if(!p.hide){switch(p.name&&(o=p.name),p.placeholder&&(r=p.placeholder),p.title&&(n+='<div class="inlineBlock mr5"><span class="mr5">'+p.title+"</span>  "),p.type){case"select":var d=p.width?p.width:"100px";n+="<select "+(p.disabled?"disabled":"")+' class="bt-input-text mr5 '+o+t+'" name="'+o+'" style="width:'+d+'">';for(var _=0;_<p.items.length;_++)n+="<option "+(p.value==p.items[_].value?"selected":"")+' value="'+p.items[_].value+'">'+p.items[_].title+"</option>";n+="</select>";break;case"textarea":n+='<textarea class="bt-input-text mr20 '+o+t+'" name="'+o+'" style="width:'+(d=p.width?p.width:"330px")+";height:"+(u=p.height?p.height:"100px")+';line-height:22px">'+(p.value?p.value:"")+"</textarea>",r&&(n+='<div class="placeholder c9" style="top: 15px; left: 15px; display: block;">'+r+"</div>");break;case"button":d=p.width?p.width:"330px";n+='<button type="button" name=\''+o+"' class=\"btn btn-"+(p.color?p.color:"success")+" btn-sm mr5 ml5 "+o+t+" "+(p.class?p.class:"")+'">'+p.text+"</button>";break;case"radio":n+='<input type="radio" class="'+o+'" id="'+o+'" name="'+o+'"  '+(!0===p.value?"checked":"")+'><label class="mr20" for="'+o+'" style="font-weight:normal">'+p.text+"</label>";break;case"checkbox":n+='<input type="checkbox" class="'+o+'" id="'+o+'" name="'+o+'"  '+(!0===p.value?"checked":"")+'><label class="mr20" for="'+o+'" style="font-weight:normal">'+p.text+"</label>";break;case"number":d=p.width?p.width:"330px";n+="<input name='"+o+"' "+(p.disabled?"disabled":"")+" class='bt-input-text mr5 "+o+t+"' "+(r?' placeholder="'+r+'"':"")+" type='number' style='width:"+d+"' value='"+(p.value?p.value:"0")+"' />",n+=p.unit?p.unit:"";break;case"password":d=p.width?p.width:"330px";n+="<input name='"+o+"' "+(p.disabled?"disabled":"")+" class='bt-input-text mr5 "+o+t+"' "+(r?' placeholder="'+r+'"':"")+" type='password' style='width:"+d+"' value='"+(p.value?p.value:"")+"' />";break;case"div":n+='<div class="bt-input-text ace_config_editor_scroll mr20 '+o+t+'" name="'+o+'" style="width:'+(d=p.width?p.width:"330px")+";height:"+(u=p.height?p.height:"100px")+';line-height:22px">'+(p.value?p.value:"")+"</div>",r&&(n+='<div class="placeholder c9" style="top: 15px; left: 15px; display: block;">'+r+"</div>");break;case"switch":n+='<div style="display: inline-block;vertical-align: middle;">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input type="checkbox" id="'+o+'" '+(1==p.value?"checked":"")+' class="btswitch btswitch-ios">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<label class="btswitch-btn" for="'+o+'" style="margin-top:5px;"></label>\t\t\t\t\t\t\t\t\t\t\t\t\t</div>';break;case"other":n+=p.boxcontent;break;default:d=p.width?p.width:"330px";n+="<input name='"+o+"' "+(p.disabled?"disabled":"")+" class='bt-input-text mr5 "+o+t+"' "+(r?' placeholder="'+r+'"':"")+" type='text' style='width:"+d+"' value='"+(p.value?p.value:"")+"' />"}p.title&&(n+="</div>"),null!=p.callback&&a.push({bind:o+t,callback:p.callback}),p.event&&(n+='<span data-id="'+o+t+'" class="glyphicon cursor mr5 '+p.event.css+" icon_"+o+t+'" ></span>',p.event.callback&&a.push({bind:"icon_"+o+t,callback:p.event.callback})),p.ps&&(n+=" <span class='c9 mt10'>"+p.ps+"</span>"),p.ps_help&&(n+="<span class='bt-ico-ask "+p.name+"_help' tip='"+p.ps_help+"'>?</span>")}}e.ps&&(n+=" <span class='c9 mt10'>"+e.ps+"</span>")}else{switch(e.type){case"select":d=e.width?e.width:"100px";n+="<select "+(e.disabled?"disabled":"")+' class="bt-input-text mr5 '+o+t+'" name="'+o+'" style="width:'+d+'">';for(_=0;_<e.items.length;_++)n+="<option "+(e.value==e.items[_].value?"selected":"")+' value="'+e.items[_].value+'">'+e.items[_].title+"</option>";n+="</select>";break;case"button":d=e.width?e.width:"330px";n+='<button type="button" name=\''+o+"' class=\"btn btn-success btn-sm mr5 ml5 "+o+t+'">'+e.text+"</button>";break;case"number":d=e.width?e.width:"330px";n+="<input name='"+e.name+"' "+(e.disabled?"disabled":"")+" class='bt-input-text mr5 "+o+t+"' "+(r?' placeholder="'+r+'"':"")+" type='number' style='width:"+d+"' value='"+(e.value?e.value:"0")+"' />";break;case"checkbox":n+='<input type="checkbox" class="'+o+'" id="'+o+'" name="'+o+'"  '+(!0===e.value?"checked":"")+'><label class="mr20" for="'+o+'" style="font-weight:normal">'+e.text+"</label>";break;case"password":d=e.width?e.width:"330px";n+="<input name='"+o+"' "+(e.disabled?"disabled":"")+" class='bt-input-text mr5 "+o+t+"' "+(r?' placeholder="'+r+'"':"")+" type='password' style='width:"+d+"' value='"+(e.value?e.value:"")+"' />";break;case"textarea":d=e.width?e.width:"330px";var u=e.height?e.height:"100px";n+='<textarea class="bt-input-text mr20 '+o+t+'"  '+(e.disabled?"disabled":"")+'  name="'+o+'" style="width:'+d+";height:"+u+';line-height:22px">'+(e.value?e.value:"")+"</textarea>",r&&(n+='<div class="placeholder c9" style="top: 15px; left: 15px; display: block;">'+r+"</div>");break;case"other":n+=e.boxcontent;break;default:d=e.width?e.width:"330px";n+="<input name='"+e.name+"' "+(e.disabled?"disabled":"")+" class='bt-input-text mr5 "+o+t+"' "+(r?' placeholder="'+r+'"':"")+" type='text' style='width:"+d+"' value='"+(e.value?e.value:"")+"' />"}e.callback&&a.push({bind:o+t,callback:e.callback}),e.ps&&(n+=" <span class='c9 mt10 mr5'>"+e.ps+"</span>")}return n+="</div>",e.class||(e.class=""),e.hide&&(i='style="display:none;"'),n='<div class="line '+e.class+'" '+i+">"+n+"</div>",s&&(s.append(n),bt.render_clicks(a)),{html:n,clicks:a,data:e}},render_form:function(e,t){if(e){for(var s="_"+bt.get_random(6),a=$("<div data-id='form"+s+"' class='bt-form bt-form pd20 pb70 "+(e.class?e.class:"")+"'></div>"),n=e.list,i=[],l=0;l<n.length;l++){var o=n[l];if(o.hasOwnProperty("html"))a.append(o.html);else{for(var r=bt.render_form_line(o,s),c=0;c<r.clicks.length;c++)i.push(r.clicks[c]);a.append(r.html)}}var p="";for(l=0;l<e.btns.length;l++){var d=e.btns[l];p+="<button type='button' class='btn btn-sm "+(d.css?d.css:"btn-danger")+" "+d.name+s+"' >"+d.title+"</button>",i.push({bind:d.name+s,callback:d.callback})}a.append("<div class='bt-form-submit-btn'>"+p+"</div>");var _=bt.open({type:1,skin:e.skin,area:e.area,title:e.title,closeBtn:2,content:a.prop("outerHTML"),end:!!e.end&&e.end,success:function(){$(":focus").blur(),e.yes&&e.yes()}});setTimeout((function(){bt.render_clicks(i,_,t)}),100)}return s},render_clicks:function(e,t,s){for(var a=0;a<e.length;a++){var n=e[a],i=$("."+n.bind);switch(i.data("item",n),i.data("load",t),i.data("callback",s),i.prop("tagName")){case"SPAN":i.click((function(){$(this).data("item").callback($(this).attr("data-id"))}));break;case"SELECT":i.change((function(){$(this).data("item").callback($(this))}));break;case"TEXTAREA":case"INPUT":case"BUTTON":"BUTTON"==i.prop("tagName")||"checkbox"==i.attr("type")?i.click((function(){var e=$(this).data("item"),t=$(this).data("load"),s=$(this).data("callback"),a=0===$(this).parents(".bt-form").length?$(this).parents(".bt-w-con"):$(this).parents(".bt-form");if(e.callback){var n={};a.find("*").each((function(e,t){var s=$(t).attr("name");s&&("checkbox"==$(t).attr("type")||"radio"==$(t).attr("type")?n[s]=$(t).prop("checked"):n[s]=$(t).val())})),e.callback(n,t,(function(e){s&&s(e)}))}else t.close()})):"radio"==i.attr("type")?i.click((function(){$(this).data("item").callback($(this))})):i.on("input",(function(){$(this).data("item").callback($(this))}))}}},render:function(e){if(e.columns){var t={};$(e.table).html("");for(var s="<thead><tr>",a=0;a<e.columns.length;a++){(r=e.columns[a])&&(s+="<th",r.width&&(s+=' width="'+r.width+'" '),(r.align||r.sort)&&(s+=' style="',r.align&&(s+="text-align:"+r.align+";"),r.sort&&(s+=r.sort?"cursor: pointer;":""),s+='"'),"checkbox"==r.type?s+='><input  class="check"  onclick="bt.check_select();" type="checkbox">':s+=">"+r.title,r.sort&&(t[r.field]=r.sort,s+=' <span data-id="'+r.field+'" class="glyphicon glyphicon-triangle-top" style="margin-left:5px;color:#bbb"></span>'),r.help&&(s+='<a href="'+r.help+'" class="bt-ico-ask" target="_blank" title="点击查看说明">?</a>'),s+="</th>")}s+="</tr></thead>";var n=$(e.table).append(s);if(e.data.length>0)for(var i=0;i<e.data.length;i++){var l=e.data[i],o=$("<tr></tr>");for(a=0;a<e.columns.length;a++){var r;if(r=e.columns[a]){var c=l[r.field];"string"==typeof c&&(c=c.replace(/\\/g,"")),r.hasOwnProperty("templet")&&(c=r.templet(l)),"checkbox"==r.type&&(c="<input value="+l[r.field]+'  class="check" onclick="bt.check_select();" type="checkbox">');var p="<td ";r.align&&(p+='style="',r.align&&(p+="text-align:"+r.align),p+='"'),r.index&&(p+='data-index="'+i+'" '),p+=">";var d=!1;void 0!==r.fixed&&r.fixed&&(void 0!==r.class?-1===r.class.indexOf("fixed")&&(r.class+=" fixed"):r.class="fixed",d=!0),o.append(p+(d?'<span style="width:'+(r.width-16)+'px" title="'+c+'" class="'+r.class+'">'+c+"</span>":c)+"</td>"),o.data("item",l),n.append(o)}}}else n.append("<tr><td colspan='"+e.columns.length+"'>"+lan.bt.no_data+"</td></tr>"),"softList"==$(e.table).attr("id")&&(n.find("td").css("text-align","center").html("<a class=\"btlink\" onclick=\"bt.openFeedback({title:'宝塔面板需求反馈收集',placeholder:'<span>如果您在使用过程中遇到任何问题或功能不完善，请将您的问题或需求详细描述给我们，</span><br>我们将尽力为您解决或完善。',recover:'我们特别重视您的需求反馈，我们会定期每周进行需求评审。希望能更好的帮到您',key:993,proType:16})\">未查询到搜索内容,提交需求反馈</a>"),$(".soft-search").after("<a class=\"btlink npsFeedBack ml20\" style=\"line-height: 30px\" onclick=\"bt.openFeedback({title:'宝塔面板需求反馈收集',placeholder:'<span>如果您在使用过程中遇到任何问题或功能不完善，请将您的问题或需求详细描述给我们，</span><br>我们将尽力为您解决或完善。',recover:'我们特别重视您的需求反馈，我们会定期每周进行需求评审。希望能更好的帮到您',key:993,proType:16})\">未查询到搜索内容,提交需求反馈</a>"));$(e.table).find(".check").click((function(){var e=$(this).prop("checked");"TH"==$(this).parent().prop("tagName")&&$(".check").prop("checked",e?"checked":"")}));var _="glyphicon-triangle-top",u="glyphicon-triangle-bottom",h=bt.get_cookie("order");if(null!=h){var f=h.split(" ");2==f.length&&("asc"==f[1]?$(e.table).find('th span[data-id="'+f[0]+'"]').removeClass(u).addClass(_):$(e.table).find('th span[data-id="'+f[0]+'"]').removeClass(_).addClass(u))}$(e.table).find("th").data("checks",t).click((function(){var t=$(this),s=t.data("checks"),a=t.find("span");if(a.length>0){var n=a.attr("data-id");a.hasClass(_)?(bt.set_cookie("order",n+" desc"),$(e.table).find('th span[data-id="'+n+'"]').removeClass(_).addClass(u),s[n]()):a.hasClass(u)&&(bt.set_cookie("order",n+" asc"),$(e.table).find('th span[data-id="'+f[0]+'"]').removeClass(u).addClass(_),s[n]())}}))}return n},onlineService:function(e){layer.open({type:1,area:["200px","250px"],title:!1,closeBtn:2,shift:0,content:'<div class="service_consult">\t\t\t\t\t\t<div class="service_consult_title" style="background: rgba(32, 165, 58, 0.1);"><a href="https://www.bt.cn/new/wechat_customer" target="_blank" class="btlink"><span style="border-bottom: 1px solid;">点击咨询客服</span><div class="icon-r" style="width: 15px;height: 18px;margin-top: 1px;margin-left: 5px;vertical-align: middle;"></div></a></div>\t\t\t\t\t\t<div class="contact_consult" style="margin: 10px auto 8px auto;">\t\t\t\t\t\t\t<div id="contact_consult_qcode">\t\t\t\t\t\t\t\t<img src="/static/images/customer-qrcode.png" alt="" style="border: none;" />\t\t\t\t\t\t\t</div>\t\t\t\t\t\t</div>\t\t\t\t\t\t<div class="wechat-title">\t\t\t\t\t\t<img class="icon" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAYAAADE6YVjAAAAAXNSR0IArs4c6QAAATlJREFUSEvtVrFOw0AMfed8AxJsZWGAgQHBXP4DCQa+Ioou7g18BRIg9T/KDGJggIGFbiDxDXGQowSBuGvrFISEmtF+7/nis312RVEMiWgIoMT375aIjpj5KeJrTMy8JSJjAPsRzEhErl1Zlhd1XZ8kRKZEdMjM0xlBBiIyATCIYZxzl857X6uTiHaY+TElZrUz87aIPCjvI0gIwVmF5uG7H1gFmZepxv85XTdqCCEcLMQ0gLz3jbbTOm/rPdkLBt0v0E77xysq2it9T2nhuTzPN4ho10KyYEXkXvvkBcC6hWjEvmqQMwCnANZa8p1RJAbfa41vAM7/0cUzczOiZ43zvunrtPVOntuO3+wrluJ12qspvFBm/+bR+u03nhPrkKZk2ZVINUZO964sy44Ta9FSK5GuQ1VVXb0DLf+sHQ9tLL0AAAAASUVORK5CYII=">\t\t\t\t\t\t<span class="scan-title" style="font-size: 16px;">扫一扫</span></div>\t\t\t\t</div>',success:function(t){$(t).css("border-radius","4px");var s="";if(Array.isArray(e)){for(var a=0;a<e.length;a++)s+=e[a];$("#helpList").parent(s)}}})},formatJsonForNotes:function(e,t){var s=null,a="",n=0;return(t=t||{}).newlineAfterColonIfBeforeBraceOrBracket=!0===t.newlineAfterColonIfBeforeBraceOrBracket,t.spaceAfterColon=!1!==t.spaceAfterColon,"string"!=typeof e||(e=JSON.parse(e)),s=/([\{\}])/g,e=(e=JSON.stringify(e)).replace(s,"\r\n$1\r\n"),s=/([\[\]])/g,e=e.replace(s,"\r\n$1\r\n"),s=/(\,)/g,e=e.replace(s,"$1\r\n"),s=/(\r\n\r\n)/g,e=e.replace(s,"\r\n"),s=/\r\n\,/g,e=e.replace(s,","),t.newlineAfterColonIfBeforeBraceOrBracket||(s=/\:\r\n\{/g,e=e.replace(s,":{"),s=/\:\r\n\[/g,e=e.replace(s,":[")),t.spaceAfterColon&&(s=/\:/g,e=e.replace(s,": ")),$.each(e.split("\r\n"),(function(e,t){var s=0,i=0,l="";for(t.match(/\{$/)||t.match(/\[$/)?i=1:t.match(/\}/)||t.match(/\]/)?0!==n&&(n-=1):i=0,s=0;s<n;s++)l+="  ";a+=l+t+"\r\n",n+=i})),a}},bt_tools={commandConnectionPool:{},table:function(e){var t=this,s=$(e.el),a=s.data("table");if(a&&s.find("table").length>0)return void 0!==e.url?a.$refresh_table_list(!0):void 0!==e.data&&a.$reader_content(e.data),a;function n(e){this.config=e,this.$load()}n.prototype={style_list:[],event_list:{},checkbox_list:[],batch_active:{},event_rows_model:{},data:[],cache_set_column:[],cache_set_all:{},page:"",column:[],batch_thread:[],random:bt.get_random(5),init:!1,checked:!1,$load:function(){var e=this;this.config.init&&this.config.init(this),$(this.config.el).addClass("bt_table"),this.config.minWidth&&this.style_list.push({className:this.config.el+" table",css:"min-width:"+this.config.minWidth}),this.config.tootls?this.$reader_tootls(this.config.tootls):0===$(e.config.el+".divtable").length&&$(e.config.el).append('<div class="divtable mtb10" style="max-height:'+(this.config.height||"auto")+'"></div>'),this.$reader_content(),void 0!==e.config.url?this.$refresh_table_list(e.config.load||!1):void 0!==this.config.data?this.$reader_content(this.config.data):alert("缺少data或url参数"),this.config.methods&&$.extend(this,this.config.methods),this.config.height&&bt_tools.$fixed_table_thead(this.config.el+" .divtable")},$refresh_table_list:function(e,t){var s=this;this.$http(e,(function(e){t&&t(e),s.$reader_content(e.data,void 0!==e.total?parseInt(e.total):e.page)}))},$reader_content:function(e,t){var s=this,a="",n="",i=0,l=this.config.column,o={},r=$(s.config.el+" .checkbox_"+s.random);if(e=e||[],this.data=e,s.config.setting_btn)var c=setInterval((function(){null!=bt.config&&(!function(e){var c=s.config.setting_btn;if(c){s.config.el,s.random;var p="";s.cache_set_column=[];for(var d=0;d<l.length;d++)"checkbox"!=l[d].type&&(l[d].width||!0,s.cache_set_column.push({title:l[d].real_title?l[d].real_title:l[d].title,value:!l[d].hasOwnProperty("display")||l[d].display,idx:d,disabled:!!l[d].hasOwnProperty("isDisabled")&&l[d].isDisabled,pay:!!l[d].hasOwnProperty("pay")&&l[d].pay}));if(s.config.hasOwnProperty("setting_list"))for(d=0;d<s.config.setting_list.length;d++)s.cache_set_column.unshift(s.config.setting_list[d]);s.cache_set_all=$.isEmptyObject(e.table_header)?s.cache_set_all:e.table_header;var _=$.isEmptyObject(e.table_header)?[]:JSON.parse(s.cache_set_all[s.config.headerId]||"[]");try{var u=s.cache_set_all[s.config.headerId]&&_.filter((function(e,t){return!!s.cache_set_column[t]&&e.title===s.cache_set_column[t].title})).length===s.cache_set_column.length;s.cache_set_column=u?JSON.parse(s.cache_set_all[s.config.headerId]):s.cache_set_column}catch(e){console.log(e)}for(d=0;d<s.cache_set_column.length;d++){var h=s.cache_set_column[d],f=$(h.title).text().replace(/\?/g,"");h.value&&0;var m="";("流量"==f||"流量"==h.title&&h.disabled)&&(m="不支持openlitespeed"),p+='<li title="'+m+'" class="setting_ul_li'+(h.value?" active":"")+(h.disabled?" disabled":"")+'">              <i></i>                <span class="ml10">'+(f||h.title)+"</span>"+(f||h.pay?'<span class="glyphicon icon-vipLtd" style="margin-left: 6px;position: relative;top: -2px;"></span>':"")+"</li>",h.idx&&(l[h.idx].display=h.value)}$(s.config.el+" .set_list_fid_dropdown").length||$(s.config.el+" .tootls_top .pull-right").append('<div class="set_list_fid_dropdown"><div class="setting_btn"><i class="glyphicon glyphicon-cog icon-setting"></i></div>                <ul class="setting_ul">'+p+"</ul></div>");var b=null;$(s.config.el+" .setting_btn").hover((function(){$(this).next().show()}),(function(e){var t=$(this),s=0,a=0;$(document).mousemove((function(e){s=e.pageY,a=e.pageX})),b=setInterval((function(){if("block"==t.next().css("display")){var e=t.width(),n=t.height(),i=t.offset().top,l=t.offset().left,o=t.next().width(),r=t.next().height(),c=t.next().offset().top,p=t.next().offset().left;a>l&&a<l+e&&s>i&&s<i+n||a>p&&a<p+o&&s>c&&s<c+r||t.next().hide()}else clearInterval(b)}),200)})),$(s.config.el+" .setting_ul .setting_ul_li").unbind("click").click((function(e){if($(this).hasClass("disabled"))return!1;$(this).hasClass("active")?$(this).removeClass("active"):$(this).addClass("active");var a=$(this).index();s.cache_set_column[a].value=!s.cache_set_column[a].value,s.cache_set_all[s.config.headerId]=s.cache_set_column,bt.send("set_table_header","config/set_table_header",{table_name:s.config.headerId,table_data:JSON.stringify(s.cache_set_column)},(function(e){bt.send("get_table_header","config/get_table_header",{},(function(e){bt.config.table_header=e,s.init=!1,s.style_list=[s.style_list[0]],$("#bt_table_"+s.random).remove(),s.$reader_content(s.data,t)}))}))}))}r.length&&(r.removeClass("active selected"),s.checkbox_list=[],s.$set_batch_view());do{var g=s.data[i],v=0;s.data.length>0&&(n+="<tr>");for(d=0;d<l.length;d++)if(c&&!1===l[d].display)l[d].hasOwnProperty("class")||v++;else{var y=l[d];if($.isEmptyObject(y))v++;else{if(0===i&&!s.init){s.init||s.style_list.push(s.$dynamic_merge_style(y,d-v));var x="sort_"+s.random,w="checkbox_"+s.random,k=y.sortValue||"desc";a+='<th class="'+y.fid+'"><span '+(y.sort?'class="not-select '+x+(y.sortValue?" sort-active":"")+' cursor-pointer"':"")+' data-index="'+d+'" '+(y.sort?'data-sort="'+k+'"':"")+">"+("checkbox"==y.type?'<label><i class="cust—checkbox cursor-pointer '+w+'" data-checkbox="all"></i><input type="checkbox" class="cust—checkbox-input"></label>':"<span>"+y.title+"</span>")+(y.sort?'<span class="glyphicon glyphicon-triangle-'+("desc"==k?"bottom":"top")+' ml5"></span>':"")+"</span></th>",0===i&&(!o[x]&&y.sort&&(o[x]={event:s.config.sortEvent,eventType:"click",type:"sort"}),o[w]||(o[w]={event:y.checked,eventType:"click",type:"checkbox"}))}if(void 0!==g){var C="",T="event_"+y.fid+"_"+s.random;y.template&&(C=s.$custom_template_render(y,g,d)),void 0!==C&&void 0!==y.template||(C=s.$reader_column_type(y,g),o=$.extend(o,C[1]),C=C[0]);var P=!1;void 0!==y.fixed&&y.fixed&&(void 0!==y.class?-1===y.class.indexOf("fixed")&&(y.class+=" fixed"):y.class="fixed",P=!0),n+="<td><span "+(P?'style="width:'+(y.width-16)+'px" title="'+C+'"':" ")+(y.class?'class="'+y.class+'"':"")+" "+(y.tips?'title="'+y.tips+'"':"")+">"+C+"</span></td>",0===i&&!o[T]&&y.event&&(o[T]={event:y.event,eventType:"click",type:"rows"})}}}s.data.length>0&&(n+="</tr>"),0==s.data.length&&(n+='<tr class="no-tr"><td colspan="'+l.length+'" style="text-align:center;">'+(s.config.default||"数据为空")+"</td></tr>"),i++}while(i<s.data.length);s.init||s.$style_bind(s.style_list);s.$event_bind(o),s.init?($(s.config.el+" .divtable tbody").html(n),s.config.page&&$(s.config.el+" .page").replaceWith(s.$reader_page(s.config.page,t))):($(s.config.el+" .divtable .table").remove(),s.config.thead(a),$(s.config.el+" .divtable").append('<table class="table table-hover"><thead style="position: relative;z-index: 1;">'+a+"</thead><tbody>"+n+"</tbody></table></div></div>"));if(c&&s.config.hasOwnProperty("setting_list"))for(d=0;d<s.cache_set_column.length;d++){(h=s.cache_set_column[d]).hasOwnProperty("class")&&(h.value?$(s.config.el+" ."+h.class).show():$(s.config.el+" ."+h.class).hide())}s.init=!0,s.config.success&&s.config.success(s)}(bt.config),clearInterval(c))}),1);else!function(){r.length&&(r.removeClass("active selected"),s.checkbox_list=[],s.$set_batch_view());do{var e=s.data[i],c=0;s.data.length>0&&(n+="<tr>");for(var p=0;p<l.length;p++){var d=l[p];if($.isEmptyObject(d))c++;else{if(0===i&&!s.init){s.init||s.style_list.push(s.$dynamic_merge_style(d,p-c));var _="sort_"+s.random,u="checkbox_"+s.random,h=d.sortValue||"desc";a+="<th><span "+(d.sort?'class="not-select '+_+(d.sortValue?" sort-active":"")+' cursor-pointer"':"")+' data-index="'+p+'" '+(d.sort?'data-sort="'+h+'"':"")+">"+("checkbox"==d.type?'<label><i class="cust—checkbox cursor-pointer '+u+'" data-checkbox="all"></i><input type="checkbox" class="cust—checkbox-input"></label>':"<span>"+d.title+"</span>")+(d.sort?'<span class="glyphicon glyphicon-triangle-'+("desc"==h?"bottom":"top")+' ml5"></span>':"")+"</span></th>",0===i&&(!o[_]&&d.sort&&(o[_]={event:s.config.sortEvent,eventType:"click",type:"sort"}),o[u]||(o[u]={event:d.checked,eventType:"click",type:"checkbox"}))}if(void 0!==e){var f="",m="event_"+d.fid+"_"+s.random;d.template&&(f=s.$custom_template_render(d,e,p)),void 0!==f&&void 0!==d.template||(f=s.$reader_column_type(d,e),o=$.extend(o,f[1]),f=f[0]);var b=!1;void 0!==d.fixed&&d.fixed&&(void 0!==d.class?-1===d.class.indexOf("fixed")&&(d.class+=" fixed"):d.class="fixed",b=!0),n+="<td><span "+(b?'style="width:'+(d.width-16)+'px" title="'+f+'"':" ")+(d.class?'class="'+d.class+'"':"")+" "+(d.tips?'title="'+d.tips+'"':"")+">"+f+"</span></td>",0===i&&!o[m]&&d.event&&(o[m]={event:d.event,eventType:"click",type:"rows"})}}}s.data.length>0&&(n+="</tr>"),0==s.data.length&&(n+='<tr class="no-tr"><td colspan="'+l.length+'" style="text-align:center;">'+(s.config.default||"数据为空")+"</td></tr>"),i++}while(i<s.data.length);s.init||s.$style_bind(s.style_list);s.$event_bind(o),s.init?($(s.config.el+" .divtable tbody").html(n),s.config.page&&$(s.config.el+" .page").replaceWith(s.$reader_page(s.config.page,t))):$(s.config.el+" .divtable").append('<table class="table table-hover"><thead style="position: relative;z-index: 1;">'+a+"</thead><tbody>"+n+"</tbody></table></div></div>");s.init=!0,s.config.success&&s.config.success(this)}()},$custom_template_render:function(e,t,s){var a="event_"+e.fid+"_"+this.random,n=e.template(t,s),i=$(n);return i.length>0?template=i.addClass(a)[0].outerHTML:"text"===e.type?template='<span class="'+a+" "+e.class+'">'+n+"</span>":template='<a href="javascript:;" class="btlink '+a+'">'+n+"</a>",template},$modify_row_data:function(e){this.event_rows_model.rows=$.extend(this.event_rows_model.rows,e);var t=this.event_rows_model,s=null;void 0!==t.model.template&&(s=$(this.$custom_template_render(t.model,t.rows,t.index))).length||(s=$(this.$reader_column_type(t.model,t.rows)[0])),"group"==t.model.type?$(t.el).parent().empty().append(s):t.el.replaceWith(s),t.el=s},$batch_success_table:function(e){var t=this,s=$(e.html).length;bt.open({type:1,title:e.title,area:e.area||["350px","350px"],shadeClose:!1,closeBtn:2,content:e.content||'<div class="batch_title"><span class><span class="batch_icon"></span><span class="batch_text">'+e.title+'操作完成！</span></span></div><div class="'+(s>4?"fiexd_thead":"")+' batch_tabel divtable" style="margin: 15px 30px 15px 30px;overflow: auto;height: 200px;"><table class="table table-hover"><thead><tr><th>'+e.th+'</th><th style="text-align:right;width:120px;">操作结果</th></tr></thead><tbody>'+e.html+"</tbody></table></div>",success:function(){s>4&&t.$fixed_table_thead(".fiexd_thead")}})},$fixed_table_thead:function(e){$(e).scroll((function(){var e=this.scrollTop;this.querySelector("thead").style.transform="translateY("+(e-1)+"px)"}))},$delete_table_row:function(e){this.data.splice(e,1),this.$reader_content(this.data)},$set_batch_view:function(){if(void 0!==this.config.batch){var e=$(this.config.el+" .set_batch_option");if(void 0!==this.config.batch.config)this.checkbox_list.length>0?e.removeClass("bt-disabled btn-default").addClass("btn-success").text("批量"+this.batch_active.title+"(已选中"+this.checkbox_list.length+")"):e.addClass("bt-disabled btn-default").removeClass("btn-success").text("批量"+this.batch_active.title);else{var t=$(this.config.el+" .bt_table_select_group .bt_select_value");this.checkbox_list.length>0?(e.removeClass("bt-disabled btn-default").addClass("btn-success").prev().removeClass("bt-disabled"),t.find("em").html("(已选中"+this.checkbox_list.length+")")):(e.addClass("bt-disabled btn-default").removeClass("btn-success").prev().addClass("bt-disabled"),t.children().eq(0).html("请选择批量操作<em></em>"),t.next().find("li").removeClass("active"),this.batch_active={})}}},$reader_column_type:function(e,t){var s=t[e.fid],a={},n="click_"+e.fid+"_"+this.random,i=[],l=this;switch(e.type){case"text":default:i=[s,a];break;case"checkbox":i=['<label><i class="cust—checkbox cursor-pointer checkbox_'+this.random+'"></i><input type="checkbox" class="cust—checkbox-input"></label>',a];break;case"password":n="ico_"+l.random+"_";var o='<span class="bt-table-password mr10"><i>**********</i></span>';e.eye_open&&(o+='<span class="glyphicon cursor pw-ico glyphicon-eye-open mr10 '+n+'eye_open" title="显示密码"></span>',a[n+"eye_open"]||(a[n+"eye_open"]={type:"eye_open_password"})),e.copy&&(o+='<span class="ico-copy cursor btcopy mr10 '+n+'copy" title="复制密码"></span>',a[n+"copy"]||(a[n+"copy"]={type:"copy_password"})),i=[o,a];break;case"link":n+="_"+e.fid,!a[n]&&e.event&&(a[n]={event:e.event,type:"rows"}),i=['<a class="btlink '+n+'" href="'+(e.href?s:"javascript:;")+'" '+(e.href?'target="'+(e.target||"_blank")+'"':"")+' title="'+s+'">'+s+"</a>",a];break;case"input":blurName="blur_"+e.fid+"_"+this.random,keyupName="keyup_"+e.fid+"_"+this.random,!a[blurName]&&e.blur&&(a[blurName]={event:e.blur,eventType:"blur",type:"rows"}),!a[keyupName]&&e.keyup&&(a[keyupName]={event:e.keyup,eventType:"keyup",type:"rows"}),i=['<input type="text" title="点击编辑内容，按回车或失去焦点自动保存"  class="table-input '+blurName+" "+keyupName+'" data-value="'+s+'" value="'+s+'" />',a];break;case"status":var r="";$.each(e.config.list,(function(e,t){t[0]===s&&(r=t)})),!a[n]&&e.event&&(a[n]={event:e.event,type:"rows"}),i=['<a class="btlink '+n+" "+(r[2].indexOf("#")>-1?"":r[2])+'" style="'+(r[2].indexOf("#")>-1?"color:"+r[2]+";":"")+'" href="javascript:;"><span>'+r[1]+"</span>"+(e.config.icon?'<span class="glyphicon '+r[3]+'"></span>':"")+"</a>",a];break;case"switch":r="";var c=bt.get_random(5);r=1==new Number(s)?"checked":"",!a[n]&&e.event&&(a[n]={event:e.event,type:"rows"}),i=['<div class="bt_switch_group"><input class="btswitch btswitch-ios '+n+'" id="'+c+'" type="checkbox" '+r+'><label class="btswitch-btn" for="'+c+'" data-index="0" bt-event-click="set_site_server_status"></label></div>',a];break;case"group":var p="";$.each(e.group,(function(s,i){n=(e.fid?e.fid:"group")+"_"+s+"_"+l.random;var o=!1;if(i.template){var r=i.template(t,l),c=$(r);c.length>0?p+=c.addClass(n)[0].outerHTML:p+='<a href="javascript:;" class="btlink '+n+'" title="'+(i.title||"")+'">'+r+"</a>"}else{if(void 0!==i.hide&&"boolean"!=typeof(o="boolean"==typeof i.hide?i.hide:i.hide(t)))return!1;p+='<a href="javascript:;" class="btlink '+n+'" '+(o?'style="display:none;"':"")+' title="'+(i.tips||i.title)+'">'+i.title+"</a>"}o||(p+=e.group.length==s+1?"":"&nbsp;&nbsp;|&nbsp;&nbsp;"),!a[n]&&i.event&&(a[n]={event:i.event,type:"rows"})})),i=[p,a]}return i},$reader_tootls:function(e){var s=this,a={};function n(e,t){var a=bt.load("正在执行批量"+e.title+"，请稍候..."),n={},i=s.$get_data_batch_list(e.paramId,t);e.beforeRequest?n[e.paramName]=e.beforeRequest(t):n[e.paramName]=i.join(","),bt_tools.send({url:e.url||s.config.batch.url,data:$.extend(e.param||{},n)},(function(n){if(a.close(),!1===n.status&&void 0===n.success)return bt_tools.msg(n),!1;if(void 0===e.tips||e.tips){var i="";$.each(n.error,(function(e,t){i+='<tr><td><span class="text-overflow" title="'+e+'">'+e+'</span/></td><td><div style="float:right;" class="size_ellipsis"><span style="color:red">'+t+"</span></div></td></tr>"})),$.each(n.success,(function(e,t){i+='<tr><td><span class="text-overflow" title="'+t+'">'+t+'</span></td><td><div style="float:right;" class="size_ellipsis"><span style="color:#20a53a">操作成功</span></div></td></tr>'})),s.$batch_success_table({title:"批量"+e.title,th:e.theadName,html:i}),e.refresh&&s.$refresh_table_list(!0)}else if(!e.success){i="";$.each(t,(function(t,s){i+='<tr><td><span class="text-overflow" title="'+s.name+'">'+s.name+'</span></td><td><div style="float:right;"><span style="color:'+(n.status?"#20a53a":"red")+'">'+((void 0!==e.theadValue?e.theadValue[n.status?0:1]:null)||n.msg)+"</span></div></td></tr>"})),s.$batch_success_table({title:"批量"+e.title+"完成",th:e.theadName,html:i}),e.refresh&&s.$refresh_table_list(!0)}e.success&&e.success(n,t,s)}))}function i(e,t,a){var i={loadT:0,config:{},check_list:t,bacth_status:!0,start_batch:function(t,s){void 0===t&&(t={}),"function"==typeof t&&(s=t,t={}),e.load&&(this.loadT=layer.msg("正在执行批量"+e.title+'，<span class="batch_progress">进度:0/'+this.check_list.length+"</span>,请稍候...",{icon:16,skin:"batch_tips",shade:.3,time:0,area:"400px"})),this.config={param:t,url:e.url},this.bacth(s)},bacth:function(n,i){var l=this,o={};if("function"!=typeof n&&void 0!==n||(i=n,n=0),n<this.check_list.length){if("function"==typeof e.url?this.config.url=e.url(t[n]):this.config.url=e.url,o="function"==typeof e.param?e.param(t[n]):e.param,this.config.param=$.extend(this.config.param,o),void 0!==e.paramId&&(l.config.param[e.paramName||e.paramId]=l.check_list[n][e.paramId]),void 0!==e.beforeBacth&&(this.config.param=$.extend(this.config.param,e.beforeBacth(l.check_list[n]))),this.config.param.bacth&&n==this.check_list.length-1&&delete this.config.param.bacth,!l.bacth_status)return!1;e.load&&$("#layui-layer"+l.loadT).find(".layui-layer-content").html('<i class="layui-layer-ico layui-layer-ico16"></i>正在执行批量'+e.title+'，<span class="batch_progress">进度:'+n+"/"+l.check_list.length+"</span>，请稍候..."+(e.clear?'<a href="javascript:;" class="btlink clear_batch" style="margin-left:20px;">取消</a>':"")),bt_tools.send({url:this.config.url,data:this.config.param,bacth:!0},(function(e){$.extend(l.check_list[n],{request:{status:"boolean"==typeof e.status&&e.status,msg:e.msg||"请求网络错误"}},{requests:e}),n++,l.bacth(n,i)}))}else{if(a&&a(),i&&i(this.check_list),e.automatic){for(var r="",c=0;c<this.check_list.length;c++){var p=this.check_list[c];r+="<tr><td>"+(void 0!==p[e.paramThead]?p[e.paramThead]:p.name)+'</td><td><div style="float:right;"><span style="color:'+(p.request.status?"#20a53a":"red")+'">'+p.request.msg+"</span></div></td></tr>"}s.$batch_success_table({title:"批量"+e.title,th:e.theadName,html:r}),e.refresh&&s.$refresh_table_list(!0),s.$clear_table_checkbox()}layer.close(this.loadT)}},clear_bacth:function(){this.bacth_status=!1,layer.close(this.loadT)}};e.callback?e.callback(i):!e.confirm||e.recursion?e.confirmVerify?bt.show_confirm("批量操作"+e.title+"已选中","批量"+e.title+"，该操作可能会存在风险，是否继续？",(function(s){layer.close(s),e.recursion?i.start_batch():n(e,t)})):bt.confirm({title:"批量"+e.title,msg:void 0!==e.tips?e.tips:"批量"+e.title+"，该操作可能会存在风险，是否继续？",shadeClose:!!e.shadeClose&&e.shadeClose},(function(s){layer.close(s),e.recursion?i.start_batch():n(e,t)})):n(e,t)}for(var l=0;l<e.length;l++){var o="",r=e[l],c=[];switch(r.type){case"group":c=r.positon||["left","top"],$.each(r.list,(function(e,n){var i=r.type+"_"+s.random+"_"+e;"division"==n.type?o+='<span class="mlr5"></span>':n.group?(o+='<div class="btn-group" style="vertical-align: top;">                        <button type="button" class="btn btn-default '+i+' btn-sm dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span style="margin-right:2px;">分类管理</span><span class="caret" style="position: relative;top: -1px;"></span></button>                        <ul class="dropdown-menu"></ul>                    </div>',r.list&&$.each(r.list,(function(e,t){'<li><a href="javascript:;" NaN'+t[r.key]+"</a></li>"})),n.init&&setTimeout((function(){n.init(i)}),400)):o+='<button type="button" title="'+(n.tips||n.title)+'" class="btn '+(n.active?"btn-success":"btn-default")+" "+i+' btn-sm mr5" '+t.$verify(s.$reader_style(n.style),"style")+">"+(n.icon?'<span class="glyphicon glyphicon-'+n.icon+' mr5"></span>':"")+"<span>"+n.title+"</span></button>",a[i]||(a[i]={event:n.event,type:"button"})}));break;case"search":c=r.positon||["right","top"],r.value=r.value||"",this.config.search=r;var p="search_input_"+this.random,d="search_focus_"+this.random,_="search_btn_"+this.random;o='<div class="bt_search"><input type="text" class="search_input '+p+'" style="'+(r.width?"width:"+r.width:"")+'" placeholder="'+(r.placeholder||"")+'"/><span class="glyphicon glyphicon-search '+_+'" aria-hidden="true"></span></div>',a[p]||(a[p]={eventType:"keyup",type:"search_input"}),a[d]||(a[d]={type:"search_focus",eventType:"focus"}),a[_]||(a[_]={type:"search_btn"});break;case"batch":c=r.positon||["left","bottom"],r.placeholder=r.placeholder||"请选择批量操作",r.buttonValue=r.buttonValue||"批量操作",this.config.batch=r;var u=[],h="",f=r.config;void 0!==r.config?(s.batch_active=f,$(s.config.el).on("click",".set_batch_option",(function(e){for(var t=[],a=0;a<s.checkbox_list.length;a++)t.push(s.data[s.checkbox_list[a]]);if($(this).hasClass("bt-disabled"))return layer.tips(s.config.batch.disabledTips||"请选择需要批量操作的数据",$(this),{tips:[1,"red"],time:2e3}),!1;switch(typeof f.confirm){case"function":f.confirm(f,(function(e,s){f.param=$.extend(f.param,e),i(f,t,s)}));break;case"undefined":i(f,t);break;case"object":var l=f.confirm;bt.open({title:l.title||"批量操作",area:l.area||"350px",btn:l.btn||["确认","取消"],content:l.content,success:function(e,t){l.success(e,t,f)},yes:function(e,s){l.yes(e,s,(function(e,s){f.param=$.extend(f.param,e),n(f,t)}))}})}}))):($.each(r.selectList,(function(e,t){t.group?($.each(t.group,(function(e,s){u.push($.extend({},t,s)),h+='<li class="item">'+s.title+"</li>"})),delete t.group):(u.push(t),h+='<li class="item">'+t.title+"</li>")})),$(s.config.el).unbind().on("click",".bt_table_select_group .bt_select_value",(function(e){var t=$(this).parent(),a=t.find(".bt_selects"),n=t.offset(),i=s.$get_win_area();return t.hasClass("bt-disabled")?(layer.tips(s.config.batch.disabledSelectValue,t,{tips:[1,"red"],time:2e3}),!1):(t.hasClass("active")?t.removeClass("active"):t.addClass("active"),a.height()>i[1]-n.top?a.addClass("top"):a.removeClass("top"),$(document).one("click",(function(){return $(s.config.el).find(".bt_table_select_group").removeClass("active"),!1})),!1)})),$(s.config.el).on("click",".bt_table_select_group .item",(function(e){var t=$(this).text(),a=$(this).index();$(this).addClass("active").siblings().removeClass("active"),$(s.config.el+" .bt_select_tips").html("批量"+t+"<em>(已选中"+s.checkbox_list.length+")</em>"),s.batch_active=u[a],s.checked||$(".bt_table_select_group").removeClass("active")})),$(s.config.el).on("click",".set_batch_option",(function(e){var t=[],a=s.batch_active;if($(this).hasClass("bt-disabled"))return layer.tips(s.config.batch.disabledSelectValue,$(this),{tips:[1,"red"],time:2e3}),!1;for(var l=0;l<s.checkbox_list.length;l++)t.push(s.data[s.checkbox_list[l]]);if("{}"===JSON.stringify(a)){var o=$(s.config.el+" .bt_table_select_group");return layer.tips("请选择需要批量操作的类型",o,{tips:[1,"red"],time:2e3}),o.css("border","1px solid red"),setTimeout((function(){o.removeAttr("style")}),2e3),!1}switch(typeof a.confirm){case"function":a.confirm(a,(function(e,s){a.param=$.extend(a.param,e),i(a,t,s)}));break;case"undefined":i(a,t);break;case"object":var r=a.confirm;bt.open({type:1,title:r.title||"批量操作",area:r.area||"350px",btn:r.btn||["确认","取消"],content:'<div class="pd20">'+r.content+"</div>",success:function(e,t){r.success(e,t,a)},yes:function(e,s){r.yes(e,s,(function(s,i){a.param=$.extend(a.param,s),layer.close(e),n(a,t)}))}})}}))),o='<div class="bt_batch"><label><i class="cust—checkbox cursor-pointer checkbox_'+this.random+'" data-checkbox="all"></i><input type="checkbox" lass="cust—checkbox-input" /></label>'+(void 0!==r.config?'<button type="button" class="btn btn-default btn-sm set_batch_option bt-disabled">批量'+r.config.title+"</button>":'<div class="bt_table_select_group bt-disabled not-select"><span class="bt_select_value"><span class="bt_select_tips">请选择批量操作<em></em></span><span class="glyphicon glyphicon-triangle-bottom ml5"></span></span><ul class="bt_selects ">'+h+'</ul></div><button type="button" class="btn btn-default btn-sm set_batch_option bt-disabled" >'+r.buttonValue+"</button>")+"</div>";break;case"page":c=r.positon||["right","bottom"],r.page=e.page||1,r.pageParam=r.pageParam||"p",r.number=r.number||20,r.numberList=r.numberList||[10,20,50,100,200],r.numberParam="boolean"==typeof r.numberParam?r.numberParam:r.numberParam||"limit",this.config.page=r;var m=this.$get_page_number();m&&(this.config.page.number=m),o=this.$reader_page(this.config.page,'<div><span class="Pcurrent">1</span><span class="Pcount">共0条数据</span></div>')}if(o){var b=$(s.config.el+" .tootls_"+c[1]);if(b.length){b.find(".pull-"+c[0]).append(o)}else{var g='<div class="tootls_group tootls_'+c[1]+'"><div class="pull-left">'+("left"===c[0]?o:"")+'</div><div class="pull-right">'+("right"===c[0]?o:"")+"</div></div>";"top"===c[1]?($(s.config.el).append(g),0===$(s.config.el+" .divtable").length&&$(s.config.el).append('<div class="divtable mtb10" style="max-height:'+s.config.height+'px"></div>')):(0===$(s.config.el+" .divtable").length&&$(s.config.el).append('<div class="divtable mtb10" style="max-height:'+s.config.height+'px"></div>'),$(s.config.el).append(g))}}}this.init||this.$event_bind(a)},$clear_table_checkbox:function(){$(this.config.el).find(".bt_table .cust—checkbox").removeClass("selected active")},$get_data_batch_list:function(e,t){var s=[];return $.each(t||this.data,(function(t,a){s.push(a[e])})),s},$reader_page:function(e,t){var s="",a={},n=this,i=null;if(e.number&&!t)s=(1!==e.page?'<a class="Pnum page_link_'+this.random+'"  data-page="1">首页</a>':"")+(1!==e.page?'<a class="Pnum page_link_'+this.random+'" data-page="'+(e.page-1)+'">上一页</a>':"")+(n.data.length===e.number?'<a class="Pnum page_link_'+this.random+'" data-page="'+(e.page+1)+'">下一页</a>':"")+'<span class="Pcount">第 '+e.page+" 页</span>",a["page_link_"+this.random]={type:"cut_page_number"};else{if("number"==typeof t&&(t=this.$custom_page(t)),(i=$(t)).find("a").addClass("page_link_"+this.random),s+=i.html(),e.numberStatus){var l="page_select_"+this.random,o=n.$get_page_number();s+='<select class="page_select_number '+l+'">',$.each(e.numberList,(function(t,a){s+='<option value="'+a+'" '+((o||e.number)==a?"selected":"")+">"+a+"条/页</option>"})),s+="</select>",a[l]={eventType:"change",type:"page_select"}}if(e.jump){var r="page_jump_input_"+this.random,c="page_jump_btn_"+this.random;s+='<div class="page_jump_group"><span class="page_jump_title">跳转到</span><input type="number" class="page_jump_input '+r+'" value="'+e.page+'" /><span class="page_jump_title">页</span><button type="button" class="page_jump_btn '+c+'">确认</button></div>',a[r]={eventType:"keyup",type:"page_jump_input"},a[c]={type:"page_jump_btn"}}a["page_link_"+this.random]={type:"cut_page_number"},n.config.page.total=0===i.length?0:"number"==typeof t?t:parseInt(i.find(".Pcount").html().match(/([0-9]*)/g)[1])}return n.$event_bind(a),'<div class="page">'+s+"</div>"},$reader_style:function(e){var t="";return"string"==typeof e?e:void 0===e?"":($.each(e,(function(e,s){t+=e+":"+s+";"})),t)},$custom_page:function(e){var t='<div class="page">',s=this.config.page,a=Math.ceil(e/s.number),n=0;if(s.page>1&&a>1&&(t+='<a class="Pstart" href="p=1">首页</a><a class="Pstart" href="p='+(s.page-1)+'">上一页</a>'),a<=10)for(var i=1;i<=a;i++)i==s.page?t+='<span class="Pcurrent">'+i+"</span>":t+='<a class="Pnum" href="p='+i+'">'+i+"</a>";else if(s.page<10){for(i=1;i<=10;i++)i==s.page?t+='<span class="Pcurrent">'+i+"</span>":t+='<a class="Pnum" href="p='+i+'">'+i+"</a>";t+="<span>...</span>"}else if(a-s.page<7){a-7>1&&(t+='<a class="Pnum" href="p=1">1</a>',t+="<span>...</span>");for(i=a-7;i<=a;i++)i==s.page?t+='<span class="Pcurrent">'+i+"</span>":t+=1==i?"<span>...</span>":'<a class="Pnum" href="p='+i+'">'+i+"</a>"}else{0==n&&(n=s.page),(n<=s.page-5||n>=s.page+5)&&(n=s.page),t+='<a class="Pnum" href="p=1">1</a>',t+="<span>...</span>";for(i=n-3;i<=n+3;i++)i==s.page?t+='<span class="Pcurrent">'+i+"</span>":t+='<a class="Pnum" href="p='+i+'">'+i+"</a>";t+="<span>...</span>",t+='<a class="Pnum" href="p='+a+'">'+a+"</a>"}return a>1&&s.page<a&&(t+='<a class="Pstart" href="p='+(s.page+1)+'">下一页</a><a class="Pstart" href="p='+a+'">尾页</a>'),t+'<span class="Pcount">共'+e+"条</span></div>"},$dynamic_merge_style:function(e,t){var s="";return $.each(e,(function(e,t){switch(e){case"align":s+="text-align:"+t+";";break;case"width":s+="width:"+("string"==typeof t?t:t+"px")+";";break;case"style":s+=t;break;case"minWidth":s+="min-width:"+("string"==typeof t?t:t+"px")+";";break;case"maxWidth":s+="max-width:"+("string"==typeof t?t:t+"px")+";"}})),{index:t,css:s}},$event_bind:function(e){var t=this;$.each(e,(function(e,s){if(t.event_list[e]&&t.event_list[e].eventType===s.eventType)return!0;t.event_list[e]=s,$(t.config.el).on(s.eventType||"click","."+e,(function(a){var n=$(this).parents("tr").index(),i=$(this).data(),l=[],o=t.config.column[$(this).parents("td").index()];switch(s.type){case"rows":t.event_rows_model={el:$(this),model:o,rows:t.data[n],index:n},l=[t.event_rows_model.rows,t.event_rows_model.index,a,e,t];break;case"sort":var r=t.config.column[i.index];$(this).hasClass("sort-active")&&$(".sort_"+t.random+" .sort-active").data({sort:"desc"}),$(".sort_"+t.random).removeClass("sort-active").find(".glyphicon").removeClass("glyphicon-triangle-top").addClass("glyphicon-triangle-bottom"),$(this).addClass("sort-active"),"asc"==i.sort?($(this).data({sort:"desc"}),$(this).find(".glyphicon").removeClass("glyphicon-triangle-top").addClass("glyphicon-triangle-bottom")):($(this).data({sort:"asc"}),$(this).find(".glyphicon").removeClass("glyphicon-triangle-bottom").addClass("glyphicon-triangle-top")),t.config.sort=t.config.sortParam({name:r.fid,sort:i.sort}),t.$refresh_table_list(!0);break;case"checkbox":var c=$(t.config.el+' [data-checkbox="all"]'),p=$(t.config.el+" tbody .checkbox_"+t.random);null==i.checkbox?$(this).hasClass("active")?($(this).removeClass("active"),t.checkbox_list.splice(t.checkbox_list.indexOf(n),1),t.checkbox_list.length>0?c.addClass("selected").removeClass("active"):c.removeClass("selected active")):($(this).addClass("active"),t.checkbox_list.push(n),t.data.length===t.checkbox_list.length?c.addClass("active").removeClass("selected"):t.checkbox_list.length>0&&c.addClass("selected")):t.checkbox_list.length===t.data.length?(t.checkbox_list=[],p.removeClass("active selected").next().prop("checked","checked"),c.removeClass("active")):(p.each((function(e,s){$(this).hasClass("active")||($(this).addClass("active").next().prop("checked","checked"),t.checkbox_list.push(e))})),c.removeClass("selected").addClass("active")),t.$set_batch_view();break;case"button":l.push(a,t);break;case"search_focus":var d=$(t.config.el+" .bt_search_tips");$(t.config.el+" .bt_search_tips").length>0&&d.remove();break;case"search_input":if(13==a.keyCode)return $(t.config.el+" .search_btn_"+t.random).click(),!1;break;case"search_btn":var _=$(t.config.el+" .search_input"),u=$(t.config.el+" .search_input").val();u=(u=$("<div></div>").text(u).html()).replace(/(^\s*)|(\s*$)/g,""),_.text(u),t.config.search.value=u,t.config.page&&(t.config.page.page=1),_.append('<div class="bt_search_tips"><span>'+u+'</span><i class="bt_search_close"></i></div>'),t.$refresh_table_list(!0);break;case"page_select":var h=parseInt($(this).val());return t.$set_page_number(h),t.config.page.number=h,t.config.page.page=1,t.$refresh_table_list(!0),!1;case"page_jump_input":return 13===a.keyCode&&($(t.config.el+" .page_jump_btn_"+t.random).click(),$(this).focus()),!1;case"page_jump_btn":var f=parseInt($(t.config.el+" .page_jump_input_"+t.random).val()),m=Math.ceil(t.config.page.total/t.config.page.number);(isNaN(f)||Number(f)<1)&&(f=1),f>m&&(f=t.config.page.page),t.config.page.page=f,t.$refresh_table_list(!0);break;case"cut_page_number":var b=$(this).data("page")||parseInt($(this).attr("href").match(/([0-9]*)$/)[0]);return t.config.page.page=b,t.$refresh_table_list(!0),!1;case"eye_open_password":return $(this).hasClass("glyphicon-eye-open")?($(this).addClass("glyphicon-eye-close").removeClass("glyphicon-eye-open"),$(this).prev().text(t.data[n][o.fid])):($(this).addClass("glyphicon-eye-open").removeClass("glyphicon-eye-close"),$(this).prev().html("<i>**********</i>")),!1;case"copy_password":return bt.pub.copy_pass(t.data[n][o.fid]),!1}s.event&&s.event.apply(this,l)}))}))},$style_bind:function(e,t){var s="",a=this;$.each(e,(function(t,n){if(""!=n.css)if(n.className)s+=n.className+"{"+n.css+"}";else{var i=e[0].hasOwnProperty("className")?t:n.index+1;s+=a.config.el+" thead th:nth-child("+i+"),"+a.config.el+" tbody tr td:nth-child"+(n.span?" span":"")+"("+i+"){"+n.css+"}"}})),0==$("#bt_table_"+a.random).length&&$(a.config.el).append('<style type="text/css" id="bt_table_'+a.random+'">'+s+"</style>")},$get_win_area:function(){return[window.innerWidth,window.innerHeight]},$get_page_number:function(){var e=this.config.pageName;if(e)return bt.get_cookie(e+"_page_number")},$set_page_number:function(e){var t=this.config.pageName;t&&bt.set_cookie(t+"_page_number",e)},$http:function(e,t){var s=this.$get_page_number(),a=this,n={},i=this.config,l=i.page,o=i.search,r=i.sort||{};l&&(s&&!l.number&&(l.number=s),l.defaultNumber&&(l.number=l.defaultNumber),l.numberParam&&(n[l.numberParam]=l.number),n[l.pageParam]=l.page),o&&(n[o.searchParam]=o.value);var c=$.extend(i.param,n,r);this.config.beforeRequest?"model"===this.config.beforeRequest?i.param=function(){if(c.hasOwnProperty("data")&&"string"==typeof c.data){var e=JSON.parse(c.data);return delete c.data,{data:JSON.stringify($.extend(e,c))}}return{data:JSON.stringify(c)}}():i.param=this.config.beforeRequest(c):i.param=c,bt_tools.send({url:i.url,data:i.param},(function(e){if(void 0!==i.dataFilter){var s=i.dataFilter(e,a);void 0!==s.tootls&&(s.tootls=parseInt(s.tootls)),t&&t(s)}else void 0===e.data?t&&t({data:e}):t&&t({data:e.data,page:e.page})}),{load:!!e&&"获取列表数据",verify:void 0===i.dataVerify||!!i.dataVerify})}};var i=new n(e);return $(e.el).data("table",i),i},verifyForm:function(e,t,s){for(var a=!1,n=this.getFormValue(e,[]),i=0;i<t.length;i++){var l=t[i];if("string"==typeof(a=l.validator.apply(this,[n[l.name],n])))return this.error(a),!1}s&&s("string"!=typeof a,n)},getFormValue:function(e,t){var s=$(e).serializeObject();for(var a in t=t&&[],s)t.indexOf(a)>-1&&delete s[a];return s},setLayerArea:function(e){var t=$(e),s=t.width(),a=t.height(),n=$(window).width(),i=$(window).height();t.css({left:(n-s)/2,top:(i-a)/2})},line:function(e){var t=$('<div class="line '+(e.lineClass?e.lineClass:"")+'" style="'+(e.labelStyle||"")+'"><span class="tname" style="'+(e.labelWidth?"width:"+e.labelWidth:"")+'">'+((void 0!==e.must&&""!=e.must?'<span class="color-red mr5">'+e.must+"</span>":"")+e.label||"")+'</span><div class="info-r" style="'+(e.labelWidth?"margin-left:"+e.labelWidth:"")+'"></div></div>'),s=this.renderLineForm(e);return s.data({line:t}),t.find(".info-r").append(s),{$line:t,$form:s}},help:function(e){for(var t="",s=0;s<e.list.length;s++){t+="<li>"+e.list[s]+"</li>"}return $('<ul class="help-info-text c7" style="'+(e.style||"")+'">'+t+"</ul>")},renderLineForm:function(e){e.type=e.type||"text";var t=["label","labelWidth","group","on","width","options","type"],s=null,a=function(){var s={};for(var a in e)-1===t.indexOf(a)&&(s[a]=e[a]);return s}(),n=e.width?'style="width:'+e.width+'"':"";switch(e.type){case"textarea":s='<textarea class="bt-input-text mr5" '+n+"></textarea>";break;case"select":for(var i=e.options,l="",o=0;o<i.length;o++){var r=i[o],c=r;"string"==typeof r&&(c={label:r,value:r}),l+='<option value="'+c.value+'">'+c.label+"</option>"}s='<select class="bt-input-text mr5" '+n+">"+l+"</select>";break;case"text":s='<input type="text" class="bt-input-text mr5" />'}for(var p in(s=$(s)).width(e.width||"100%").attr(a),e.on||(e.on={}),e.on)!function(t){s.on(t,(function(s){e.on[t].apply(this,[s,$(this).val()])}))}(p);return s},fromGroup:function(e,t,s){for(var a=$(e),n={},i=0;i<t.length;i++){var l=t[i];if("tips"===l.type)a.append(this.help(l));else{var o=this.line(l);void 0!==s&&o.$form.val(s[l.name]||""),n[o.$form.attr("name")]=o,a.append(o.$line)}}return n},form:function(e){var t=this;function s(e){this.config=e,this.el=e.el,this.submit=e.submit,this.data=e.data||{},this.$load()}return s.prototype={element:null,style_list:[],event_list:{},event_type:["click","event","focus","keyup","blur","change","input"],hide_list:[],form_element:{},form_config:{},random:bt.get_random(5),$load:function(){if(this.el){if($(this.el).html(this.$reader_content()),$("#editCrontabForm .bt_multiple_select_updown").length>0){var e=$("#editCrontabForm .bt_multiple_select_updown").parent().height();$("#editCrontabForm .line:eq(3) .tname").css({height:e+"px","line-height":e+"px"})}this.$event_bind()}},$reader_content:function(e){var s=this,a="",n="";return $.each(s.config.form,(function(e,t){t.separate?a+='<div class="bt_form_separate"><span class="btn btn-sm btn-default">'+t.separate+"</span></div>":a+=s.$reader_content_row(e,t)})),s.element=$('<form class="bt-form" data-form="'+s.random+'" onsubmit="return false">'+a+"</form>"),(n=$('<div class="'+t.$verify(s.config.class)+'"></div>')).append(s.element),e&&e(),n[0].outerHTML},$reader_content_row:function(e,s){try{var a=this,n=s.help||!1,i=s.formLabelWidth||this.config.formLabelWidth;return!1===s.display?'<div class="line" style="padding:0"></div>':'<div class="line'+t.$verify(s.class)+t.$verify(s.hide,"hide",!0)+'"'+t.$verify(s.id,"id")+">"+(void 0!==s.label?'<span class="tname" '+(i?'style="width:'+i+'"':"")+">"+(void 0!==s.must&&""!=s.must?'<span class="color-red mr5">'+s.must+"</span>":"")+s.label+"</span>":"")+'<div class="'+(s.label?"info-r":"")+t.$verify(s.line_class)+'"'+t.$verify(a.$reader_style($.extend(s.style,i?{"margin-left":i}:{})),"style")+">"+a.$reader_form_element(s.group,e)+(n?'<div class="c9 mt5 '+t.$verify(n.class,"class")+'" '+t.$verify(a.$reader_style(n.style),"style")+">"+n.list.join("</br>")+"</div>":"")+"</div></div>"}catch(e){console.log(e)}},$reader_form_element:function(e,t){var s=this,a="";return Array.isArray(e)||(e=[e]),$.each(e,(function(e,n){n.find_index=t,a+=s.$reader_form_find(n),s.form_config[n.name]=n})),a},$reader_form_find:function(e){var s=this,a="",n=s.$reader_style(e.style)+t.$verify(e.width,"width","style"),i=s.$verify_group(e,["name","placeholder","disabled","readonly","autofocus","autocomplete","min","max"]),l=s.$create_event_config(e),o="",r=e.find_index;if(!1===e.display)return a;a+=e.label?'<span class="mr5 inlineBlock">'+e.label+"</span>":"",void 0!==e.name&&s.$check_event_bind(e.name,l),a+='<div class="'+(e.dispaly||"inlineBlock")+" "+t.$verify(e.hide,"hide",!0)+" "+(e.class||"")+'">';var c=void 0!==s.data[e.name]&&""!==s.data[e.name]?s.data[e.name]:e.value||"";switch(e.type){case"text":case"checkbox":case"password":case"radio":case"number":var p="event_"+e.name+"_"+s.random;switch(e.type){case"checkbox":a+='<label class="cursor-pointer form-checkbox-label" '+t.$verify(s.$reader_style(e.style),"style")+'><i class="form-checkbox cust—checkbox cursor-pointer mr5 '+p+"_label "+(c?"active":"")+'"></i><input type="checkbox" class="form—checkbox-input hide mr10 '+p+'" name="'+e.name+'" '+(c?"checked":"")+'/><span class="vertical_middle">'+e.title+"</span></label>",void 0!==e.disabled&&e.disabled||(s.$check_event_bind(p+"_label",{click:{type:"checkbox_icon",config:e}}),s.$check_event_bind(p,{input:{type:"checkbox",config:e,event:e.event}}));break;case"radio":$.each(e.list,(function(t,n){var i=p+"_radio_"+t;a+='<span class="form-radio"><input type="radio" name="'+e.name+'" '+(c==n.value?"checked":"")+' id="'+i+'" class="'+i+'" value="'+n.value+'"><label for="'+i+'" class="mb0">'+n.title+"</span>",s.$check_event_bind(i,{input:{type:"radio",config:e,event:e.event}})}));break;default:a+='<input type="'+e.type+'"'+i+" "+(e.icon?'id="'+p+'"':"")+' class="bt-input-'+("select_path"!==e.type&&"number"!==e.type&&"password"!==e.type?e.type:"text")+" mr10 "+(e.label?"vertical_middle":"")+t.$verify(e.class)+'"'+t.$verify(n,"style")+' value="'+c+'"/>'}e.btn&&!e.disabled&&(a+='<span class="btn '+e.btn.type+" "+e.name+'_btn cursor" '+t.$verify(s.$reader_style(e.btn.style),"style")+">"+e.btn.title+"</span>",void 0!==e.btn.event&&s.$check_event_bind(e.name+"_btn",{click:{config:e,event:e.btn.event}})),e.icon&&(a+='<span class="glyphicon '+e.icon.type+" "+e.name+"_icon cursor "+(e.disabled?"hide":"")+' mr10" '+t.$verify(s.$reader_style(e.icon.style),"style")+"></span>",void 0!==e.icon.event&&s.$check_event_bind(e.name+"_icon",{click:{type:"select_path",select:e.icon.select||"",config:e,defaultPath:e.icon.defaultPath||"",children:"."+e.name+"_icon",event:e.icon.event,callback:e.icon.callback}}));break;case"textarea":if(a+='<textarea class="bt-input-text"'+t.$verify(n,"style")+i+" >"+c+"</textarea>",$.each(["blur","focus","input"],(function(t,a){if(e.tips){var n=null;switch(a){case"blur":n=function(e,t,s){""===$(this).val()&&$(this).next().show(),layer.close(t.tips.loadT),$(e.target).data("layer","")};break;case"focus":n=function(e,t){$(this).next().hide(),t.tips.loadT=layer.tips(d,$(this),{tips:[1,"#20a53a"],time:0,area:$(this).width()})}}}s.event_list[e.name][a]?s.event_list[e.name][a].added=n:s.event_list[e.name][a]={type:e.type,cust:!1,event:e[a],added:n}})),e.tips){var d="";d=void 0===e.tips.list?e.tips.text:e.tips.list.join("</br>"),a+='<div class="placeholder c9 '+e.name+'_tips" '+t.$verify(s.$reader_style(e.tips.style),"style")+">"+d+"</div>",s.$check_event_bind(e.name+"_tips",{click:{type:"textarea_tips",config:e}})}break;case"select":a+=s.$reader_select(e,n,i,r),s.$check_event_bind("custom_select",{click:{type:"custom_select",children:".bt_select_value"}}),s.$check_event_bind("custom_select_item",{click:{type:"custom_select_item",children:"li.item"}});break;case"multipleSelect":a+=s.$reader_multipleSelect(e,n,i,r),s.$check_event_bind("custom_select",{click:{type:"custom_select",children:".bt_select_value"}}),s.$check_event_bind("custom_select_item",{click:{type:"custom_select_item",children:"li.item"}}),s.$check_event_bind("icon_trem_close",{click:{type:"icon_trem_close",children:".icon-trem-close"}});break;case"secondaryMenu":a+=s.$reader_secondaryMenu(e,n,i,r),s.$check_event_bind("secondary_menu_parent",{"mouseover click":{type:"secondary_menu_parent",children:".item-parent"}}),s.$check_event_bind("secondary_menu_child",{click:{type:"secondary_menu_child",children:".item-child"}});break;case"link":o="event_link_"+s.random+"_"+e.name,a+='<a href="'+(e.href||"javascript:;")+'" class="'+(e.subclass?e.subclass:"btlink")+" "+o+'" '+t.$verify(s.$reader_style(e.style),"style")+">"+e.title+"</a>",s.$check_event_bind(o,{click:{type:"link_event",event:e.event}});break;case"button":a+='<button class="btn '+(e.hasOwnProperty("active")?e.active?"btn-success":"btn-default":"btn-success ")+" btn-"+(e.size||"sm ")+" "+o+" "+t.$verify(e.class)+'"  '+t.$verify(s.$reader_style(e.style),"style")+" "+i+">"+e.title+"</button>";break;case"help":var _="";$.each(e.list,(function(e,t){_+="<li>"+t+"</li>"})),a+='<ul class="help-info-text c7'+t.$verify(e.class)+'"'+t.$verify(s.$reader_style(e.style),"style")+" "+i+">"+_+"</ul>";break;case"other":a+=e.boxcontent}return a+=e.unit?'<span class="'+("text-tips"===e.type?"text-tips":"unit")+'">'+e.unit+"</span>":"",a+=e.suffix?'<span class="text-tips ml10" '+("select"===e.type)+">"+e.suffix+"</span>":"",a+="</div>"},$check_event_bind:function(e,t){this.event_list[e]||this.event_list.hasOwnProperty(e)||(this.event_list[e]=t)},$create_event_config:function(e){var t={};return void 0===e.name?{}:($.each(this.event_type,(function(s,a){e[a]&&(t["event"===a?"click":a]={type:e.type,event:e[a],cust:["select","checkbox","radio"].indexOf(e.type)>-1,config:e})})),t)},$reader_style:function(e){var t="";return"string"==typeof e?e:void 0===e?"":($.each(e,(function(e,s){t+=e+":"+s+";"})),t)},$local_refresh:function(e,t){var s=this.element.find("[data-name="+e+"]");0===this.element.find("[data-name="+e+"]").length&&(s=this.element.find("[name="+e+"]")),s.parent().replaceWith(this.$reader_form_find(t))},$reader_select:function(e,s,a,n){var i=this,l="",o="",r={};"function"==typeof e.list&&(e.list.call(this,this.config.form),e.list=[]);if(!Array.isArray(e.list)){var c=e.list;return bt_tools.send({url:c.url,data:c.param||c.data||{}},(function(t){if(!1!==t.status){var s=e.list.dataFilter?e.list.dataFilter(t,i):t;e.list.success&&e.list.success(t,i,i.config.form[n],s),e.list=s,e.list.length||(e.disabled=!0,layer.msg(e.placeholder||"数据获取为空",{icon:2})),i.$replace_render_content(n)}else bt.msg(t)})),!1}void 0===i.data[e.name]&&(r=e.list[0]),$.each(e.list,(function(t,s){if(s.value===e.value||s.value===i.data[e.name])return r=s,!1})),$.each(e.list,(function(e,s){l+='<li class="item'+t.$verify(s.value===r.value?"active":"")+" "+(s.disabled?"disabled":"")+'" title="'+s.title+'">'+s.title+"</li>",o+='<option value="'+s.value+'"'+(s.disabled?"disabled":"")+" "+t.$verify(s.value===r.value?"selected":"")+">"+s.title+"</option>"}));var p=Array.isArray(e.list)?r?r.title:e.placeholder:"获取数据中";return'<div class="bt_select_updown mr10 '+(e.disabled?"bt-disabled":"")+" "+ +t.$verify(e.class)+'" '+t.$verify(s,"style")+' data-name="'+e.name+'"><span class="bt_select_value"><span class="bt_select_content" title="'+(p||e.placeholder)+'">'+(p||e.placeholder)+'</span><div class="icon-down"><svg width="12.000000" height="12.000000" viewBox="0 0 12 5" fill="none" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n\t<desc>\n\t\t\tCreated with Pixso.\n\t</desc>\n\t<defs/>\n\t<path id="path" d="M0.123291 0.809418L4.71558 5.84385C4.8786 6.02302 5.16846 6.04432 5.33038 5.86389L9.87927 0.783104C10.0412 0.602676 10.04 0.311989 9.87701 0.132816C9.79626 0.0446892 9.68945 0 9.58374 0C9.47693 0 9.36938 0.0459404 9.28827 0.136574L5.02881 4.89284L0.708618 0.15662C0.627869 0.0684967 0.522217 0.0238075 0.415405 0.0238075C0.307434 0.0238075 0.20105 0.0697479 0.119873 0.160381C-0.041626 0.338303 -0.0393677 0.630241 0.123291 0.809418Z" fill-rule="nonzero" fill="#999999"/>\n</svg>\n</div></span><ul class="bt_select_list">'+(l||'<div style="height:80px;display:inline-flex;align-items:center;justify-content:center;color:#999;width:100%">无数据</div>')+"</ul><select"+a+' class="hide" '+(e.disabled?"disabled":"")+' autocomplete="off">'+(o||"")+'</select><div class="bt_select_list_arrow"></div><div class="bt_select_list_arrow_fff"></div></div>'},$reader_multipleSelect:function(e,s,a,n){var i=this,l="",o="",r={},c=[],p="";"function"==typeof e.list&&(e.list.call(this,this.config.form),e.list=[]);if($.isArray(e.value))c=e.value;else{if(!Array.isArray(e.list)){var d=e.list;return bt_tools.send({url:d.url,data:d.param||d.data||{}},(function(t){if(!1!==t.status){var s=e.list.dataFilter?e.list.dataFilter(t,i):t;e.list.success&&e.list.success(t,i,i.config.form[n],s),e.list=s,e.list.length||(e.disabled=!0,layer.msg(e.placeholder||"数据获取为空",{icon:2})),i.$replace_render_content(n)}else bt.msg(t)})),!1}void 0===i.data[e.name]&&(r=e.list[0]),$.each(e.list,(function(t,s){if(s.value===e.value||s.value===i.data[e.name])return r=s,!1}))}$.each(e.list,(function(s,a){if($.isArray(e.value))for(var n=0;n<c.length;n++)c.indexOf(a.value)>-1&&(r.value=a.value);l+='<li class="item item1'+t.$verify(a.value===r.value?"active":"")+" "+(a.disabled?"disabled":"")+'" title="'+a.title+'">            <span>'+a.title+'</span>            <span class="icon-item-active"></span>          </li>',o+='<option value="'+a.value+'"'+(a.disabled?"disabled":"")+" "+t.$verify(a.value===r.value?"selected":"")+">"+a.title+"</option>"}));for(var _=0;_<e.list.length;_++)c.indexOf(e.list[_].value)>-1&&(p+='<span class="bt_select_content"><span>'+e.list[_].title+'</span><span class="icon-trem-close"></span></span>');var u=Array.isArray(e.list)?r?r.title:e.placeholder:"获取数据中";return'<div class="bt_multiple_select_updown bt_select_updown mr10 '+(e.disabled?"bt-disabled":"")+" "+ +t.$verify(e.class)+'" '+t.$verify(s,"style")+' data-name="'+e.name+'"><span class="bt_select_value">'+(0==e.value.length?'<span class="bt_select_content"><span>'+(u||e.placeholder)+'</span><span class="icon-trem-close"></span></span>':p)+'<div class="icon-down"><svg width="12.000000" height="12.000000" viewBox="0 0 12 5" fill="none" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><desc>Created with Pixso.</desc><defs></defs><path id="path" d="M0.123291 0.809418L4.71558 5.84385C4.8786 6.02302 5.16846 6.04432 5.33038 5.86389L9.87927 0.783104C10.0412 0.602676 10.04 0.311989 9.87701 0.132816C9.79626 0.0446892 9.68945 0 9.58374 0C9.47693 0 9.36938 0.0459404 9.28827 0.136574L5.02881 4.89284L0.708618 0.15662C0.627869 0.0684967 0.522217 0.0238075 0.415405 0.0238075C0.307434 0.0238075 0.20105 0.0697479 0.119873 0.160381C-0.041626 0.338303 -0.0393677 0.630241 0.123291 0.809418Z" fill-rule="nonzero" fill="#999999"></path></svg></div>            </span><ul class="bt_select_list">'+(l||"")+"</ul><select"+a+' class="hide" '+(e.disabled?"disabled":"")+' autocomplete="off" multiple>'+(o||"")+'</select><div class="bt_select_list_arrow"></div><div class="bt_select_list_arrow_fff"></div></div>'},$reader_secondaryMenu:function(e,s,a,n){var i=this,l="",o={};return $.each(e.list,(function(s,a){var n;l+='<li class="item-parent"><div class="item-menu-title" style="'+function(){for(var t=0;t<a.child.length;t++)if(a.child[t].value!=e.value&&a.child[t].value!=i.data[e.name]||(o=a.child[t]),a.child[t].value===o.value)return"color:#20a53a;"}()+'">'+a.title+"</div>"+(a.child.length>0?'                 <svg style="margin-right: 10px;fill:#999999;" width="5.989136" height="10.000000" viewBox="0 0 5.98914 10" fill="none" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">                 \t<desc>                 \t\t\tCreated with Pixso.                 \t</desc>                 \t<defs/>                 \t<path id="path" d="M0.809448 9.87672L5.84387 5.28442C6.02307 5.12138 6.04431 4.83153 5.86389 4.66962L0.783081 0.120728C0.602661 -0.0411835 0.312012 -0.0400543 0.132812 0.122986C0.0446777 0.203751 0 0.310562 0 0.416229C0 0.523041 0.0458984 0.6306 0.136597 0.711746L4.89282 4.97118L0.156616 9.29137C0.0684814 9.37213 0.0238037 9.4778 0.0238037 9.58461C0.0238037 9.69255 0.0697021 9.79898 0.1604 9.88011C0.338257 10.0416 0.630249 10.0394 0.809448 9.87672Z" fill-rule="nonzero" />                 </svg><div class="item-menu-body-list">\t\t\t\t\t\t\t\t<ul class="">'+(n="",$.each(a.child,(function(e,s){n+='<li class="item-child'+t.$verify(s.value===o.value?"active":"")+'" title="'+s.title+'" data-value="'+s.value+'"><div class="item-menu-title">'+s.title+"</div></li>"})),n+"</ul></div>"):'<span style="top: 0;color: #ccc;">[空]</span>')+"</li>"})),'<div class="bt_select_updown bt_seconday_menu" '+t.$verify(s,"style")+' data-name="'+e.name+'">\t\t\t\t\t<span class="bt_select_value"><span class="bt_select_content">'+($.isEmptyObject(o)?e.placeholder:o.title)+'</span>\t\t\t\t\t<div class="icon-down"><svg width="12.000000" height="12.000000" viewBox="0 0 12 5" fill="none" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><desc>Created with Pixso.</desc><defs></defs><path id="path" d="M0.123291 0.809418L4.71558 5.84385C4.8786 6.02302 5.16846 6.04432 5.33038 5.86389L9.87927 0.783104C10.0412 0.602676 10.04 0.311989 9.87701 0.132816C9.79626 0.0446892 9.68945 0 9.58374 0C9.47693 0 9.36938 0.0459404 9.28827 0.136574L5.02881 4.89284L0.708618 0.15662C0.627869 0.0684967 0.522217 0.0238075 0.415405 0.0238075C0.307434 0.0238075 0.20105 0.0697479 0.119873 0.160381C-0.041626 0.338303 -0.0393677 0.630241 0.123291 0.809418Z" fill-rule="nonzero" fill="#999999"></path></svg></div>\t\t\t\t\t</span>\t\t\t\t\t<ul class="bt_select_list">'+l+"</ul>\t\t\t\t\t<input "+a+' class="hide" value="'+(o.value||"")+'">          <div class="bt_select_list_arrow"></div><div class="bt_select_list_arrow_fff"></div>\t\t\t\t\t</div>'},$replace_render_content:function(e){var t=this.config.form[e],s=this.$reader_content_row(e,t);$("[data-form="+this.random+"]").find(".line:eq("+e+")").replaceWith(s),this.$event_bind()},$again_render_form:function(e){var t=$("[data-form="+this.random+"]");e=e||this.config.form,t.empty();for(var s=0;s<e.length;s++){var a=e[s];t.append(this.$reader_content_row(s,a))}this.config.form=e,this.$event_bind(),t.find(".form-checkbox-label").click(),t.find(".form-checkbox-label").click()},$event_bind:function(e,t){var s=this,a={};s.element=$("object"==typeof e?s.element:"[data-form="+s.random+"]"),a=e,void 0===e&&(a=s.event_list),$.each(a,(function(e,t){if($.isEmptyObject(t))return!0;$.each(t,(function(a,n){if(t.type)return!1;if(n.hasOwnProperty("bind"))return!1;n.bind=!0;var i="";i="boolean"==typeof n.cust?"["+(n.cust?"data-":"")+"name="+e+"]":"."+e,function(e,t){if(!1===e.onEvent){if("input_checked"===e.type)$(i).on("event"!=a?a:"click",(function(t){e.event.apply(this,[t,s])}));return!0}if("select"===e.type)return!0;s.element.on("event"!==a?a:"click",e.children?e.children:i,(function(a){var n=s.$get_form_element(!0),i=s.form_config[t];switch(e.type){case"textarea_tips":$(this).hide().prev().focus();break;case"custom_select":if($(this).parent().hasClass("bt-disabled"))return!1;var l=$(this).next();if(l.parent(".bt_select_updown").css("border","1px solid rgb(220, 223, 230)"),s.element.find(".item-parent").removeClass("down"),s.element.find(".bt_select_list,.item-menu-body-list").parent(".bt_select_updown").css("border","1px solid rgb(220, 223, 230)"),l.hasClass("show"))l.parent(".bt_select_updown").css("border","1px solid rgb(220, 223, 230)"),$(".icon_up").remove(),$(".icon-down").show(),l.slideUp("fast"),l.removeClass("show"),$(".bt_select_list_arrow").fadeOut(300),$(".bt_select_list_arrow_fff").fadeOut(300);else{$(".bt_select_list").removeClass("show").css("display","none"),$(".bt_select_list_arrow").fadeOut(1),$(".bt_select_list_arrow_fff").fadeOut(1),$(".icon_up").remove(),$(".icon-down").show(),l.slideDown("fast"),l.addClass("show"),l.prev().append('<div class=\'icon_up\'><svg width="12.000000" height="12.000000" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n<desc>Created with Pixso.</desc><defs/><path id="path" d="M1.12328 8.19058L5.71558 3.15616C5.87862 2.97699 6.16847 2.95569 6.33038 3.13611L10.8793 8.21689C11.0412 8.39731 11.04 8.68802 10.877 8.86719C10.7962 8.95532 10.6894 9 10.5838 9C10.477 9 10.3694 8.95407 10.2883 8.86343L6.02883 4.10715L1.70864 8.84338C1.62788 8.93152 1.5222 8.9762 1.41539 8.9762C1.30746 8.9762 1.20103 8.93024 1.11988 8.83963C0.958351 8.66171 0.960617 8.36975 1.12328 8.19058Z" fill-rule="nonzero" fill="#999999"/>\n</svg></div>'),l.prev().find(".icon-down").hide(),l.parent(".bt_select_updown").css("border","1px solid #20A53A");var o=$(this).height();l.css("top",o+12+"px"),$(l.siblings()[2]).css("top",o-4+"px"),$(l.siblings()[3]).css("top",o-3+"px"),$(l.siblings()[2]).show(),$(l.siblings()[3]).show()}return $(document).click((function(){return s.element.find(".bt_select_list,.item-menu-body-list").slideUp("fast"),s.element.find(".bt_select_list,.item-menu-body-list").removeClass("show"),s.element.find(".item-parent").removeClass("down"),s.element.find(".bt_select_list,.item-menu-body-list").parent(".bt_select_updown").css("border","1px solid rgb(220, 223, 230)"),$(".bt_select_list_arrow").fadeOut(300),$(".bt_select_list_arrow_fff").fadeOut(300),$(".icon_up").remove(),$(".icon-down").show(),$(this).unbind("click"),!1})),!1;case"custom_select_item":var r=(i=s.form_config[$(this).parents(".bt_select_updown").attr("data-name")]).list[$(this).index()],c=$(this).parent().find(".item"),p=[],d="",_=[];if($(this).hasClass("disabled"))return $(this).parent().removeClass("show"),r.tips&&layer.msg(r.tips,{icon:2}),!0;if($(this).hasClass("active")||$(this).hasClass("disabled"))"multipleSelect"==i.type&&$(this).removeClass("active");else{var u=r.value.toString();$(this).parent().prev().find(".bt_select_content").text($(this).text()),$(this).parent().prev().find(".bt_select_content").prop("title",$(this).text()),"multipleSelect"!=i.type?($(this).addClass("active").siblings().removeClass("active"),$(this).parent().next().val(u),$(this).parent().slideUp("fast"),$(this).parent().removeClass("show"),$(".bt_select_list_arrow").fadeOut(200),$(".bt_select_list_arrow_fff").fadeOut(200)):$(this).addClass("active")}if("multipleSelect"==i.type){for(var h=0;h<c.length;h++)c.eq(h).hasClass("active")&&p.push(c.eq(h).text().trim().replace(/\s/g,""));for(h=0;h<i.list.length;h++)p.indexOf(i.list[h].title.trim().replace(/\s/g,""))>-1&&_.push(i.list[h].value);if(0==p.length)d+='<span class="bt_select_content_def">'+i.placeholder+"</span>";else{$(this).parent().prev().find(".bt_select_content_def").remove();for(h=0;h<p.length;h++)d+='<span class="bt_select_content"><span>'+p[h]+'</span><span class="icon-trem-close"></span></span>'}$(this).parent().prev().find(".bt_select_content").remove(),$(this).parent().prev().find(".icon-down").before(d),$(this).parent().next().val(_);o=$(this).parent().parent().parent().height();$(this).parent().parent().parent().parent().siblings().css({height:o+"px","line-height":o+"px"}),$(this).parent().css("top",o+12+"px"),$(".bt_select_list_arrow_fff").css("top",o-3+"px"),$(".bt_select_list_arrow").css("top",o-4+"px")}$(".icon-trem-close").click((function(){for(var e=$(this).siblings().text().trim().replace(/\s/g,""),t=0;t<c.length;t++)e==c.eq(t).prop("title")&&c.eq(t).click();return!1})),s.data[i.name]="multipleSelect"==i.type?_:u,e.event&&(e.event=null),i.change&&(e.event=i.change),a.stopPropagation();break;case"icon_trem_close":var f=$(this).siblings().text().trim().replace(/\s/g,"");for(c=$(this).parent().parent().siblings(".bt_select_list").find(".item"),h=0;h<c.length;h++)f==c.eq(h).prop("title")&&c.eq(h).click();return!1;case"secondary_menu_parent":$(".item-menu-title").removeAttr("style"),$(this).addClass("down").siblings().removeClass("down").find(".item-menu-body-list").removeClass("show"),$(this).siblings().children("svg").css("fill","#999999"),$(".down").children("svg").css("fill","#666666"),$(this).find(".item-menu-body-list").length>0&&$(this).find(".item-menu-body-list").addClass("show").parent().siblings().find(".item-menu-body-list").removeClass("show"),a.stopPropagation();break;case"secondary_menu_child":var m=$(this).attr("data-value");i=s.form_config[$(this).parents(".bt_select_updown").attr("data-name")],s.data[i.name]=m,e.event&&(e.event=null),i.change&&(e.event=i.change),a.stopPropagation();break;case"select_path":bt.select_path("event_"+$(this).prev().attr("name")+"_"+s.random,e.select||"",!e.callback||e.callback.bind(s),e.defaultPath||"");break;case"checkbox":$(this).is(":checked")?$(this).prev().addClass("active"):$(this).prev().removeClass("active")}e.event&&e.event.apply(this,[s.$get_form_value(),n,s,i,a]),e.added&&e.added.apply(this,[a,i,n])}))}(n,e)}))})),t&&t()},$get_form_value:function(){var e={},t=this.element;return t.find('input,textarea[disabled="disabled"]').each((function(s,a){var n=$(this).val();"checkbox"===$(this).attr("type")&&(n=$(this).prop("checked")),"radio"===$(this).attr("type")&&(n=t.find("input[name="+$(this).attr("name")+"]:radio:checked").val()),e[$(this).attr("name")]=n})),$.extend({},t.serializeObject(),e)},$set_find_value:function(e,t){var s={},a=this;"string"!=typeof e?s=e:s[e]=t,$.each(s,(function(e,t){a.form_element[e].val(t)}))},$get_form_element:function(e){var t={},s=this;return e||$.isEmptyObject(s.form_element)?(this.element.find(":input").each((function(e){t[$(this).attr("name")]=$(this)})),s.form_element=t,t):s.form_element},$verify_group:function(e,t){var s="";return $.each(t,(function(t,a){if(void 0===e[a])return!0;["disabled","readonly"].indexOf(a)>-1?s+=" "+(e[a]?a+'="'+a+'"':""):s+=" "+a+'="'+e[a]+'"'})),s},$verify_bind_event:function(e,t,s){var a={};return $.each(s,(function(s,n){var i=t[n];i&&("object"==typeof a[e]?(Array.isArray(a[e])||(a[e]=[a[e]]),a[e].push({event:i,eventType:n})):a[e]={event:i,eventType:n})})),a},$verify:function(e,t,s){return e?!0===s?e?" "+t:"":"style"===s?t?t+":"+e+";":e:t?" "+t+'="'+e+'"':" "+e:""},$verify_form:function(){for(var e=this.config.form,t=this.$get_form_value(),s=this.$get_form_element(!0),a=!0,n=0;n<e.length;n++){var i=e[n];if(Array.isArray(i.group)||(i.group=[i.group]),!i.separate)for(var l=0;l<i.group.length;l++){var o=i.group[l],r=o.name;if("help"!==o.type)if("function"==typeof o.verify)a="boolean"!=typeof(a=o.verify(t[r],s[r],o,!0))}}return a?t:a},$submit:function(e,t,s){var a=this.$verify_form();return"function"==typeof e&&(s=t,t=e,e={}),!!a&&(a=$.extend(a,e),void 0===this.config.url?(bt_tools.msg("请求提交地址不能为空！",!1),!1):void bt_tools.send({url:this.config.url,data:a},(function(e){t?t(e,a):bt_tools.msg(e)}),s||"提交中"))}},new s(e)},tab:function(e){var t=this;function s(e){this.config=e,this.theme=this.config.theme||{},this.$load()}return s.prototype={type:1,theme_list:[{content:"tab-body",nav:"tab-nav",body:"tab-con",active:"on"},{content:"bt-w-body",nav:"bt-w-menu",body:"bt-w-con"}],random:bt.get_random(5),$init:function(){var e=this,t=(this.config.active,e.config.list);this.$event_bind(),t[e.active].success&&t[e.active].success(),t[e.active].init=!0},$load:function(){},$reader_content:function(){var e=this,s=e.config.list,a="",n="",i=e.theme,l=e.config;return void 0===e.active&&(e.active=0),$.isEmptyObject(l.theme)||(i=this.theme_list[e.active],$.each(l.theme,(function(e,t){i[e]&&(i[e]+=" "+t)})),e.theme=i),l.type&&$.isEmptyObject(l.theme)&&(this.theme=this.theme_list[e.active]),$.each(s,(function(t,s){var l=e.active===t,o=i.active||"active";a+='<span class="'+(l?o:"")+'">'+s.title+"</span>",n+='<div class="tab-block '+(l?o:"")+'">'+(l?s.content:"")+"</div>"})),e.element=$('<div id="tab_'+e.random+'" class="'+i.content+t.$verify(e.config.class)+'"><div class="'+i.nav+'" >'+a+'</div><div class="'+i.body+'">'+n+"</div></div>"),e.element[0].outerHTML},$event_bind:function(){var e=this,t=e.theme,s=t.active||"active";e.el||(e.element=$("#tab_"+e.random)),e.element.on("click","."+t.nav.replace(/\s+/g,".")+" span",(function(){var a=$(this).index(),n=e.config.list[a];$(this).addClass(s).siblings().removeClass(s),$("#tab_"+e.random+" ."+t.body+">div:eq("+a+")").addClass(s).siblings().removeClass(s),e.active=a,n.init||($("#tab_"+e.random+" ."+t.body+">div:eq("+a+")").html(n.content),n.success&&n.success(),n.init=!0)}))}},new s(e)},load:function(e){var t=bt.get_random(5),s=$('<div class="layui-layer layui-layer-dialog layui-layer-msg layer-anim" id="'+t+'" type="dialog" style="z-index: 99891031;"><div class="layui-layer-content layui-layer-padding"><i class="layui-layer-ico layui-layer-ico16"></i>正在'+e+'，请稍候...</div><span class="layui-layer-setwin"></span></div><div class="layui-layer-shade" id="layer-mask-'+t+'" times="17" style="z-index:99891000; background-color:#000; opacity:0.3; filter:alpha(opacity=30);"></div>'),a="";$("body").append(s);var n=$(window);$(".layer-loading-mask");return(s=$("#"+t)).css({top:(n.height()-64)/2,left:(n.width()-320)/2}),!0===e&&(a=layer.load()),{close:function(){"number"==typeof a?layer.close(a):$("body").find("#"+t+",#layer-mask-"+t).remove()}}},open:function(e){var t,s={},a=null;if("object"==typeof(s=$.extend({type:1,area:"640px",closeBtn:2,btn:["确认","取消"]},e)).content){var n=s.content;a=bt_tools.form(n),s.success=function(t,s){a.$event_bind(),void 0!==e.success&&e.success(t,s,a)},s.yes=function(t,s){var n=a.$verify_form();if(!n)return!1;if(void 0!==e.yes&&!e.yes.apply(a,[n,t,s]))return!1},s.content=a.$reader_content()}return t=layer.open(s),{close:function(){layer.close(t)},form:a}},msg:function(e,t){var s,a="",n={};return"object"==typeof e&&"boolean"==typeof e.status&&(a=e.msg,n={icon:e.status?1:2},e.status||(n=$.extend(n,{time:t?3e3:0,closeBtn:2,shade:.3,shadeClose:!0}))),"string"==typeof e&&(a=e,n={icon:void 0!==t?t:1,shadeClose:!0}),s=layer.msg(a,n),{close:function(){layer.close(s)}}},success:function(e){this.msg({msg:e,status:!0})},error:function(e){this.msg({msg:e,status:!1})},send:function(e,t,s,a,n,i){var l={},o=null,r=null,c=[],p="";function d(e){try{o="function"==c[e][1]?c[e][0]:null,r="function"==c[e+1][1]?c[e+1][0]:null}catch(e){}}switch($.each(arguments,(function(e,t){c.push([t,typeof t])})),(p=c[0])[1]){case"string":$.each(c,(function(e,t){var s=t[0],a=t[1];if(e>1&&("boolean"==a||"string"==a||"object"==a)){var n=p[0].split("/");return l.url="/"+n[0]+"?action="+n[1],"object"==a?(l.load=s.load,l.verify=s.verify,s.plugin&&(l.url="/plugin?action=a&name="+n[0]+"&s="+n[1])):"string"==a&&(l.load=s),!1}l.url=p[0]})),"object"===c[1][1]?(l.data=c[1][0],d(2)):d(1);break;case"object":l.url=p[0].url,l.data=p[0].data||{},$.each(c,(function(e,t){var s=t[0],a=t[1];if(e>1&&("boolean"==a||"string"==a||"object"==a)){switch(a){case"object":l.load=s.load,l.verify=s.verify;break;case"string":l.load=s}return!0}})),"object"===c[1][1]?(l.data=c[1][0],d(2)):d(1)}l.load&&(l.load=this.load(l.load)),$.ajax({type:l.type||"POST",url:l.url,data:l.data||{},dataType:l.dataType||"JSON",complete:function(e){l.load&&l.load.close()},success:function(e){return"boolean"!=typeof l.verify||l.verify?"string"==typeof e?(layer.msg(e,{icon:2,time:0,closeBtn:2}),!1):l.batch?(o&&o(e),!1):!1===e.status&&(e.hasOwnProperty("msg")||e.hasOwnProperty("error_msg"))?(r?r(e):bt_tools.msg({status:e.status,msg:e.hasOwnProperty("msg")?e.msg:e.error_msg}),!1):(l.tips&&bt_tools.msg(e),void(o&&o(e))):(o&&o(e),!1)}})},command_line_output:function(e){var t=this,s=bt.get_random(15);function a(e){var s=this;for(var a in t.commandConnectionPool){var n=t.commandConnectionPool[a],i=$(n.config.el);if(e.shell===n.config.shell&&i.length)return n.el=i,n}return void 0===e&&(e={}),this.config=$.extend({route:"/sock_shell"},e),this.xterm_config=$.extend(this.xterm_config,this.config.xterm),this.el=$(this.config.el),this.open=e.open,this.close=e.close,this.message=e.message,this.config.hasOwnProperty("el")?this.config.hasOwnProperty("shell")?(this.config.hasOwnProperty("time")&&setTimeout((function(){s.close_connect()}),this.config.time),void this.init()):(t.msg({msg:"请输入命令，不可为空",status:!1}),!1):(t.msg({msg:"请输入选择器element，不可为空",status:!1}),!1)}return a.prototype={socket:null,socketToken:null,timeout:0,monitor_interval:2e3,element_detection:null,uuid:s,fragment:[],error:0,retry:0,forceExit:!1,init:function(){var e=bt.get_cookie("commandInputViewUUID"),s=this;if(!this.el[0])return this.error>10||setTimeout((function(){s.init(),this.error++}),2e3),!1;this.error=0,"pre"!==this.el[0].localName?(this.el.append('<pre class="command_output_pre"></pre>'),this.el=this.el.find("pre"),this.config.el=this.config.el+" pre"):this.el.addClass("command_output_pre"),Array.isArray(this.config.area)?this.el.css({width:this.config.area[0],height:this.config.area[1]}):this.el.css({width:"100%",height:"100%"}),e&&void 0!==t.commandConnectionPool[e]&&(t.commandConnectionPool[e].close_connect(),delete t.commandConnectionPool[e]),bt.set_cookie("commandInputViewUUID",this.uuid),this.element_detection=setInterval((function(){$(s.config.el).length||(clearInterval(s.element_detection),s.forceExit=!0,s.close_connect())}),6e4),this.set_full_screen(),this.create_websocket_connect(this.config.route,this.config.shell),this.monitor_element()},create_websocket_connect:function(e,t){var s=this;return this.socket=new WebSocket(("http:"===location.protocol?"ws://":"wss://")+location.host+e),this.socket.addEventListener("open",(function(e){if(!this.socketToken){var a=window.vite_public_request_token;this.socketToken={"x-http-token":a}}this.send(JSON.stringify(this.socketToken)),this.send(t),s.open&&s.open(),s.retry=0})),this.socket.addEventListener("close",(function(e){s.forceExit||(1e3!==e.code&&s.retry<=10&&(s.socket=s.create_websocket_connect(s.config.route,s.config.shell),s.retry++),s.close&&s.close(e))})),this.socket.addEventListener("message",(function(e){var t=e.data;t&&(s.refresh_data(t),s.message&&s.message(t))})),this.socket},set_full_screen:function(){},htmlEncodeByRegExp:function(e){return 0==e.length?"":e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/ /g,"&nbsp;").replace(/\'/g,"&#39;").replace(/\"/g,"&quot;").replace(/\(/g,"&#40;").replace(/\)/g,"&#41;").replace(/`/g,"&#96;").replace(/=/g,"＝")},refresh_data:function(e){var t=this.htmlEncodeByRegExp(e);if(this.el=$(this.config.el),!this.el)return!1;this.fragment.push(t),this.fragment.length>=300?(this.fragment.splice(0,150),this.el.html(this.fragment.join(""))):this.el.append(t),this.el[0]&&this.el.scrollTop(this.el[0].scrollHeight)},monitor_element:function(){var e=this;this.monitor_interval=setInterval((function(){e.el.length||(e.close_connect(),clearInterval(e.monitor_interval))}),e.config.monitorTime||2e3)},close_connect:function(){this.forceExit=!0,this.socket.close(),delete t.commandConnectionPool[this.uuid]}},this.commandConnectionPool[s]=new a(e),this.commandConnectionPool[s]},$clear_verify_tips:function(e){e.removeClass("bt-border-error bt-border-sucess"),layer.close("tips")},$verify_tips:function(e,t,s){void 0===s&&(s=!0),e.removeClass("bt-border-error bt-border-sucess").addClass(s?"bt-border-error":"bt-border-sucess"),e.focus(),layer.tips('<span class="inlineBlock">'+t+"</span>",e,{tips:[1,s?"red":"#20a53a"],time:3e3,area:e.width()})},$verify:function(e,t,s){return e?!0===s?e?" "+t:"":"style"===s?t?t+":"+e+";":e:t?" "+t+'="'+e+'"':" "+e:""},$batch_success_table:function(e){var t=this,s=$(e.html).length;bt.open({type:1,title:e.title,area:e.area||["350px","350px"],shadeClose:!1,closeBtn:2,content:e.content||'<div class="batch_title"><span class><span class="batch_icon"></span><span class="batch_text">'+e.title+'操作完成！</span></span></div><div class="'+(s>4?"fiexd_thead":"")+' batch_tabel divtable" style="margin: 15px 30px 15px 30px;overflow: auto;height: 200px;"><table class="table table-hover"><thead><tr><th>'+e.th+'</th><th style="text-align:right;width:120px;">操作结果</th></tr></thead><tbody>'+e.html+"</tbody></table></div>",success:function(){s>4&&t.$fixed_table_thead(".fiexd_thead")}})},$fixed_table_thead:function(e){$(e).scroll((function(){var e=this.scrollTop;this.querySelector("thead").style.transform="translateY("+(e-1)+"px)"}))},$piugin_view_set:function(e,t){var s=$("string"==typeof e?"#layui-layer"+e:e).hide(),a=$(window);setTimeout((function(){var e=t.width||s.width(),n=t.height||s.height();s.css($.extend(t,{left:(a.width()-e)/2,top:(a.height()-n)/2})).addClass("custom_layer")}),50),setTimeout((function(){s.show()}),500)},nps:function(e){var t='      <div>         <div class="nps-star pd20" style="padding-top: 30px">            <div>              <div class="time-keeping" style="position: absolute;top: 4px;right: 28px;color: #999999;"><span style="color:red;">15&nbsp;</span>秒后自动关闭</div>              <div style="font-size: 14px;text-align: left;color: #000;">您对【'+e.name+'】功能的满意程度？</div>              <div class="star-container">                <div class="star">                  <div class="star-icon">                      <svg width="30" height="30" data-attr="1" style="color: #cccccc" viewBox="0 0 152.249 145.588" fill="none" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">                        <desc>                          Created with Pixso.                        </desc>                        <defs/>                        <path id="矢量 104" d="M68.5163 5.52759L56.0289 43.9553C54.9577 47.2512 51.8863 49.4829 48.4207 49.4829L8.01495 49.4844C0.265564 49.4844 -2.95648 59.4011 3.31281 63.9564L36.0008 87.7075C38.8045 89.7446 39.9776 93.3553 38.9068 96.6514L26.4222 135.08C24.0278 142.45 32.4632 148.579 38.7328 144.024L71.4227 120.275C74.2265 118.239 78.0229 118.239 80.8267 120.275L113.517 144.024C119.786 148.579 128.222 142.45 125.827 135.08L113.343 96.6514C112.272 93.3553 113.445 89.7446 116.249 87.7075L148.937 63.9563C155.206 59.4011 151.984 49.4844 144.234 49.4844L103.829 49.4829C100.363 49.4829 97.2916 47.2512 96.2205 43.9553L83.7331 5.52759C81.3381 -1.84253 70.9113 -1.84253 68.5163 5.52759Z"                           fill-rule="evenodd"                           fill="currentColor"                        />                      </svg>                  </div>                  <div class="star-title" style="color: #FFFFFF">很不满意</div>                </div>                <div class="star">                  <div class="star-icon">                      <svg width="30" height="30" data-attr="2" style="color: #cccccc" viewBox="0 0 152.249 145.588" fill="none" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">                        <desc>                          Created with Pixso.                        </desc>                        <defs/>                        <path id="矢量 104" d="M68.5163 5.52759L56.0289 43.9553C54.9577 47.2512 51.8863 49.4829 48.4207 49.4829L8.01495 49.4844C0.265564 49.4844 -2.95648 59.4011 3.31281 63.9564L36.0008 87.7075C38.8045 89.7446 39.9776 93.3553 38.9068 96.6514L26.4222 135.08C24.0278 142.45 32.4632 148.579 38.7328 144.024L71.4227 120.275C74.2265 118.239 78.0229 118.239 80.8267 120.275L113.517 144.024C119.786 148.579 128.222 142.45 125.827 135.08L113.343 96.6514C112.272 93.3553 113.445 89.7446 116.249 87.7075L148.937 63.9563C155.206 59.4011 151.984 49.4844 144.234 49.4844L103.829 49.4829C100.363 49.4829 97.2916 47.2512 96.2205 43.9553L83.7331 5.52759C81.3381 -1.84253 70.9113 -1.84253 68.5163 5.52759Z"                           fill-rule="evenodd"                           fill="currentColor"                        />                      </svg>                  </div>                  <div class="star-title" style="color: #FFFFFF">不满意</div>                </div>                <div class="star">                  <div class="star-icon">                      <svg width="30" height="30" data-attr="3" style="color: #cccccc" viewBox="0 0 152.249 145.588" fill="none" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">                        <desc>                          Created with Pixso.                        </desc>                        <defs/>                        <path id="矢量 104" d="M68.5163 5.52759L56.0289 43.9553C54.9577 47.2512 51.8863 49.4829 48.4207 49.4829L8.01495 49.4844C0.265564 49.4844 -2.95648 59.4011 3.31281 63.9564L36.0008 87.7075C38.8045 89.7446 39.9776 93.3553 38.9068 96.6514L26.4222 135.08C24.0278 142.45 32.4632 148.579 38.7328 144.024L71.4227 120.275C74.2265 118.239 78.0229 118.239 80.8267 120.275L113.517 144.024C119.786 148.579 128.222 142.45 125.827 135.08L113.343 96.6514C112.272 93.3553 113.445 89.7446 116.249 87.7075L148.937 63.9563C155.206 59.4011 151.984 49.4844 144.234 49.4844L103.829 49.4829C100.363 49.4829 97.2916 47.2512 96.2205 43.9553L83.7331 5.52759C81.3381 -1.84253 70.9113 -1.84253 68.5163 5.52759Z"                           fill-rule="evenodd"                           fill="currentColor"                        />                      </svg>                  </div>                  <div class="star-title" style="color: #FFFFFF">一般</div>                </div>                <div class="star">                  <div class="star-icon">                      <svg width="30" height="30" data-attr="4" style="color: #cccccc" viewBox="0 0 152.249 145.588" fill="none" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">                        <desc>                          Created with Pixso.                        </desc>                        <defs/>                        <path id="矢量 104" d="M68.5163 5.52759L56.0289 43.9553C54.9577 47.2512 51.8863 49.4829 48.4207 49.4829L8.01495 49.4844C0.265564 49.4844 -2.95648 59.4011 3.31281 63.9564L36.0008 87.7075C38.8045 89.7446 39.9776 93.3553 38.9068 96.6514L26.4222 135.08C24.0278 142.45 32.4632 148.579 38.7328 144.024L71.4227 120.275C74.2265 118.239 78.0229 118.239 80.8267 120.275L113.517 144.024C119.786 148.579 128.222 142.45 125.827 135.08L113.343 96.6514C112.272 93.3553 113.445 89.7446 116.249 87.7075L148.937 63.9563C155.206 59.4011 151.984 49.4844 144.234 49.4844L103.829 49.4829C100.363 49.4829 97.2916 47.2512 96.2205 43.9553L83.7331 5.52759C81.3381 -1.84253 70.9113 -1.84253 68.5163 5.52759Z"                           fill-rule="evenodd"                           fill="currentColor"                        />                      </svg>                  </div>                  <div class="star-title" style="color: #FFFFFF">满意</div>                </div>                <div class="star">                  <div class="star-icon">                      <svg width="30" height="30" data-attr="5" style="color: #cccccc" viewBox="0 0 152.249 145.588" fill="none" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">                        <desc>                          Created with Pixso.                        </desc>                        <defs/>                        <path id="矢量 104" d="M68.5163 5.52759L56.0289 43.9553C54.9577 47.2512 51.8863 49.4829 48.4207 49.4829L8.01495 49.4844C0.265564 49.4844 -2.95648 59.4011 3.31281 63.9564L36.0008 87.7075C38.8045 89.7446 39.9776 93.3553 38.9068 96.6514L26.4222 135.08C24.0278 142.45 32.4632 148.579 38.7328 144.024L71.4227 120.275C74.2265 118.239 78.0229 118.239 80.8267 120.275L113.517 144.024C119.786 148.579 128.222 142.45 125.827 135.08L113.343 96.6514C112.272 93.3553 113.445 89.7446 116.249 87.7075L148.937 63.9563C155.206 59.4011 151.984 49.4844 144.234 49.4844L103.829 49.4829C100.363 49.4829 97.2916 47.2512 96.2205 43.9553L83.7331 5.52759C81.3381 -1.84253 70.9113 -1.84253 68.5163 5.52759Z"                           fill-rule="evenodd"                           fill="currentColor"                        />                      </svg>                  </div>                  <div class="star-title" style="color: #FFFFFF">非常满意</div>                </div>              </div>              <div class="nps-content">                  <textarea style="width: 100%;height: 100px;" placeholder="您对'+e.name+'有什么改进的方向和建议?"></textarea>              </div>'+("网站"===e.name?'<div class="mtb10 c6">如遇BUG问题请联系QQ群：<a class="btlink" title="宝塔面板交流群-2群" href="https://qm.qq.com/cgi-bin/qm/qr?k=pDI9rilMP7Bcf8NcXlk_9ar3_sTLEuaZ&jump_from=webapi&authKey=jLsyfgvmymKrdZrhWRAr3bTn8DkPA/PsqQ+cWw17PvbaKPcy+SteMP8ZmGVZW3yL" target="_blank">435590797</a></div>':"")+'<div class="nps-submit">                <button class="btn btn-sm btn-success" style="width: 100%;height: 38px;">提交反馈</button>              </div>            </div>         </div>      </div>',s=0;function a(){var e=$(this).data("attr");s=e,$(this).parents(".star-container").find(".star-icon svg").each((function(t,s){t<e?(e<=2?$(s).css("color","#EF0808"):e<=3&&$(s).css("color","#F0AD4E"),e>=4&&$(s).css("color","#20A53A")):$(s).css("color","#cccccc")}))}function n(e,t,s){e==t-1?t<=2?$(s).parent().next().css({color:"#EF0808","background-color":"rgba(239, 8, 8, 0.05)",border:"1px solid rgb(239 8 8 / 26%)"}):t<=3?$(s).parent().next().css({color:"#f7be56","background-color":"rgb(247 190 86 / 17%)",border:"1px solid rgb(247 190 86 / 26%)"}):$(s).parent().next().css({color:"#69be3d","background-color":"rgb(105 190 61 / 17%)",border:"1px solid rgb(105 190 61 / 26%)"}):$(s).parent().next().removeAttr("style")}function i(){var e=$(this).data("attr");$(this).parents(".star-container").find(".star-icon svg").each((function(t,s){n(t,e,s)}))}var l=!1;function o(e){$(".nps-content textarea").removeClass("textarea-error"),$(".nps-content textarea").next().remove(),e.find(".nps-star .star-icon svg").hover((function(){clearTimeout(null);var e=$(this).data("attr");$(this).parent().next().show(),$(this).parents(".star-container").find(".star-icon svg").each((function(t,s){n(t,e,s),t<e?(e<=2?$(s).css("color","#ed6d68"):e<=3&&$(s).css("color","#f7be56"),e>=4&&$(s).css("color","#69be3d")):$(s).css("color","#cccccc")}))}),(function(){a.call(this)}))}layer.open({type:1,content:t,area:["310px"],title:"",id:"nps",shade:0,cancel:function(e,t){l=!0,$(".nps-submit button").click()},success:function(t,n){t.find(".nps-star .star-icon svg").parents(".star-container").find(".star-icon svg").each((function(e,t){0==e&&$(t).parent().next().css({color:"#EF0808","background-color":"rgba(239, 8, 8, 0.05)",border:"1px solid rgb(239 8 8 / 26%)"}),2==e&&$(t).parent().next().css({color:"#f7be56","background-color":"rgb(247 190 86 / 17%)",border:"1px solid rgb(247 190 86 / 26%)"}),4==e&&$(t).parent().next().css({color:"#69be3d","background-color":"rgb(105 190 61 / 17%)",border:"1px solid rgb(105 190 61 / 26%)"})}));var r=15,c=setInterval((function(){0==--r&&(l=!0,$(".nps-submit button").click(),clearInterval(c)),$(".time-keeping").html('<span style="color: red">'+r+"</span>&nbsp;秒后自动关闭")}),1e3);function p(e,t){bt_tools.send({url:"config?action=write_nps_new",data:e},(function(e){layer.close(n),e.status&&t&&layer.open({title:!1,btn:!1,shadeClose:!0,shade:.1,closeBtn:0,skin:"qa_thank_dialog",area:"230px",content:'<div class="qa_thank_box" style="background-color:#F1F9F3;text-align: center;padding: 20px 0;"><img src="/static/img/feedback/QA_like.png" style="width: 55px;"><p style="margin-top: 15px;">感谢您的参与!</p></div>',success:function(e,t){$(e).find(".layui-layer-content").css({padding:"0","border-radius":"5px"}),$(e).css({"border-radius":"5px","min-width":"230px"}),setTimeout((function(){layer.close(t)}),3e3)}})}))}$(".time-keeping"),t.hover((function(){clearInterval(c),$(".time-keeping").hide()})),o(t),$(".nps-content textarea").focus((function(){0!=s&&$(".nps-star .star-icon svg").unbind("mouseenter").unbind("mouseleave")})),$(".nps-content textarea").blur((function(){o(t)})),$(".nps-star .star-icon svg").click((function(){i.call(this),a.call(this);$(this).data("attr");$(".nps-content textarea").focus()})),bt_tools.send({url:"config?action=get_nps_new",data:{version:-1,product_type:e.type}},(function(t){var a=t.msg[0],n={};$(".nps-submit button").click((function(){n[a.id]=$(".nps-content textarea").val();var t={rate:s,product_type:e.type,software_name:e.soft,questions:JSON.stringify(n)};if(l)t.rate=0,p(t,!1);else{if(0==s)return layer.msg("打个分数再提交吧，麻烦您了~",{icon:0}),!1;""==$(".nps-content textarea").val()?($(".nps-content textarea").addClass("textarea-error").focus(),0==$(".nps-content textarea").next().length&&$(".nps-content textarea").after('<span style="color: red;position: absolute;top: 222px;left: 22px;">请填写下您的建议再提交吧，麻烦您了~</span>')):($(".nps-content textarea").css("border","1px solid #ccc"),$(".nps-content textarea").next().remove(),p(t,!0))}}))}))}})}},Term={bws:null,route:"/webssh",term:null,term_box:null,ssh_info:{},last_body:!1,last_cd:null,config:{cols:0,rows:0,fontSize:12},detectZoom:function(){var e=0,t=window.screen,s=navigator.userAgent.toLowerCase();return void 0!==window.devicePixelRatio?e=window.devicePixelRatio:~s.indexOf("msie")?t.deviceXDPI&&t.logicalXDPI&&(e=t.deviceXDPI/t.logicalXDPI):void 0!==window.outerWidth&&void 0!==window.innerWidth&&(e=window.outerWidth/window.innerWidth),e&&(e=Math.round(100*e)),e}(),connect:function(){Term.bws&&3!=Term.bws.readyState&&2!=Term.bws.readyState||(ws_url=("http:"===window.location.protocol?"ws://":"wss://")+window.location.host+Term.route,Term.bws=new WebSocket(ws_url),Term.bws.addEventListener("message",Term.on_message),Term.bws.addEventListener("close",Term.on_close),Term.bws.addEventListener("error",Term.on_error),Term.bws.addEventListener("open",Term.on_open))},on_open:function(e){var t=window.vite_public_request_token;Term.send(JSON.stringify({"x-http-token":t})),"{}"!==JSON.stringify(Term.ssh_info)&&Term.send(JSON.stringify(Term.ssh_info)),Term.resize();var s=$("#fileInputPath").val()||getCookie("Path");s&&(Term.last_cd="cd "+s,Term.send(Term.last_cd+"\n"))},on_message:function(e){if(result=e.data,(-1!=result.indexOf("@127.0.0.1:")||-1!=result.indexOf("@localhost:"))&&-1!=result.indexOf("Authentication failed"))return Term.term.write(result),Term.localhost_login_form(),void Term.close();Term.last_cd&&-1!=result.indexOf(Term.last_cd)&&result.length-Term.last_cd.length<3?Term.last_cd=null:"\r服务器连接失败!\r"!==result&&"\r用户名或密码错误!\r"!=result?(result.length>1&&!1===Term.last_body&&(Term.last_body=!0),Term.term.write(result),"\r\n登出\r\n"!=result&&"\r\n注销\r\n"!=result&&"注销\r\n"!=result&&"登出\r\n"!=result&&"\r\nlogout\r\n"!=result&&"logout\r\n"!=result||(setTimeout((function(){layer.close(Term.term_box),Term.term.dispose()}),500),Term.close(),Term.bws=null)):Term.close()},on_close:function(e){Term.bws=null},on_error:function(e){if(3===e.target.readyState){if(3===Term.state)return;Term.term.write(msg),Term.state=3}},close:function(){Term.bws&&Term.bws.close()},resize:function(){$("#term").height($(".term_box_all .layui-layer-content").height()-30),setTimeout((function(){Term.term.FitAddon.fit(),Term.send(JSON.stringify({resize:1,rows:Term.term.rows,cols:Term.term.cols})),Term.term.focus()}),400)},send:function(e,t){if(Term.bws&&3!=Term.bws.readyState&&2!=Term.bws.readyState||Term.connect(),1===Term.bws.readyState)Term.bws.send(e);else{if(3===Term.state)return;t||(t=0),t<5&&(t++,setTimeout((function(){Term.send(e,t++)}),100))}},run:function(e){var t=layer.msg("正在加载终端所需文件，请稍候...",{icon:16,time:0,shade:.3});layer.close(t),Term.term=new Terminal({rendererType:"canvas",cols:100,rows:34,fontSize:15,screenKeys:!0,useStyle:!0}),Term.term.setOption("cursorBlink",!0),Term.last_body=!1,Term.term_box=layer.open({type:1,title:"宝塔终端",area:["930px","640px"],closeBtn:2,shadeClose:!1,skin:"term_box_all",content:'<link rel="stylesheet" href="/static/css/xterm.css" />            <div class="term-box" style="background-color:#000" id="term"></div>',cancel:function(e,t){return bt.confirm({msg:"关闭SSH会话后，当前命令行会话正在执行的命令可能被中止，确定关闭吗？",title:"确定要关闭SSH会话吗？"},(function(t){Term.term.dispose(),layer.close(e),layer.close(t),Term.close()})),!1},success:function(){$(".term_box_all").css("background-color","#000"),Term.term.open(document.getElementById("term")),Term.term.FitAddon=new FitAddon.FitAddon,Term.term.loadAddon(Term.term.FitAddon),Term.term.WebLinksAddon=new WebLinksAddon.WebLinksAddon,Term.term.loadAddon(Term.term.WebLinksAddon),Term.term.focus()}}),Term.term.onData((function(e){try{Term.bws.send(e)}catch(e){Term.term.write("\r\n连接丢失,正在尝试重新连接!\r\n"),Term.connect()}})),e&&(Term.ssh_info=e),Term.connect()},reset_login:function(){var e={data:JSON.stringify({host:$("input[name='host']").val(),port:$("input[name='port']").val(),username:$("input[name='username']").val(),password:$("input[name='password']").val()})};bt_tools.send({url:"/term_open",data:e},(function(e){!1!==e.status?(layer.closeAll(),Term.connect(),Term.term.scrollToBottom(),Term.term.focus()):layer.msg(e.msg)}),{verify:!1})},localhost_login_form:function(){$(".term-box").after('<div class="localhost-form-shade"><div class="localhost-form-view bt-form-2x"><div class="localhost-form-title"><i class="localhost-form_tip"></i><span style="vertical-align: middle;">无法自动认证，请填写本地服务器的登录信息!</span></div>        <div class="line input_group">            <span class="tname">服务器IP</span>            <div class="info-r">                <input type="text" name="host" class="bt-input-text mr5" style="width:240px" placeholder="输入服务器IP" value="127.0.0.1" autocomplete="off" />                <input type="text" name="port" class="bt-input-text mr5" style="width:60px" placeholder="端口" value="22" autocomplete="off"/>            </div>        </div>        <div class="line">            <span class="tname">SSH账号</span>            <div class="info-r">                <input type="text" name="username" class="bt-input-text mr5" style="width:305px" placeholder="输入SSH账号" value="root" autocomplete="off"/>            </div>        </div>        <div class="line">            <span class="tname">验证方式</span>            <div class="info-r ">                <div class="btn-group">                    <button type="button" tabindex="-1" class="btn btn-sm auth_type_checkbox btn-success" data-ctype="0">密码验证</button>                    <button type="button" tabindex="-1" class="btn btn-sm auth_type_checkbox btn-default data-ctype="1">私钥验证</button>                </div>            </div>        </div>        <div class="line c_password_view show">            <span class="tname">密码</span>            <div class="info-r">                <input type="text" name="password" class="bt-input-text mr5" placeholder="请输入SSH密码" style="width:305px;" value="" autocomplete="off"/>            </div>        </div>        <div class="line c_pkey_view hidden">            <span class="tname">私钥</span>            <div class="info-r">                <textarea rows="4" name="pkey" class="bt-input-text mr5" placeholder="请输入SSH私钥" style="width:305px;height: 80px;line-height: 18px;padding-top:10px;"></textarea>            </div>        </div><button type="submit" class="btn btn-sm btn-success">登录</button></div></div>'),$(".auth_type_checkbox").click((function(){var e=$(this).index();switch($(this).addClass("btn-success").removeClass("btn-default").siblings().removeClass("btn-success").addClass("btn-default"),e){case 0:$(".c_password_view").addClass("show").removeClass("hidden"),$(".c_pkey_view").addClass("hidden").removeClass("show").find("input").val("");break;case 1:$(".c_password_view").addClass("hidden").removeClass("show").find("input").val(""),$(".c_pkey_view").addClass("show").removeClass("hidden")}})),$(".localhost-form-view > button").click((function(){var e={};$(".localhost-form-view input,.localhost-form-view textarea").each((function(t,s){var a=$(this).attr("name"),n=$(this).val();switch(e[a]=n,a){case"port":if(!bt.check_port(n))return bt.msg({status:!1,msg:"服务器端口格式错误！"}),!1;break;case"username":if(""==n)return bt.msg({status:!1,msg:"服务器用户名不能为空!"}),!1;break;case"password":if(""==n&&$(".c_password_view").hasClass("show"))return bt.msg({status:!1,msg:"服务器密码不能为空!"}),!1;break;case"pkey":if(""==n&&$(".c_pkey_view").hasClass("show"))return bt.msg({status:!1,msg:"服务器秘钥不能为空!"}),!1}})),e.ps="本地服务器";var t=bt.load("正在添加服务器信息，请稍候...");bt.send("create_host","xterm/create_host",e,(function(e){t.close(),bt.msg(e),e.status&&(bt.msg({status:!0,msg:"登录成功！"}),$(".layui-layer-shade").remove(),$(".term_box_all").remove(),Term.term.dispose(),Term.close(),web_shell())}))})),$('.localhost-form-view [name="password"]').keyup((function(e){13==e.keyCode&&$(".localhost-form-view > button").click()})).focus()}},win_mount={ajaxSetup:function(){var e={},t=window.vite_public_request_token;t&&(e["x-http-token"]=t);var s=0==window.location.protocol.indexOf("https:")?"https_request_token":"request_token";request_token_cookie=bt.get_cookie(s),request_token_cookie&&(e["x-cookie-token"]=request_token_cookie),e&&($.ajaxSetup({headers:e,error:function(e,t,s){var a=parseInt(bt.get_cookie("pro_end")||-1),n=parseInt(bt.get_cookie("ltd_end")||-1);if(isBuy=!1,(0==a||n>0)&&(isBuy=!0),!(e.responseText.indexOf("404 Not Found")>-1)&&e.responseText)if("string"!=typeof e.responseText||(-1==e.responseText.indexOf("/static/favicon.ico")||-1==e.responseText.indexOf("/static/img/qrCode.png"))&&0!==e.responseText.indexOf("<!DOCTYPE html>")){if(void 0===String.prototype.trim&&(String.prototype.trim=function(){return String(this).replace(/^\s+|\s+$/g,"")}),error_key="We need to make sure this has a favicon so that the debugger does",error_find=e.responseText.indexOf(error_key),gl_error_body=e.responseText,500!=e.status||-1==e.responseText.indexOf("运行时发生错误"))return"Internal Server Error"!=e.responseText&&(showErrorMessage(),!1);-1!=e.responseText.indexOf("建议按顺序逐一尝试以下解决方案")?error_msg=e.responseText.split("Error: ")[1].split("</pre>")[0].replace("面板运行时发生错误:","").replace("public.PanelError:","").trim():(error_msg="<h3>"+e.responseText.split("<h3>")[1].split("</h3>")[0]+"</h3>",error_msg+='<a style="color:dimgrey;font-size:none">'+e.responseText.split('<h4 style="font-size: none;">')[1].split("</h4>")[0].replace("面板运行时发生错误:","").replace("public.PanelError:","").trim()+"</a>"),error_msg+="<br><a class='btlink' onclick='showErrorMessage()'> >>点击查看详情</a>"+(isBuy?"<span class='ml33'><span class='wechatEnterpriseService' style='vertical-align: middle;'></span><span class='btlink error_kefu_consult'>微信客服</span>":"")+"</span>",$(".layui-layer-padding").parents(".layer-anim").remove(),$(".layui-layer-shade").remove(),setTimeout((function(){layer.open({title:!1,content:error_msg,closeBtn:2,btn:!1,shadeClose:!1,shade:.3,icon:2,area:"600px",success:function(){$("pre").scrollTop(1e11),$(".error_kefu_consult").click((function(){bt.onlineService()}))}})}),100)}else window.location.href="/login"}}),$.ajaxPrefilter((function(e){window.plugin_view.isDev()&&(e.url=`/api/${e.url}`.replace("//","/"),"POST"===e.type.toUpperCase()&&(e.data=$.param($.extend(e.data,window.plugin_view.getToken()))))})))},showErrorMessage:function(e,t,s){var a;if(e&&(error_find=t,gl_error_body=e,isBuy=s),-1!=error_find){var n=(a=gl_error_body.split("\x3c!--")[2].replace("--\x3e","")).split("During handling of the above exception, another exception occurred:");a=n[n.length-1],error_msg='<div class="pd20">        <h3 style="margin-bottom: 10px;">出错了，面板运行时发生错误！</h3>        <pre style="height:435px;word-wrap: break-word;white-space: pre-wrap;margin: 0 0 0px">'+a.trim()+'</pre>        <ul class="help-info-text err_project_ul" style="display:inline-block">          <li style="list-style: none;"><b>很抱歉，面板运行时意外发生错误，请尝试按以下顺序尝试解除此错误：</b></li>          <li style="list-style: none;">修复方案一：在[首页]右上角点击修复面板，并退出面板重新登录。</li>          <li style="list-style: none;">修复方案二：如上述尝试未能解除此错误，请截图此窗口到宝塔论坛发贴寻求帮助, 论坛地址：<a class="btlink" href="https://www.bt.cn/bbs" target="_blank">https://www.bt.cn/bbs</a><a href="javascript:;" class="btlink mlr15 copy_error">点击复制错误信息</a></li>          <li style="list-style: none;display:'+(isBuy?"block":"none")+'">修复方案三(<span style="color:#ff7300">推荐</span>)：使用微信扫描右侧二维码，联系技术客服。</li>        </ul>        <div style="position: relative;margin-top: 20px;margin-right: 40px;text-align: center;font-size: 12px;display:'+(isBuy?"block":"none")+'" class="pull-right">          <span id="err_kefu_img" style="padding: 5px;border: 1px solid #20a53a;display: inline-block;height: 113px;"><img src="/static/images/customer-qrcode.png" alt="qrcode" style="width:100px;width:100px;" /></span>          <div>【微信客服】</div>        </div>      </div>',$(".layui-layer-padding").parents(".layer-anim").remove(),$(".layui-layer-shade").remove()}else error_msg=gl_error_body;setTimeout((function(){layer.open({type:1,title:!1,content:error_msg,closeBtn:2,area:["1200px",-1!=error_find?isBuy?"670px":"625px":isBuy?"750px":"720px"],btn:!1,shadeClose:!1,shade:.3,success:function(e){$("pre").scrollTop(1e11),$(e).find(".layui-layer-content").find(".err_project_ul li").css("line-height","32px"),isBuy&&$(".consult_project").show(),$(e).find(".repairPanel").unbind("click").click((function(){layer.confirm(lan.index.rep_panel_msg,{title:lan.index.rep_panel_title,closeBtn:2,icon:3},(function(){bt.system.rep_panel((function(e){e.status?bt.msg({msg:lan.index.rep_panel_ok,icon:1}):bt.msg(e)}))}))})),$(e).find(".copy_error").click((function(){var t="";t=-1!=error_find?$(e).find("pre").eq(0).text():$(e).find("pre").eq(0).text()+"\n"+$(e).find("pre").eq(1).text(),bt.pub.copy_pass(t)}))}})}),100)},RandomStrPwd:function(e){e=e||32;for(var t="AaBbCcDdEeFfGHhiJjKkLMmNnPpRSrTsWtXwYxZyz2345678";;){var s="";for(i=0;i<e;i++)s+=t.charAt(Math.floor(48*Math.random()));if(/^(?:(?=.*[A-Z])(?=.*[a-z])(?=.*[0-9]))/.test(s))return s}},ToSize:function(e){for(var t=[" B"," KB"," MB"," GB"," TB"," PB"],s=0;s<t.length;s++){if(e<1024)return(0==s?e:e.toFixed(2))+t[s];e/=1024}},getLocalTime:function(e){return(e=e.toString()).length>10&&(e=e.substring(0,10)),new Date(1e3*parseInt(e)).format("yyyy/MM/dd hh:mm:ss")},isChineseChar:function(e){return/[\u4E00-\u9FA5\uF900-\uFA2D]/.test(e)},ChangePath:function(e){getCookie("SetId",e),getCookie("SetName","");var t=layer.open({type:1,area:"750px",title:lan.bt.dir,closeBtn:2,shift:5,shadeClose:!1,content:"<div class='changepath'><div class='path-top'><button type='button' class='btn btn-default btn-sm' onclick='BackFile()'><span class='glyphicon glyphicon-share-alt'></span> "+lan.public.return+"</button><div class='place' id='PathPlace'>"+lan.bt.path+"：<span></span></div></div><div class='path-con'><div class='path-con-left'><dl><dt id='changecomlist' onclick='BackMyComputer()'>"+lan.bt.comp+"</dt></dl></div><div class='path-con-right'><ul class='default' id='computerDefautl'></ul><div class='file-list divtable'><table class='table table-hover' style='border:0 none'><thead><tr class='file-list-head'><th width='40%'>"+lan.bt.filename+"</th><th width='20%'>"+lan.bt.etime+"</th><th width='10%'>"+lan.bt.access+"</th><th width='10%'>"+lan.bt.own+"</th><th width='10%'></th></tr></thead><tbody id='tbody' class='list-list'></tbody></table></div></div></div></div><div class='getfile-btn' style='margin-top:0'><button type='button' class='btn btn-default btn-sm pull-left' onclick='CreateFolder()'>"+lan.bt.adddir+"</button><button type='button' class='btn btn-danger btn-sm mr5' onclick=\"layer.close(getCookie('ChangePath'))\">"+lan.public.close+"</button> <button type='button' class='btn btn-success btn-sm' onclick='GetfilePath()'>"+lan.bt.path_ok+"</button></div>",success:function(){getCookie("ChangePath",t);var s=$("#"+e).val();tmp=s.split("."),tmp=s.split("/"),s="";for(var a=0;a<tmp.length-1;a++)s+="/"+tmp[a];getCookie("SetName",tmp[tmp.length-1]),s=s.replace(/\/\//g,"/"),GetDiskList(s),ActiveDisk()}})},GetDiskList:function(e){var t="",s="";bt.send("GetDir","files/GetDir",{path:e,disk:"True",showRow:500},(function(e){if(null!=e.DISK){for(var a=0;a<e.DISK.length;a++)s+="<dd onclick=\"GetDiskList('"+e.DISK[a].path+"')\"><span class='glyphicon glyphicon-hdd'></span>&nbsp;<span>"+e.DISK[a].path+"</span></div></dd>";$("#changecomlist").html(s)}for(a=0;a<e.DIR.length;a++){(i=(n=e.DIR[a].split(";"))[0]).length>20&&(i=i.substring(0,20)+"..."),isChineseChar(i)&&i.length>10&&(i=i.substring(0,10)+"..."),t+="<tr><td onclick=\"GetDiskList('"+e.PATH+"/"+n[0]+"')\" title='"+n[0]+"'><span class='glyphicon glyphicon-folder-open'></span>"+i+"</td><td>"+getLocalTime(n[2])+"</td><td>"+n[3]+"</td><td>"+n[4]+"</td><td><span class='delfile-btn' onclick=\"NewDelFile('"+e.PATH+"/"+n[0]+"')\">X</span></td></tr>"}if(null!=e.FILES&&""!=e.FILES)for(a=0;a<e.FILES.length;a++){var n,i;(i=(n=e.FILES[a].split(";"))[0]).length>20&&(i=i.substring(0,20)+"..."),isChineseChar(i)&&i.length>10&&(i=i.substring(0,10)+"..."),t+="<tr><td title='"+n[0]+"'><span class='glyphicon glyphicon-file'></span><span>"+i+"</span></td><td>"+getLocalTime(n[2])+"</td><td>"+n[3]+"</td><td>"+n[4]+"</td><td></td></tr>"}$(".default").hide(),$(".file-list").show(),$("#tbody").html(t),"/"!=e.PATH.substr(e.PATH.length-1,1)&&(e.PATH+="/"),$("#PathPlace").find("span").html(e.PATH),ActiveDisk()}))},CreateFolder:function(){var e="<tr><td colspan='2'><span class='glyphicon glyphicon-folder-open'></span> <input id='newFolderName' class='newFolderName' type='text' value=''></td><td colspan='3'><button id='nameOk' type='button' class='btn btn-success btn-sm'>"+lan.public.ok+"</button>&nbsp;&nbsp;<button id='nameNOk' type='button' class='btn btn-default btn-sm'>"+lan.public.cancel+"</button></td></tr>";0==$("#tbody tr").length?$("#tbody").append(e):$("#tbody tr:first-child").before(e),$(".newFolderName").focus(),$("#nameOk").click((function(){var e=$("#newFolderName").val(),t=$("#PathPlace").find("span").text();newTxt=t.replace(new RegExp(/(\/\/)/g),"/")+e;newTxt;bt.send("CreateDir","files/CreateDir",{path:newTxt},(function(e){1==e.status?layer.msg(e.msg,{icon:1}):layer.msg(e.msg,{icon:2}),$("#btn_refresh").click()}))})),$("#nameNOk").click((function(){$(this).parents("tr").remove()}))},NewDelFile:function(e){var t=$("#PathPlace").find("span").text();newTxt=e.replace(new RegExp(/(\/\/)/g),"/");newTxt;bt.send("DeleteDir","files/DeleteDir",{path:newTxt,empty:"True"},(function(e){1==e.status?layer.msg(e.msg,{icon:1}):layer.msg(e.msg,{icon:2}),this.get_file_list(t)}))},ActiveDisk:function(){switch($("#PathPlace").find("span").text().substring(0,1)){case"C":$(".path-con-left dd:nth-of-type(1)").css("background","#eee").siblings().removeAttr("style");break;case"D":$(".path-con-left dd:nth-of-type(2)").css("background","#eee").siblings().removeAttr("style");break;case"E":$(".path-con-left dd:nth-of-type(3)").css("background","#eee").siblings().removeAttr("style");break;case"F":$(".path-con-left dd:nth-of-type(4)").css("background","#eee").siblings().removeAttr("style");break;case"G":$(".path-con-left dd:nth-of-type(5)").css("background","#eee").siblings().removeAttr("style");break;case"H":$(".path-con-left dd:nth-of-type(6)").css("background","#eee").siblings().removeAttr("style");break;default:$(".path-con-left dd").removeAttr("style")}},BackMyComputer:function(){$(".default").show(),$(".file-list").hide(),$("#PathPlace").find("span").html(""),ActiveDisk()},BackFile:function(){var e=$("#PathPlace").find("span").text();"/"==e.substr(e.length-1,1)&&(e=e.substr(0,e.length-1));var t=e.split("/"),s="";if(t.length>1){for(var a=t.length-1,n=0;n<a;n++)s+=t[n]+"/";GetDiskList(s.replace("//","/"))}else s=t[0]},GetfilePath:function(){var e=$("#PathPlace").find("span").text();e=e.replace(new RegExp(/(\\)/g),"/"),setCookie("path_dir_change",e),$("#"+getCookie("SetId")).val(e+getCookie("SetName")),layer.close(getCookie("ChangePath"))},setCookie:function(e,t){bt.set_cookie(e,t)},getCookie:function(e){return bt.get_cookie(e)},openPath:function(e){setCookie("Path",e),bt.refreshMain(window.location.origin+"/files")},fileSuffixType:function(e){var t=e.split("."),s=t[t.length-1],a={Apache_Conf:["^htaccess|^htgroups|^htpasswd|^conf|htaccess|htgroups|htpasswd"],BatchFile:["bat|cmd"],C_Cpp:["cpp|c|cc|cxx|h|hh|hpp|ino"],CSharp:["cs"],CSS:["css"],Dockerfile:["^Dockerfile"],golang:["go"],HTML:["html|htm|xhtml|vue|we|wpy"],Java:["java"],JavaScript:["js|jsm|jsx"],JSON:["json"],JSP:["jsp"],LESS:["less"],Lua:["lua"],Makefile:["^Makefile|^GNUmakefile|^makefile|^OCamlMakefile|make"],Markdown:["md|markdown"],MySQL:["mysql"],Nginx:["nginx|conf"],INI:["ini|conf|cfg|prefs"],ObjectiveC:["m|mm"],Perl:["pl|pm"],Perl6:["p6|pl6|pm6"],pgSQL:["pgsql"],PHP_Laravel_blade:["blade.php"],PHP:["php|inc|phtml|shtml|php3|php4|php5|phps|phpt|aw|ctp|module"],Powershell:["ps1"],Python:["py"],R:["r"],Ruby:["rb|ru|gemspec|rake|^Guardfile|^Rakefile|^Gemfile"],Rust:["rs"],SASS:["sass"],SCSS:["scss"],SH:["sh|bash|^.bashrc"],SQL:["sql"],SQLServer:["sqlserver"],Swift:["swift"],Text:["txt"],Typescript:["ts|typescript|str"],VBScript:["vbs|vb"],Verilog:["v|vh|sv|svh"],XML:["xml|rdf|rss|wsdl|xslt|atom|mathml|mml|xul|xbl|xaml"],YAML:["yaml|yml"],Compress:["tar|zip|7z|rar|gz|arj|z"],images:["icon|jpg|jpeg|png|bmp|gif|tif|emf"]},n="";for(var i in a){var l=new RegExp(a[i].join("|"),"i");l.test(s)&&(n=i),console.log(l)}return n},OnlineEditFile:function(e,t){bt.pub.on_edit_file(e,t,fileSuffixType(t))},SafeMessage:function(e,t,s,a){null==a&&(a="");var n=Math.round(9*Math.random()+1),i=Math.round(9*Math.random()+1),l=[];sumtext=n+" + "+i,setCookie("vcodesum",n+i);var o=layer.open({type:1,title:e,area:"350px",closeBtn:2,shadeClose:!0,content:"<div class='bt-form webDelete pd20 pb70'><p>"+t+"</p>"+a+"<div class='vcode'>"+lan.bt.cal_msg+"<span class='text'>"+sumtext+"</span>=<input type='number' id='vcodeResult' value=''></div><div class='bt-form-submit-btn'><button type='button' class='btn btn-danger btn-sm bt-cancel'>"+lan.public.cancel+"</button> <button type='button' id='toSubmit' class='btn btn-success btn-sm' >"+lan.public.ok+"</button></div></div>",success:function(e){$("#change_all").prop("checked",!0),$("#file_check").click((function(){$("input[name=skip_checked]").prop("checked",$(this).prop("checked"))})),$("#file_check").click(),$("input[name=skip_checked]").change((function(){var e=$(".webDelete tbody").find("input:checked").length,t=$(".webDelete tbody").find("input").length==e;$("#file_check").prop("checked",t)}))}});$("#vcodeResult").focus().keyup((function(e){13==e.keyCode&&$("#toSubmit").click()})),$(".bt-cancel").click((function(){layer.close(o)})),$("#toSubmit").click((function(){var e=$("#vcodeResult").val().replace(/ /g,"");if(console.log(e),null!=e&&""!=e)if(e==getCookie("vcodesum")){layer.close(o);for(var t=$(".webDelete tbody").find("input:checked").length,a=0;a<t;a++)l.push(String($(".webDelete tbody").find("input:checked").eq(a).data("name")));s(l)}else layer.msg("请正确输入计算结果!");else layer.msg("请正确输入计算结果!")}))},loadScript:function(e,t,s){var a=0;"function"==typeof t&&(s=t);for(var n=0;n<e.length;n++)if(Array.isArray(bt.loadScript)||(bt.loadScript=[]),is_file_existence(e[n],!0)){var i=document.createElement("script");e[n].split("/");i.type="text/javascript",void 0!==s&&(i.readyState?function(t){i.onreadystatechange=function(){"loaded"!=i.readyState&&"complete"!=i.readyState||(i.onreadystatechange=null,bt.loadScript.push(e[t]),a++)}}(n):function(t){i.onload=function(){bt.loadScript.push(e[t]),a++}}(n)),i.src=e[n],document.body.appendChild(i)}else e.length-1===n&&s&&s();var l=setInterval((function(){a===e.length&&(clearTimeout(l),s())}),10)},ServiceAdmin:function(e,t){isNaN(e)||(e="php-fpm-"+e);e=e.replace("_soft","");var s="";switch(t){case"stop":s=lan.bt.stop;break;case"start":s=lan.bt.start;break;case"restart":s=lan.bt.restart;break;case"reload":s=lan.bt.reload}layer.confirm(lan.get("service_confirm",[s,e]),{icon:3,closeBtn:2},(function(){var a=layer.msg(lan.get("service_the",[s,e]),{icon:16,time:0});bt.send("ServiceAdmin","system/ServiceAdmin",{name:e,type:t},(function(n){layer.close(a);var i=n.status?lan.get("service_ok",[e,s]):lan.get("service_err",[e,s]);layer.msg(i,{icon:n.status?1:2}),"reload"!=t&&1==n.status&&setTimeout((function(){window.location.reload()}),1e3),n.status||layer.msg(n.msg,{icon:2,time:0,shade:.3,shadeClose:!0})})).error((function(){layer.close(a),layer.msg(lan.public.success,{icon:1})}))}))},onekeyCodeSite:function(e,t,s,a){$.post("/site?action=GetPHPVersion",(function(n){for(var i="",l=0,o=n.length-1;o>=0;o--)-1!=t.indexOf(n[o].version)&&(i+="<option value='"+n[o].version+"'>"+n[o].name+"</option>",l++);if(0!=l){var r=bt.get_cookie("sites_path");r||(r="/www/wwwroot");var c='<form class="bt-form pd20 pb70" id="addweb">            <div class="line"><span class="tname">域名</span>              <div class="info-r c4"><textarea id="mainDomain" class="bt-input-text" name="webname_1" style="width:398px;height:100px;line-height:22px"></textarea>                <div class="placeholder c9" style="top:10px;left:10px">每行填写一个域名，默认为80端口<br>泛解析添加方法 *.domain.com<br>如另加端口格式为 www.domain.com:88</div>              </div>            </div>            <div class="line"><span class="tname">备注</span>              <div class="info-r c4"><input id="Wbeizhu" class="bt-input-text" name="ps" placeholder="网站备注" style="width:398px" type="text"> </div>            </div>            <div class="line"><span class="tname">根目录</span>              <div class="info-r c4"><input id="inputPath" class="bt-input-text mr5" name="path" value="'+r+'" placeholder="网站根目录" style="width:398px" type="text"><span class="glyphicon glyphicon-folder-open cursor" onclick="bt.select_path(\'inputPath\',\'dir\')"></span> </div>            </div>            <div class="line"><span class="tname">数据库</span>              <div class="info-r c4">                <input id="datauser" class="bt-input-text" name="datauser" placeholder="用户名/数据库名" style="width:190px;margin-right:13px" type="text">                <input id="datapassword" class="bt-input-text" name="datapassword" placeholder="密码" style="width:190px" type="text">              </div>            </div>            <div class="line"><span class="tname">源码</span>              <input class="bt-input-text mr5 disable" name="code" style="width:190px" value="'+s+'" disabled>              <span class="c9">准备为你部署的源码程序</span>            </div>            <div class="line"><span class="tname">PHP版本</span>              <select class="bt-input-text mr5" name="version" id="c_k3" style="width:100px">                '+i+'              </select>              <span class="c9">请选择源码程序支持的php版本</span>            </div>            <div class="bt-form-submit-btn">              <button type="button" class="btn btn-danger btn-sm onekeycodeclose">取消</button>              <button type="button" class="btn btn-success btn-sm" onclick="AddSite(\''+e+"','"+s+"')\">提交</button>            </div>          </from>";add=layer.open({type:1,title:"宝塔一键部署【"+s+"】",area:"560px",closeBtn:2,shadeClose:!1,content:c}),a.length>2&&layer.msg("<span style='color:red'>注意：部署此项目，以下函数将被解禁:<br> "+a+"</span>",{icon:7,time:1e4});$(".onekeycodeclose").click((function(){layer.close(add)})),$("#mainDomain").after("<div class='placeholder c9' style='top:10px;left:10px'>每行填写一个域名，默认为80端口<br>泛解析添加方法 *.domain.com<br>如另加端口格式为 www.domain.com:88</div>"),$(".placeholder").click((function(){$(this).hide(),$("#mainDomain").focus()})),$("#mainDomain").focus((function(){$(".placeholder").hide()})),$("#mainDomain").blur((function(){0==$(this).val().length&&$(".placeholder").show()})),$("#mainDomain").on("input",(function(){var e,t,s,a=bt.get_cookie("sites_path");a||(a="/www/wwwroot");var n=$(this).val();n.replace(/[^\x00-\xff]/g,"**").length;(t=(s=(e=n.split("\n"))[0].split(":")[0]).replace(new RegExp(/([-.])/g),"_")).length>15&&(t=t.substr(0,15)),$("#inputPath").val().substr(0,a.length)==a&&$("#inputPath").val(a+"/"+e[0].replace(new RegExp(/([-.])/g),"_").replace(/:/g,"_")),isNaN(t.substr(0,1))||(t="sql"+t),t.length>15&&(t=t.substr(0,15)),$("#Wbeizhu").val(s),$("#datauser").val(t)})),$("#Wbeizhu").on("input",(function(){var e=$(this).val();e.replace(/[^\x00-\xff]/g,"**").length>20&&(e=e.substring(0,20),$(this).val(e),layer.msg("不要超出20个字符",{icon:0}))}));var p=(new Date).getTime().toString().substring(7);$("#datauser").val("sql"+p),$("#datapassword").val(bt.get_random(10))}else layer.msg("缺少被支持的PHP版本，请安装!",{icon:5})}))},escapeHTML:function(e){return(e=""+e).replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"‘").replace(/\(/g,"&#40;").replace(/\&#60;/g,"&lt;").replace(/\&#62;/g,"&gt;").replace(/`/g,"&#96;").replace(/=/g,"＝")},web_shell:function(){Term.run()},openAlertModuleInstallView:function(e,t,s){bt_tools.send({url:"/config?action=get_msg_configs",data:{}},(function(a){switch(e){case"mail":renderMailConfigView(a[e],t,s);break;case"dingding":case"feishu":case"weixin":renderAlertUrlTypeChannelView(a[e],t,s);break;case"wx_account":case"sms":alertOtherTypeInstall(a[e],t,s)}}))},renderMailConfigView:function(e,t,s){layer.open({type:1,closeBtn:2,title:"发送者配置",area:["470px","400px"],btn:["保存","取消"],skin:"alert-send-view",content:'<div class="bt-form pd15">                    <div class="line">                            <span class="tname">发送人邮箱</span>                            <div class="info-r">                                    <input name="sender_mail_value" class="bt-input-text mr5" type="text" style="width: 300px">                            </div>                    </div>                    <div class="line">                            <span class="tname">SMTP密码</span>                            <div class="info-r">                                    <input name="sender_mail_password" class="bt-input-text mr5" type="password" style="width: 300px">                            </div>                    </div>                    <div class="line">                            <span class="tname">SMTP服务器</span>                            <div class="info-r">                                    <input name="sender_mail_server" class="bt-input-text mr5" type="text" style="width: 300px">                            </div>                    </div>                    <div class="line">                            <span class="tname">端口</span>                            <div class="info-r">                                    <input name="sender_mail_port" class="bt-input-text mr5" type="text" style="width: 300px">                            </div>                    </div>                    <ul class="help-info-text c7">                            <li>推荐使用465端口，协议为SSL/TLS</li>                            <li>25端口为SMTP协议，587端口为STARTTLS协议</li>                            <li><a href="'+e.help+'" target="_blank" class="btlink">配置教程</a></li>                    </ul>            </div>',success:function(){if($.isEmptyObject(e)||$.isEmptyObject(e.data.send))$("input[name=sender_mail_port]").val("465");else{var t=e.data.send,s=t.qq_mail||"",a=t.qq_stmp_pwd||"",n=t.hosts||"",i=t.port||"";$("input[name=sender_mail_value]").val(s),$("input[name=sender_mail_password]").val(a),$("input[name=sender_mail_server]").val(n),$("input[name=sender_mail_port]").val(i)}},yes:function(a){var n=$("input[name=sender_mail_value]").val(),i=$("input[name=sender_mail_password]").val(),l=$("input[name=sender_mail_server]").val(),o=$("input[name=sender_mail_port]").val();return""==n?layer.msg("邮箱地址不能为空！",{icon:2}):""==i?layer.msg("STMP密码不能为空！",{icon:2}):""==l?layer.msg("STMP服务器地址不能为空！",{icon:2}):""==o?layer.msg("请输入有效的端口号",{icon:2}):void(e.setup?bt_tools.send({url:"/config?action=set_msg_config&name=mail",data:{send:1,qq_mail:n,qq_stmp_pwd:i,hosts:l,port:o}},(function(e){e.status&&(layer.close(a),layer.msg(e.msg,{icon:e.status?1:2})),$(".content_box.news-channel").length>0&&$(".bt-w-menu p").eq(0).click(),t&&$(t).click(),s&&s()}),"设置邮箱配置"):bt_tools.send({url:"/config?action=install_msg_module&name="+e.name,data:{}},(function(e){e.status?bt_tools.send({url:"/config?action=set_msg_config&name=mail",data:{send:1,qq_mail:n,qq_stmp_pwd:i,hosts:l,port:o}},(function(e){e.status&&(layer.close(a),layer.msg(e.msg,{icon:e.status?1:2}),$(".alert-view-box").length>=0&&$(".alert-view-box .tab-nav-border span:eq(1)").click(),$(".content_box.news-channel").length>0&&$(".bt-w-menu p").eq(0).click(),t&&$(t).click(),s&&s())}),"设置邮箱配置"):layer.msg(e.msg,{icon:2})}),"创建"+e.title+"模块"))}})},renderAlertUrlTypeChannelView:function(e,t,s){var a=$.isEmptyObject(e.data);layer.open({type:1,closeBtn:2,title:e.title+"机器人配置",area:["520px","345px"],btn:["保存","取消"],skin:"alert-send-view",content:'<div class="pd15 bt-form">                <div class="line"><span class="tname">名称</span><div class="info-r"><input type="text" name="chatName" value="'+(a?"":e.data.list.default.title)+'" class="bt-input-text mr10 " style="width:350px;" placeholder="机器人名称或备注"></div></div>                <div class="line">                <span class="tname">URL</span><div class="info-r">                    <textarea name="channel_url_value" class="bt-input-text mr5" type="text" placeholder="请输入'+e.title+'机器人url" style="width: 350px; height:120px; line-height:20px"></textarea>                </div>                <ul class="help-info-text c7">                        <li><a class="btlink" href="'+e.help+'" target="_blank">如何创建'+e.title+"机器人</a></li>                </ul>                </div></div>",success:function(){if(!$.isEmptyObject(e.data)){var t=e.data[e.name+"_url"]||"";$("textarea[name=channel_url_value]").val(t)}},yes:function(a){var n=$(".alert-view-box span.on").index(),i=$("textarea[name=channel_url_value]").val(),l=$("input[name=chatName]").val();return""==l?layer.msg("请输入机器人名称或备注",{icon:2}):""==i?layer.msg("请输入"+e.title+"机器人url",{icon:2}):void(e.setup?bt_tools.send({url:"/config?action=set_msg_config&name="+e.name,data:{url:i,title:l,atall:"True"}},(function(e){layer.close(a),layer.msg(e.msg,{icon:e.status?1:2}),$(".alert-view-box").length>=0&&$(".alert-view-box .tab-nav-border span:eq("+n+")").click(),$(".content_box.news-channel").length>0&&$(".bt-w-menu p").eq(0).click(),t&&$(t).click(),s&&s()}),"设置"+e.title+"配置"):bt_tools.send({url:"/config?action=install_msg_module&name="+e.name,data:{}},(function(o){o.status?setTimeout((function(){bt_tools.send({url:"/config?action=set_msg_config&name="+e.name,data:{url:i,title:l,atall:"True"}},(function(e){layer.close(a),layer.msg(e.msg,{icon:e.status?1:2}),$(".alert-view-box").length>=0&&$(".alert-view-box .tab-nav-border span:eq("+n+")").click(),$(".content_box.news-channel").length>0&&$(".bt-w-menu p").eq(0).click(),t&&$(t).click(),s&&s()}),"设置"+e.title+"配置")}),100):layer.msg(o.msg,{icon:2})}),"创建"+e.title+"模块"))}})},alertOtherTypeInstall:function(e,t,s){e.setup?"wx_account"===e.name&&renderAccountAlertView(t):bt_tools.send({url:"/config?action=install_msg_module&name="+e.name,data:{}},(function(a){if(layer.msg(a.msg,{icon:a.status?1:2}),!a.status)return!1;if("wx_account"===e.name){var n=e.data;n.is_subscribe&&n.is_bound||renderAccountAlertView()}if($(".alert-view-box").length>=0){var i=$(".alert-view-box span.on").index();$(".alert-view-box .tab-nav-border span:eq("+i+")").click()}$(".content_box.news-channel").length>0&&$(".bt-w-menu p").eq(0).click(),t&&$(t).click(),s&&s()}),"创建"+e.title+"模块")},renderAccountAlertView:function(e,t){layer.open({type:1,closeBtn:2,title:"微信公众号",area:["420px","280px"],skin:"BTwxAccountView",content:'<div class="wx_account_box pd15"><div class="bt-form">            <div class="form-item">                <div class="form-label">绑定微信公众号</div>                <div class="form-content">                    <div class="bind_account hide">                        <span style="color: #20a53a;">已绑定</span>                        <span style="color: red;cursor: pointer;margin-left:10px" class="unbind-wx">[解绑]</span>                    </div>                    <div class="nobind_account">                        <span class="red">未绑定</span>                        <button class="btn btn-xs btn-success btn-bind-account">立即绑定</button>                    </div>                </div>            </div>            <div class="form-item">                <div class="form-label">绑定微信账号</div>                <div class="form-content">                    <div class="bind_wechat hide">                        <div class="userinfo"></div>                    </div>                    <div class="nobind_wechat">                        <span class="red">未绑定</span>                    </div>                    <button class="btn btn-xs btn-success btn-bind-wechat">立即绑定</button>                </div>            </div>            <div class="form-item hide">                <div class="form-label">今日剩余发送次数</div>                <div class="form-content">                    <span class="account_remaining">0</span>                    <button class="btn btn-xs btn-success btn-send-test">发送测试消息</button>                </div>            </div>        </div>        <ul class="help-info-text c7">            <li>没有绑定微信公众号无法接收面板告警消息</li>            <li>当前为体验版,限制每个宝塔账号发送频率100条/天</li>        </ul>        </div>',success:function(){getWxAccountConfig(e,t),$(".btn-send-test").click((function(){bt_tools.send({url:"/config?action=get_msg_fun",data:{module_name:"wx_account",fun_name:"push_data",msg:"发送测试信息"}},(function(e){if(e.status){var t=Number($(".account_remaining").html());isNaN(t)||(t-=1,$(".account_remaining").text(t))}}),"测试信息")})),wxAccountBind(e,t),$(".unbind-wx").click((function(){bt.compute_confirm({title:"解绑微信公众号",msg:"风险操作，解绑微信公众号后，所有使用绑定该微信公众号账号的机器，将会全部解绑，继续操作？"},(function(s){bt_tools.send({url:"panel/push/unbind_wx_account"},(function(s){bt.msg({msg:s.msg.res,status:s.msg.success}),getWxAccountConfig(e,t)}))}))}))}})},getWxAccountConfig:function(e,t){bt_tools.send({url:"/config?action=get_msg_fun",data:{module_name:"wx_account",fun_name:"get_web_info"}},(function(s){!1===s.status&&bt.msg(s);var a=s&&s.msg&&s.msg.res?s.msg.res:{};1===a.is_bound?($(".userinfo").html('<img src="'+a.head_img+'" /><div>'+a.nickname+"</div>"),$(".btn-bind-wechat").text("更换微信账号"),$(".bind_wechat").removeClass("hide"),$(".nobind_wechat").addClass("hide")):($(".btn-bind-wechat").text("立即绑定"),$(".bind_wechat").addClass("hide"),$(".nobind_wechat").removeClass("hide")),1===a.is_subscribe?($(".bind_account").removeClass("hide"),$(".nobind_account").addClass("hide"),$(".content_box.news-channel").length>0&&$(".bt-w-menu p").eq(0).click(),e&&$(e).click(),t&&t()):($(".bind_account").addClass("hide"),$(".nobind_account").removeClass("hide")),void 0===a.remaining?$(".account_remaining").parents(".form-item").addClass("hide"):($(".account_remaining").parents(".form-item").removeClass("hide"),$(".account_remaining").text(a.remaining))}),"获取绑定信息")},wxAccountBind:function(e,t){$(".btn-bind-account").click((function(){var s=this;layer.open({type:1,area:"280px",title:"绑定微信公众号",content:'<div class="bind_wechat_box pd20">                  <div class="text-center">微信扫码</div>                  <div class="mt10">                      <div class="qrcode" style="text-align: center;">                          <img src="https://www.bt.cn/Public/img/bt_wx.jpg" style="width: 180px;"/>                      </div>                  </div>              </div>',cancel:function(){$(s).hasClass("bterror")?$(".alert-view-box span.on").click():getWxAccountConfig(e,t)}})})),$(".btn-bind-wechat").click((function(){var s=this;layer.open({type:1,area:"280px",title:"绑定微信账号",content:'<div class="bind_wechat_box pd20">                        <div class="text-center">微信扫码</div>                        <div class="mt10">                            <div class="qrcode" id="wechat-qrcode" style="text-align: center;"></div>                        </div>                    </div>',success:function(){bt_tools.send({url:"/config?action=get_msg_fun",data:{module_name:"wx_account",fun_name:"get_auth_url"}},(function(e){jQuery.ajax({url:"/static/js/jquery.qrcode.min.js",dataType:"script",cache:!0}).done((function(){$("#wechat-qrcode").qrcode({render:"canvas",width:180,height:180,text:e.msg.res,correctLevel:1})}))}),"生成二维码信息")},cancel:function(){$(s).hasClass("bterror")?$(".alert-view-box span.on").click():getWxAccountConfig(e,t)}})}))}},rsa={publicKey:null,encrypt_public:function(e){if(this.publicKey=document.querySelector(".public_key").attributes.data.value,this.publicKey.length<10)return e;var t=new JSEncrypt;return t.setPublicKey(this.publicKey),t.encrypt(e)},decrypt_public:function(e){if(this.publicKey=document.querySelector(".public_key").attributes.data.value,this.publicKey.length<10)return null;var t=new JSEncrypt;return t.setPublicKey(this.publicKey),t.decryptp(e)}},soft={is_install:!1,is_setup:!1,is_setup_name:"",refresh_data:[],alert_modules:[],ignore_list:[],get_config_menu:function(e){var t="";if("Linux"==bt.os){var s={public:[{type:"config",title:lan.soft.config_edit},{type:"change_version",title:lan.soft.nginx_version}],mysqld:[{type:"change_data_path",title:lan.soft.save_path},{type:"change_mysql_port",title:lan.site.port},{type:"get_mysql_run_status",title:lan.soft.status},{type:"get_mysql_status",title:lan.soft.php_main7},{type:"mysql_error_log",title:lan.soft.error_log},{type:"mysql_slow_log",title:lan.public.slow_log},{type:"mysql_log_bin",title:lan.public.bin_log}],phpmyadmin:[{type:"phpmyadmin_php",title:lan.soft.php_version},{type:"phpmyadmin_safe",title:lan.soft.safe}],memcached:[{type:"memcached_status",title:"负载状态"},{type:"memcached_set",title:"性能调整"}],redis:[{type:"get_redis_status",title:"负载状态"}],tomcat:[{type:"log",title:"运行日志"}],apache:[{type:"apache_set",title:"性能调整"},{type:"apache_status",title:lan.soft.nginx_status},{type:"log",title:"运行日志"}],openlitespeed:[{type:"openliMa_set",title:"参数设置"}],nginx:[{type:"nginx_set",title:"性能调整"},{type:"nginx_status",title:lan.soft.nginx_status},{type:"log",title:"错误日志"}]},a=s.public;if("phpmyadmin"===e&&(a=[]),"openlitespeed"===e&&(a.length=1),"pureftpd"===e&&a.push({type:"pureftpd_log",title:"日志管理"}),"mysqld"===e&&(a.length=1),a=a.concat(s[e]))for(var n=0;n<a.length;n++){var i=a[n];i&&(t+="<p onclick=\"soft.get_tab_contents('"+i.type+"',this)\">"+i.title+"</p>")}}return t},set_soft_config:function(e){var t=bt.load();bt.soft.get_soft_find(e,(function(s){t.close(),"mysql"==e&&(e="mysqld");bt.open({type:1,area:"mysqld"===e?["800px","634px"]:e.indexOf("php-")>-1?["796px","644px"]:"660px",title:e+lan.soft.admin,closeBtn:2,shift:0,content:'<div class="bt-w-main" style="width:100%;'+("mysqld"===e?"height: 590px;":e.indexOf("php-")>-1?"height: 600px;":"")+'"><div class="bt-w-menu bt-soft-menu"></div><div id="webEdit-con" class="bt-w-con pd15" style="height:'+("mysqld"===e?"100%":e.indexOf("php-")>-1?"600px":"560px")+';overflow:auto"><div class="soft-man-con bt-form"></div></div></div>'});var a=$(".bt-soft-menu").data("data",s);setTimeout((function(){if(a.append($('<p class="bgw bt_server" onclick="soft.get_tab_contents(\'service\',this)">'+lan.soft.service+"</p>")),s.version_coexist){var t=e.split("-")[1].replace(".",""),n=[{type:"set_php_config",val:t,title:lan.soft.php_main5},{type:"config_edit",val:t,title:lan.soft.config_edit},{type:"set_upload_limit",val:t,title:lan.soft.php_main2},{type:"set_timeout_limit",val:t,title:lan.soft.php_main3,php53:!0},{type:"config",val:t,title:lan.soft.php_main4},{type:"fpm_config",val:t,title:"FPM配置文件"},{type:"set_dis_fun",val:t,title:lan.soft.php_main6},{type:"set_fpm_config",val:t,title:lan.soft.php_main7,apache24:!0,php53:!0},{type:"get_php_status",val:t,title:lan.soft.php_main8,apache24:!0,php53:!0},{type:"get_php_session",val:t,title:lan.soft.php_main9,apache24:!0,php53:!0},{type:"get_fpm_logs",val:t,title:lan.soft.log,apache24:!0,php53:!0},{type:"get_slow_logs",val:t,title:lan.public.slow_log,apache24:!0,php53:!0},{type:"get_phpinfo",val:t,title:"phpinfo"}];"52"!==t&&"82"!==t&&n.unshift({type:"set_php_site",val:t,title:'<span class="glyphicon icon-vipLtd" style="margin-left: -23px;"></span> 站点防护'});for(var i=[0,1,2,3,4,5,6,7,8,9,10,11,12,13],l="openlitespeed"==bt.get_cookie("serverType"),o=0;o<i.length;o++){var r=n[o];if(r&&(null==r.os||r.os==bt.os)){if(e.indexOf("5.2")>=0&&r.php53)continue;if(l&&("set_fpm_config"==r.type||"fpm_config"==r.type||"get_php_status"==r.type))continue;var c=r.apache24?'class="apache24"':"";a.append($('<p data-id="'+o+'" '+c+" onclick=\"soft.get_tab_contents('"+r.type+"',this)\" >"+r.title+"</p>").data("item",r))}}e.indexOf("php-")>-1&&($(".bt-w-menu p").css({"padding-left":"38px"}),$(".bt-w-menu").css({width:"126px"}))}else a.append(soft.get_config_menu(e));$(".bt-w-menu p").click((function(){$(this).addClass("bgw").siblings().removeClass("bgw")})),$(".bt-w-menu p:eq(0)").trigger("click"),-1==e.indexOf("php-")&&-1==e.indexOf("apache")||bt.soft.get_soft_find("apache",(function(t){t.setup&&t.version.indexOf("2.2")>=0&&(-1!=e.indexOf("php-")&&($(".apache24").hide(),$(".bt_server").remove(),$(".bt-w-menu p:eq(0)").trigger("click")),-1!=e.indexOf("apache")&&($(".bt-soft-menu p:eq(3)").remove(),$(".bt-soft-menu p:eq(3)").remove()))}))}),100)}))},switchPushType:function(e){$.ajaxSettings.async=!1;var t=[],s=[],a=!1,n=[];return bt_tools.send({url:"config?action=get_msg_configs"},(function(i){var l=[],o=[];Object.getOwnPropertyNames(i).forEach((function(e){var t=i[e];"wx_account"==e?o.push(t):l.push(t)})),t=o.concat(l),soft.alert_modules=t,t.forEach((function(t,i){e&&(s=e.module.split(",")),"wx_account"===t.name&&!$.isEmptyObject(t.data)&&t.data.res.is_subscribe&&t.data.res.is_bound&&(a=!0),"sms"!==t.name&&n.push({type:"checkbox",name:t.name,class:"module-check "+(!t.setup||$.isEmptyObject(t.data)?"check_disabled":"wx_account"!=t.name||a?"":"check_disabled"),style:{"margin-right":"10px"},disabled:!(t.setup&&!$.isEmptyObject(t.data))||"wx_account"==t.name&&!a,value:$.inArray(t.name,s)>=0?1:0,title:("wx_account"==t.name?'<b style="color: #fc6d26;">[推荐]</b>':"")+t.title+(!t.setup||$.isEmptyObject(t.data)?'<span style="color:red;cursor: pointer;" class="alertInstall">[点击安装]</span>':"wx_account"!=t.name||a?"":'[<a target="_blank" class="bterror alertInstall">未配置</a>]')})}))})),$.ajaxSettings.async=!0,n},set_push_config:function(e,t){bt_tools.send({url:"/push?action=set_push_config",data:{name:"site_push",data:JSON.stringify(e),id:Date.now()}},(function(e){layer.msg(e.msg,{icon:e.status?"1":"2"}),t&&t(e)}),{verify:!1,msg:"设置告警状态"})}},product_recommend={data:null,init:function(e){var t=this;location.pathname.indexOf("bind")>-1||this.get_product_type((function(s){t.data=s,e&&e(s)}))},get_pay_status:function(e){void 0===e&&(e={isBuy:!1});var t=parseInt(bt.get_cookie("pro_end")||-1),s=parseInt(bt.get_cookie("ltd_end")||-1),a="ltd";return(-2===t||t>-1)&&(a="pro"),(-2===s||s>-1)&&(a="ltd"),{advanced:a,is_pay:t>-1||s>-1||e.isBuy,end_time:"ltd"===a?s:t}},get_recommend_type:function(e){for(var t=null,s=(location.pathname.replace("/",""),0);s<this.data.length;s++){var a=this.data[s];a.type==e&&a.show&&(t=a)}return t}};function GetfilePath(){var e=$("#PathPlace").find("span").text();e=e.replace(new RegExp(/(\\)/g),"/"),setCookie("path_dir_change",e),$("#"+getCookie("SetId")).val(e+getCookie("SetName")),layer.close(getCookie("ChangePath"))}function openPath(e){setCookie("Path",e),bt.refreshMain(window.location.origin+"/files")}$((function(){for(var e in $.fn&&!$.fn.serializeObject&&($.fn.serializeObject=function(){var e=Object.prototype.hasOwnProperty;return this.serializeArray().reduce((function(t,s){return e.call(t,s.name)||(t[s.name]=s.value),t}),{})}),$.fn.extend({fixedThead:function(e){var t=$(this);if(e=$.extend({height:400,shadow:!0,resize:!0},e),0===$(this).find("table").length)return!1;var s=$(this)[0].style.height.match(/([0-9]+)([%\w]+)/);null===s?s=[null,e.height,"px"]:$(this).css({boxSizing:"content-box",paddingBottom:$(this).find("thead").height()}),$(this).css({position:"relative"});var a=$(this).find("thead")[0].outerHTML,n=$(this).find("tbody")[0].outerHTML,i=$('<div class="thead_div"><table class="table table-hover mb0"></table></div>'),l=$('<div class="tbody_shadow_top"></div>'),o=$('<div class="tbody_div" style="height:'+s[1]+s[2]+';"><table class="table table-hover mb0" style="margin-top:-'+$(this).find("thead").height()+'px"></table></div>'),r=$('<div class="tbody_shadow_bottom"></div>');i.find("table").append(a),o.find("table").append(a),o.find("table").append(n),$(this).html(""),$(this).append(i),$(this).append(l),$(this).append(o),$(this).append(r);var c=t.find(".thead_div table")[0].offsetWidth,p=t.find(".tbody_div table")[0].offsetWidth,d=t.find("tbody tr:eq(0)>td").length;if($(this).find("tbody tr:eq(0)>td").each((function(e,s){var a=t.find("thead tr:eq(0)>th").eq(e);e===d-1?a.attr("width",$(s)[0].clientWidth+(c-p)):a.attr("width",$(s)[0].offsetWidth)})),e.resize&&$(window).resize((function(){var e=t.find(".thead_div table")[0].offsetWidth,s=t.find(".tbody_div table")[0].offsetWidth,a=t.find("tbody tr:eq(0)>td").length;t.find("tbody tr:eq(0)>td").each((function(n,i){var l=t.find("thead tr:eq(0)>th").eq(n);n===a-1?l.attr("width",$(i)[0].clientWidth+(e-s)):l.attr("width",$(i)[0].offsetWidth)}))})),e.shadow){var _=$(this).find(".tbody_div")[0];s[1]>=_.scrollHeight?($(this).find(".tbody_shadow_top").hide(),$(this).find(".tbody_shadow_bottom").hide()):($(this).find(".tbody_shadow_top").hide(),$(this).find(".tbody_shadow_bottom").show()),$(this).find(".tbody_div").scroll((function(e){var s=$(this)[0].scrollTop,a=$(this)[0].scrollHeight,n=$(this)[0].clientHeight,i=t.find(".tbody_shadow_top"),l=t.find(".tbody_shadow_bottom");0==s?(i.hide(),l.show()):s>0&&s<a-n?(i.show(),l.show()):s==a-n&&(i.show(),l.hide())}))}}}),Object.values||(Object.values=function(e){var t=[];for(var s in e)e.hasOwnProperty(s)&&t.push(e[s]);return t}),Date.prototype.format=function(e){var t={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};for(var s in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),t)new RegExp("("+s+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?t[s]:("00"+t[s]).substr((""+t[s]).length)));return e},win_mount)win_mount.hasOwnProperty(e)&&(window[e]=win_mount[e]);ajaxSetup()}));var bt_upload_file={f:null,f_total:0,f_path:null,split_size:2097152,_files:[],_error:0,_start_time:0,_t_start_time:0,collback_to:null,upload_url:"/files?action=upload",_loadT:null,open:function(e,t,s,a){bt_upload_file.f_path=e.replace("//","/"),user_agent=navigator.userAgent.toLowerCase();var n="",i="";t?i='accept="'+t+'"':-1===user_agent.indexOf("chrome")&&-1===user_agent.indexOf("firefox")||(n='<input type="file" id="dir_input" onchange="bt_upload_file.list(this.files)" style="display:none;"  multiple="true" autocomplete="off" multiple webkitdirectory /><button type="button" style="margin-left: 10px;"  id="opt" onclick="$(\'#dir_input\').click()" autocomplete="off" title="支持的浏览器: Chrome、Firefox、Edge、有极速模式的国产浏览器">选择目录</button>');var l="";l=s?' --- <span style="color:red;">'+s+"</span>":" --- 支持断点续传",a&&(bt_upload_file.collback_to=a),bt_upload_file._loadT=layer.open({type:1,title:"上传文件到["+bt_upload_file.f_path+"]"+l,area:["550px","500px"],shadeClose:!1,closeBtn:2,content:'<div class="fileUploadDiv"><input type="file" id="file_input" onchange="bt_upload_file.list(this.files)"  multiple="true" autocomplete="off" '+i+' /><button type="button"  id="opt" onclick="$(\'#file_input\').click()" autocomplete="off">选择文件</button>'+n+'<span id="totalProgress" style="position: absolute;top: 7px;right: 10px;"></span><span><button type="button" id="up" autocomplete="off" onclick="bt_upload_file.start(0)">开始上传</button><button type="button" id="filesClose" autocomplete="off" onClick="layer.close(bt_upload_file._loadT)" >关闭</button></span><ul id="up_box"><li id="tipsUpdataText" style="height: 97%;line-height: 280px;text-align: center;color: #ccc;font-size: 32px;"><span>请将需要上传的文件拖到此处</span></li></ul></div>'}),bt_upload_file._files=[],document.addEventListener("drop",(function(e){e.preventDefault()})),document.addEventListener("dragleave",(function(e){e.preventDefault()})),document.addEventListener("dragenter",(function(e){e.preventDefault()})),document.addEventListener("dragover",(function(e){e.preventDefault()})),document.getElementById("up_box").addEventListener("drop",(function(e){e.preventDefault();var t=e.dataTransfer.files;if(0==t.length)return!1;bt_upload_file.list(t)}))},list:function(e){if($("#totalProgress").html(""),$("#tipsUpdataText").remove(),0==e.length)return!1;for(var t=$.extend(!0,{},e),s=0;s<t.length;s++)bt_upload_file._files.push(t[s]);var a=bt_upload_file._files;$("#up_box").html("");var n=layer.msg("正在加载文件列表...",{time:0,icon:16,shade:.3});for(s=0;s<a.length;s++){var i=a[s].name;a[s].webkitRelativePath&&(i=a[s].webkitRelativePath),$("#up_box").append('<li class="offset-'+s+'"><span class="filename" title="上传到: '+bt_upload_file.f_path+"/"+i+'">'+i+'</span><span class="filesize">'+bt_upload_file.to_size(a[s].size)+"</span><em>等待上传</em></li>")}layer.close(n)},to_size:function(e){for(var t=[" B"," KB"," MB"," GB"," TB"," PB"],s=0;s<t.length;s+=1){if(e<1024)return(0===s?e:e.toFixed(2))+t[s];e/=1024}},start:function(e){var t=bt_upload_file._files.length;if(0===t)return layer.msg("请选择文件!",{icon:2}),!1;0===e&&(bt_upload_file._t_start_time=new Date),$("#filesClose,#up,#opt").attr("disabled","disabled");var s=bt_upload_file.diff_time(bt_upload_file._t_start_time,new Date);if($("#totalProgress").html("<p>已上传("+e+"/"+t+"),"+s+'</p> <progress value="'+e+'" max="'+t+'"></progress>'),t<=e)return $("#totalProgress").html("<p>上传完成("+e+"/"+t+"), "+s+'</p> <progress value="'+e+'" max="'+t+'"></progress>'),bt_upload_file._files=[],$("#filesClose,#up,#opt").removeAttr("disabled"),bt_upload_file.collback_to&&bt_upload_file.collback_to(bt_upload_file.f_path),!1;e>10&&$("#up_box").scrollTop(35*(e-10)+50),bt_upload_file._start_time=new Date,bt_upload_file._error=0,bt_upload_file.f=bt_upload_file._files[e],bt_upload_file.f_total=Math.ceil(bt_upload_file.f.size/bt_upload_file.split_size),bt_upload_file.upload(0,e)},upload:function(e,t){var s=Math.min(bt_upload_file.f.size,e+bt_upload_file.split_size),a=bt_upload_file._files.length,n=bt_upload_file.f_path;bt_upload_file.f.webkitRelativePath&&(n=bt_upload_file.f_path+"/"+bt_upload_file.f.webkitRelativePath.replace("/"+bt_upload_file.f.name,""));var i=new FormData;i.append("f_path",n.replace("//","/")),i.append("f_name",bt_upload_file.f.name),i.append("f_size",bt_upload_file.f.size),i.append("f_start",e),i.append("blob",bt_upload_file.f.slice(e,s)),$.ajax({url:bt_upload_file.upload_url,type:"POST",data:i,async:!0,processData:!1,contentType:!1,success:function(e){if("number"==typeof e){var s=parseInt(e/bt_upload_file.f.size*100),n=bt_upload_file.diff_time(bt_upload_file._t_start_time,new Date);$("#totalProgress").html("<p>已上传("+t+"/"+a+"),"+n+'</p> <progress value="'+t+'" max="'+a+'"></progress>'),$("#up_box li em")[t].outerHTML='<em style="color:green;">上传进度:'+s+"%</em>",$("#up_box li .filesize")[t].outerHTML='<span class="filesize">'+bt_upload_file.to_size(e)+"/"+bt_upload_file.to_size(bt_upload_file.f.size)+"</span>",$("#up_box li em")[t].focus(),bt_upload_file.upload(e,t)}else{if(e.status){var i=bt_upload_file.diff_time(bt_upload_file._start_time,new Date);$("#up_box li em")[t].outerHTML='<em style="color:green;">已完成('+i+")</em>",$("#up_box li .filesize")[t].outerHTML='<span class="filesize">'+bt_upload_file.to_size(bt_upload_file.f.size)+"/"+bt_upload_file.to_size(bt_upload_file.f.size)+"</span>"}else $("#up_box li em")[t].outerHTML='<em style="color:red;">'+e.msg+"</em>";bt_upload_file.start(t+1)}},error:function(s){if(bt_upload_file._error>5)return $("#up_box li em")[t].outerHTML='<em style="color:red;">上传失败</em>',void bt_upload_file.start(t+1);bt_upload_file._error+=1,bt_upload_file.upload(e,t)}})},diff_time:function(e,t){var s=t.getTime()-e.getTime(),a=Math.floor(s/6e4),n=(s%6e4/1e3).toFixed(2)+"秒";return a>0&&(n=a+"分"+n),n}};