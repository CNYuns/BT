import{b4 as e,ax as t,_ as s}from"./utils-lib.js?v=1764728423";import{c as o,s as l,aB as a,c9 as r,w as n,g as i,v as m,a8 as c,x as u,y as d,A as p,F as v,b1 as x,L as h,z as f,D as g,B as b,e as w,R as C}from"./base-lib.js?v=1764728423";import{P as M}from"./store4.js?v=1764728423";import"./__commonjsHelpers__.js?v=1764728423";import"./validator.js?v=1764728423";import"./index110.js?v=1764728423";import"./column.js?v=1764728423";import"./index107.js?v=1764728423";const E={class:"flex flex-col"},L={class:"flex flex-col absolute w-full"},j={class:"pt-2.6rem bottom-bg"},_={class:"px-3.6rem"},D={class:"voucher-list mt-2.6rem h-[235px] overflow-auto"},N={class:"voucher-amount inline-block px-1.6rem relative w-12rem"},k={class:"font-bold text-large"},I={class:"text-large36"},y={class:"text-tertiary mt-1rem"},H={class:"inline-block text-left mr-1rem text-secondary voucher-instructions flex-1 pl-1.6rem"},S={class:"text-base mb-1rem"},T={class:"voucher-count-down mt-1.2rem text-left"},A={class:"text-danger mlr-[1rem] inline-block text-extraLarge"},B={class:"px-[3.6rem] pb-1rem mt-1.4rem"},O={class:"voucher-count-down text-center text-medium leading-[3rem] mt-[2.6rem] text-secondary flex justify-center"},R={class:"mt-[2rem] voucher-footer text-center"},V=s(o({__name:"index",props:{compData:{default:()=>({isCoupon:[],isHome:!1,isLimited:!1,close:()=>{}})}},setup(s){const o=M(),{couponItem:V,closeAfterReload:F,timeClose:Z,timeNow:z}=l(o),{siteList:G,addZero:P,claimCouponEvent:U,changeCloseTimeEvent:X}=o,q=a("popupClose",()=>{}),J=e=>{if(null==e)return"时间未知";const t=Number(e);if(isNaN(t)||t<0)return"时间格式错误";if(t>Number.MAX_SAFE_INTEGER/1e3)return"时间过长";const s=Math.floor(t/86400),o=Math.floor(t%86400/3600),l=Math.floor(t%86400%3600/60),a=[];return s>0&&a.push("".concat(s,"天")),o>0&&a.push("".concat(o,"小时")),l>0&&a.push("".concat(l,"分")),a.length>0?a.join(""):"不足1分钟"},K=s,Q=r();n(()=>Q.value,e=>{z.value=e});const W=i(()=>{let e="00",t="00",s="00",o="00",l=Number(sessionStorage.getItem("HOME-ENDTIME"));(!l||z.value>=l)&&(l=z.value+72e5,sessionStorage.setItem("HOME-ENDTIME",l.toString()));const a=l-z.value;return a>0?(e=P(Math.floor(a/36e5)),t=P(Math.floor(a/6e4%60)),s=P(Math.floor(a/1e3%60)),o=P(Math.floor(a%1e3/10))):(e="00",t="00",s="00",o="00",0===a&&(sessionStorage.removeItem("HOME-ENDTIME"),X("week",!1))),{hour:e,minute:t,second:s,millisecond:o}});return m(()=>{K.compData.isCoupon.length&&(V.value=K.compData.isCoupon)}),c(()=>{var t,s;e(null==(t=K.compData)?void 0:t.close)&&(null==(s=K.compData)||s.close())}),(e,o)=>{const l=t;return u(),d("section",E,[o[9]||(o[9]=p("svg",{viewBox:"0 0 402 485",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"402.000000",height:"485.000000",fill:"none"},[p("g",null,[p("path",{class:"coupon-background",d:"M402 10C402 4.47715 397.523 0 392 0L10 0C4.47715 0 0 4.47715 0 10L0 303.008C0.165974 303.003 0.332656 303 0.5 303C8.50813 303 15 309.492 15 317.5C15 325.508 8.50813 332 0.5 332C0.332656 332 0.165974 331.997 0 331.992L0 475C0 480.523 4.47715 485 10 485L392 485C397.523 485 402 480.523 402 475L402 331.992C394.223 331.728 388 325.341 388 317.5C388 309.659 394.223 303.272 402 303.008L402 10Z","fill-rule":"evenodd"}),p("path",{id:"直线 1",class:"coupon-line",d:"M15 318L387 318"})])],-1)),p("div",L,[p("div",j,[p("div",_,[o[4]||(o[4]=p("div",{class:"text-extraLarge text-pro w-full text-center"},"免费限时领取【大额优惠券】",-1)),p("div",D,[(u(!0),d(v,null,x(f(V),(e,t)=>(u(),d("div",{key:t,class:h(["voucher-item flex items-center justify-between py-[1.6rem] rounded-base",t===f(V).length-1?"mb-[1.4rem]":"mb-[2.4rem]"])},[p("div",N,[p("div",k,[o[2]||(o[2]=g(" ￥",-1)),p("span",I,b(e.val2),1)]),p("div",y,"满"+b(e.val1)+"减"+b(e.val2),1)]),p("div",H,[p("div",S,"仅限"+b(e.name),1),p("div",T,[o[3]||(o[3]=g(" 领取后有效期 ",-1)),p("div",A,b(J(e.timeout)),1)])])],2))),128))])])]),p("div",B,[p("div",O,[o[5]||(o[5]=g(" 距结束",-1)),p("span",null,b(f(W).hour),1),o[6]||(o[6]=g("时",-1)),p("span",null,b(f(W).minute),1),o[7]||(o[7]=g("分",-1)),p("span",null,b(f(W).second),1),o[8]||(o[8]=g("秒",-1)),p("span",null,b(f(W).millisecond),1)]),p("div",R,[p("span",{class:"text-white bg-pro hover:bg-[var(--bt-pro-sub-color)]",onClick:o[0]||(o[0]=e=>f(U)(f(q),s.compData.isLimited))},"一键领取"),w(l,{modelValue:f(Z),"onUpdate:modelValue":o[1]||(o[1]=e=>C(Z)?Z.value=e:null),options:f(G),class:"reminder mt-1rem !w-[14rem]",placeholder:"选择不通知的时间",onChange:f(X)},null,8,["modelValue","options","onChange"])])])])])}}}),[["__scopeId","data-v-d44eac63"]]);export{V as default};
