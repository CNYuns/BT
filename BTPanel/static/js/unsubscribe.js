import{c as e,o as l,r as a,x as s,y as t,A as p,e as u,C as o,B as i,z as d,F as r,b1 as n,O as c,D as f,am as m,an as b,U as x,ad as v,ab as h,H as _}from"./base-lib.js?v=1764728423";import{p as y,Q as g,kP as k,kQ as w,ak as C,kR as V,_ as j}from"./utils-lib.js?v=1764728423";import"./__commonjsHelpers__.js?v=1764728423";const z={class:"px-20px pt-24px pb-8px"},D={class:"mb-20px"},P={class:"w-260px"},U={class:"flex justify-end gap-0 w-full px-18px py-10px border-t border-lighter rounded-b-base bg-light"},q=j(e({__name:"unsubscribe",emits:["close"],setup(e,{expose:j,emit:q}){const H=q,I=l({http:"https://",url:""}),O=a(""),Q=a([{label:"http://",value:"http://"},{label:"https://",value:"https://"}]),A=e=>{const{clipboardData:l}=e;if(l){const e=l.getData("text");if(e)if(-1===e.indexOf("://"))I.url=e;else{const l=e.split("://")[0]+"://";I.http=l,I.url=e.replace(l,"")}}e.preventDefault()},B=async()=>{y({title:"恢复默认",content:"确定要恢复默认退订设置吗？",onConfirm:async()=>{g({loading:"正在恢复...",message:!0,request:k(),success:()=>{F()}})}})},F=async()=>{const{data:e}=await w();if(C(e)){if(O.value=e.panel_url,O.value){const e=O.value.split("://")[0]+"://";I.http=e}if(e.url){const l=e.url.split("://")[0]+"://";I.http=l,I.url=e.url.replace(l,"")}}},R=()=>{H("close")},E=async()=>{g({loading:"正在设置...",message:!0,request:V({url:I.http+I.url}),success:()=>{H("close")}})};return F(),j({onConfirm:E}),(e,l)=>{const a=m,y=b,g=x,k=v,w=h,C=_;return s(),t("div",null,[p("div",z,[u(w,{model:d(I),"label-width":"auto"},{default:o(()=>[p("div",D,"链接："+i(d(O)||"--"),1),l[2]||(l[2]=p("div",{class:"mb-20px text-desc"},[p("div",{class:"mb-6px"},"注意："),p("div",{class:"leading-18px text-tertiary text-small"},"默认链接直接使用面板地址访问，用户可以根据IP端口判断出你的面板地址，建议你对原链接反向代理后填入以保证你的面板地址不被泄露。")],-1)),u(k,{label:"新链接：",prop:"url","label-position":"left","label-width":"50px"},{default:o(()=>[p("div",P,[u(g,{modelValue:d(I).url,"onUpdate:modelValue":l[1]||(l[1]=e=>d(I).url=e),class:"w-full",placeholder:"",onPaste:A},{prepend:o(()=>[u(y,{modelValue:d(I).http,"onUpdate:modelValue":l[0]||(l[0]=e=>d(I).http=e),style:{width:"90px"}},{default:o(()=>[(s(!0),t(r,null,n(d(Q),e=>(s(),c(a,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["modelValue"])])]),_:1})]),_:1},8,["model"])]),p("div",U,[u(C,{size:"default",onClick:B},{default:o(()=>[...l[3]||(l[3]=[f(" 恢复默认 ",-1)])]),_:1}),u(C,{type:"danger",size:"default",onClick:R},{default:o(()=>[...l[4]||(l[4]=[f(" 取消 ",-1)])]),_:1}),u(C,{type:"primary",size:"default",onClick:E},{default:o(()=>[...l[5]||(l[5]=[f(" 确定 ",-1)])]),_:1})])])}}}),[["__scopeId","data-v-8914c0f7"]]);export{q as default};
