import{hE as e,k as a,p as t,n as l,i0 as s,i1 as o,b as r,i2 as n,d as c,N as i,bG as u,e as p,bO as d}from"./utils-lib.js?v=1764728423";import{_ as f}from"./version-compare.vue_vue_type_script_setup_true_lang.js?v=1764728423";import{c as m,x as v,y as _,A as x,e as y,z as C,v as k,C as w,D as b,B as P,L as I,R as g}from"./base-lib.js?v=1764728423";import"./__commonjsHelpers__.js?v=1764728423";const V={class:"p-[20px] flex"},S={class:"flex-1 flex flex-col mr-[15px]"},j={class:"flex-1 flex flex-col"},h=m({__name:"index",setup(t){const{certInfo:l}=e();return(e,t)=>{const s=a;return v(),_("div",V,[x("div",S,[t[2]||(t[2]=x("span",{class:"mb-[5px]"},"密钥 (KEY)",-1)),y(s,{type:"textarea",rows:16,modelValue:C(l).private_key,"onUpdate:modelValue":t[0]||(t[0]=e=>C(l).private_key=e),class:"w-full"},null,8,["modelValue"])]),x("div",j,[t[3]||(t[3]=x("span",{class:"mb-[5px]"},"证书 (CRT/PEM)",-1)),y(s,{type:"textarea",rows:16,modelValue:C(l).certificate,"onUpdate:modelValue":t[1]||(t[1]=e=>C(l).certificate=e),class:"w-full"},null,8,["modelValue"])])])}}}),{request:E,error:L}=r(),{getInfo:R,hasCert:U,serverIP:M,serverProtocol:O,serverPort:q,certInfo:z,getCertInfo:A}=e(),B=new Map([["start","启动"],["stop","停止"],["reload","重载"],["restart","重启"]]),D=e=>{const a=B.get(e)||"";t({title:"".concat(a,"服务"),content:"是否".concat(a,"虚拟主机服务，是否继续？"),onConfirm:async()=>{const a=await n(e);await E(a),R()}})},F=async()=>{U.value?l({title:"设置SSL证书",area:70,component:h,showFooter:!0,onOpen:()=>{A()},onConfirm:async()=>{const{certificate:e,private_key:a}=z.value,t=await s(e,a);await E(t)}}):L("请先上传证书")},G=async()=>{if(""===M.value)return void L("Please enter the server IP");const e=await o(M.value);await E(e)},H=()=>{window.open("".concat(O.value,"://").concat(M.value).concat(q.value,"/account/login"),"_blank","noopener,noreferrer")},K={class:""},N={class:"ml-[100px] mt-[2px]"},T=m({__name:"index",setup(t){const{isServerRunning:l,serverIP:s,serverProtocol:o,serverPort:r,resetServerEvent:n,getServerIP:m,getCertInfo:V}=e();return k(()=>{V(),m()}),(e,t)=>{const m=c,k=i,V=u,S=a,j=p,h=d;return v(),_("div",K,[y(f),y(h,{class:"my-[16px]"},{default:w(()=>[y(V,{label:"服务状态"},{default:w(()=>[x("div",{class:I(["mr-[8px] text-secondary flex items-center",C(l).color])},[b(P(C(l).tips),1),y(m,{icon:"icon-".concat(C(l).icon),class:I(["mr-[4px]",C(l).color])},null,8,["icon","class"])],2),y(k,{onClick:t[0]||(t[0]=e=>C(D)(C(l).type))},{default:w(()=>[b(P(C(l).text),1)]),_:1}),y(k,{onClick:t[1]||(t[1]=e=>C(D)("restart"))},{default:w(()=>[...t[4]||(t[4]=[b("重启",-1)])]),_:1}),y(k,{onClick:t[2]||(t[2]=e=>C(D)("reload"))},{default:w(()=>[...t[5]||(t[5]=[b("重载",-1)])]),_:1})]),_:1}),y(V,{label:"证书SSL"},{default:w(()=>[y(k,{type:"primary",onClick:C(F)},{default:w(()=>[...t[6]||(t[6]=[b("修改",-1)])]),_:1},8,["onClick"])]),_:1}),y(V,{label:"IP地址"},{default:w(()=>[y(S,{modelValue:C(s),"onUpdate:modelValue":t[3]||(t[3]=e=>g(s)?s.value=e:null),class:"mr-[10px] w-[250px]"},null,8,["modelValue"]),y(k,{onClick:C(G),type:"primary"},{default:w(()=>[...t[7]||(t[7]=[b("修改",-1)])]),_:1},8,["onClick"]),y(k,{onClick:C(n)},{default:w(()=>[...t[8]||(t[8]=[b("重置",-1)])]),_:1},8,["onClick"])]),_:1}),x("p",N,[t[9]||(t[9]=x("span",{class:"mr-[4px]"},"访问地址:",-1)),y(j,{onClick:C(H)},{default:w(()=>[b(P("".concat(C(o),"://").concat(C(s)).concat(C(r),"/account/login")),1)]),_:1},8,["onClick"])])]),_:1})])}}});export{T as default};
