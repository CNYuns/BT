import{_ as e}from"./index109.js?v=1764728423";import{aQ as a,ap as t,Q as s,cC as i,n as r,H as l,p as o,cD as n,u as m,b3 as c,an as u,O as p,b_ as d,_ as f}from"./utils-lib.js?v=1764728423";import{c as h,a as v,u as _}from"./column.js?v=1764728423";import{o as b,r as g,c as y,w as k,v as x,aG as C,a8 as j,x as w,y as R,e as O,C as B,A as L,z as T}from"./base-lib.js?v=1764728423";import{b as H,N as W,f as q}from"./useMethods.js?v=1764728423";import"./__commonjsHelpers__.js?v=1764728423";import"./index110.js?v=1764728423";const{refs:{customLimit:A,isRefreshWarehouseList:D}}=a(),E=b({isRefresh:!0}),N=g([]),P=[{active:!0,label:"添加仓库",onClick:()=>{r({component:()=>l(()=>import("./index271.js?v=1764728423"),__vite__mapDeps([]),import.meta.url),title:"添加仓库",area:54,btn:"添加"})}},{type:"link",label:"需求反馈",class:"ml-[2rem]",onClick:()=>{W()}}],I=e=>{r({component:()=>l(()=>import("./index271.js?v=1764728423"),__vite__mapDeps([]),import.meta.url),title:"编辑仓库【".concat(e.name,"】"),area:54,btn:"编辑",compData:{row:e}})},J=async e=>{await o({title:"删除仓库【".concat(e.name,"】"),type:"calc",width:"35rem",content:"您真的要删除仓库【".concat(e.name,"】吗？")});const a={id:e.id};s({request:n({data:JSON.stringify(a)}),message:!0,loading:"正在删除...",success:()=>{D.value=!0}})},S=t([{label:"删除项目",value:"delete",event:async(e,a,t,s)=>{const{label:i,value:r}=s,l=async(e,a)=>{const{id:t}=e;if("delete"===r){const e={id:t};return await n({data:JSON.stringify(e)})}};await e({title:"批量".concat(i,"仓库"),content:"批量".concat(i,"已选的仓库，是否继续操作！"),column:[{label:"仓库名",prop:"name"},h()],onConfirm:async()=>(await a(l),D.value=!0,!1)})}}]),Q=(e,a)=>{setTimeout(()=>{A.value.storage||((e,a)=>{setTimeout(()=>{e.value>900?a.value.limit=20:a.value.limit=10},0)})(e,a)},0)},V={class:"relative"},z={class:"flex items-center"},G=f(y({__name:"index",setup(t){const{refs:{isRefreshWarehouseList:r}}=a(),{mainHeight:l}=m(),{BtOperation:o}=c({options:P});k(()=>r.value,e=>{e&&(E.isRefresh=!0,g())});const{BtTable:n,BtPage:f,BtBatch:h,BtColumn:b,refresh:g,param:y}=u({request:e=>(async e=>{if(D.value=!1,!E.isRefresh)return{data:H({limit:e.limit,list:N.value,p:e.p})||[],total:N.value.length};E.isRefresh=!1;const a=await s({request:i(),data:Array});return N.value=a,{data:H({limit:e.limit,list:N.value,p:e.p})||[],total:N.value.length}})(e),columns:[v(),{label:"URL",prop:"url",minWidth:100},{label:"用户",prop:"namespace",minWidth:100,isCustom:!0},{label:"仓库名",prop:"name",minWidth:100,isCustom:!0},q({table:"images",prop:"remark",edit:async e=>{s({request:d({data:JSON.stringify({id:e.id,remark:e.remark})}),message:!0})},noPlace:!0,noCustom:!0,width:200}),_([{onClick:I,isHide:e=>"docker.io"==e.url&&"docker官方库"==e.name&&""==e.username,title:"编辑"},{onClick:J,isHide:e=>"docker.io"==e.url&&"docker官方库"==e.name&&""==e.username,title:"删除"}])],extension:[S]});return x(async()=>{Q(l,y)}),C(()=>{p(["/btdocker/registry/registry_list"])}),j(()=>{E.isRefresh=!0,N.value=[]}),(a,t)=>{const s=e;return w(),R("div",V,[O(s,null,{"header-left":B(()=>[L("div",z,[O(T(o))])]),"header-right":B(()=>[O(T(b))]),content:B(()=>[O(T(n),{key:"wareTable","max-height":T(l)-220},null,8,["max-height"])]),"footer-left":B(()=>[O(T(h))]),"footer-right":B(()=>[O(T(f))]),popup:B(()=>[...t[0]||(t[0]=[])]),_:1})])}}}),[["__scopeId","data-v-d919c40e"]]);export{G as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
