import{c as e,r as t,t as a,v as l,a8 as s,z as o,x as n,y as i,A as r,B as c,G as d,s as u,g as m,e as p,C as v,O as f,P as y,D as h,L as g,d as x,aA as b,at as w,as as _,ar as k,bB as C,w as S,j as I,aH as P,n as L,F as T,b1 as j,bC as M,bD as E,p as B,o as R,R as D,ap as O,I as A,N as V,J as z,a1 as F,bz as H,bA as N,H as W,aY as U,K as q,aZ as G,be as K,aT as $,M as J,b6 as Z,a3 as Q,bE as Y,bc as X,bd as ee,bF as te,aK as ae,bG as le,bH as se,W as oe,S as ne,by as ie,bw as re,bu as ce,Q as de,bI as ue,U as me,ax as pe,az as ve,Y as fe,Z as ye,bJ as he,am as ge,an as xe,b as be}from"./base-lib.js?v=1764728423";import{u as we,Q as _e,eA as ke,n as Ce,H as Se,eB as Ie,_ as Pe,eC as Le,w as Te,a3 as je,E as Me,s as Ee,e as Be,p as Re,eD as De,b as Oe,af as Ae,aH as Ve,T as ze,av as Fe,eE as He,eF as Ne,az as We,x as Ue,aS as qe,r as Ge,q as Ke,eG as $e,eH as Je,l as Ze,eI as Qe,aK as Ye,b8 as Xe,eJ as et,M as tt,eK as at,i as lt,bW as st,aw as ot,V as nt,f as it,j as rt,z as ct,O as dt}from"./utils-lib.js?v=1764728423";import{g as ut,b as mt,e as pt,ak as vt,al as ft,am as yt,l as ht,p as gt,an as xt,ao as bt,ap as wt,aq as _t,ar as kt,as as Ct,f as St,at as It,au as Pt}from"./validator.js?v=1764728423";import{_ as Lt}from"./index116.js?v=1764728423";import{_ as Tt}from"./index110.js?v=1764728423";import{_ as jt}from"./index111.js?v=1764728423";import{H as Mt}from"./store.js?v=1764728423";import{a8 as Et}from"./config.js?v=1764728423";import{H as Bt}from"./store2.js?v=1764728423";import{b as Rt,u as Dt,o as Ot}from"./column.js?v=1764728423";import{H as At}from"./store3.js?v=1764728423";import{c as Vt}from"./hooks.js?v=1764728423";const zt={class:"icon-end-time voucher-logo"},Ft={class:"ml-[4px] font-bold text-[var(--bt-pro-sub-color)]"},Ht=Pe(e({__name:"index",setup(e){const u=t([]),{payment:m,paymentVoucherType:p,aliyunEcsLtd:v}=we(),{isGetCoupon:f}=a(m.value),y=async(e={})=>{_e({request:ke(e),data:[Array,u]})},h=()=>{v.value||Ce({area:40,component:()=>Se(()=>import("./index338.js?v=1764728423"),__vite__mapDeps([]),import.meta.url),customClass:"voucherFetchView",compData:{isCoupon:u.value,isHome:!0}})};return l(()=>{const e=Number(sessionStorage.getItem("voucherOpenTime"));if(-100!==e){if(e){e-Math.floor(Date.now()/1e3)<=0&&(f.value=!0,sessionStorage.removeItem("voucherOpenTime"),(async()=>{let e=new Date((new Date).toLocaleDateString()).getTime()+6048e5-1;e=Math.floor(e>0?e/1e3:e),_e({request:Ie({limit_time:e})}),f.value=!0})())}ut({promises:[y({type:p.value})],delay:3e3}),s(()=>{p.value=0})}}),(e,t)=>o(u).length>0&&!o(f)&&!o(v)?(n(),i("div",{key:0,class:"flex items-center px-[1rem] py-[.4rem] mr-[8px] rounded-small recom-bg",onClick:h},[r("span",zt,[r("span",Ft,"您有"+c(o(u).length)+"个优惠券待领取",1)])])):d("",!0)}}),[["__scopeId","data-v-645e1f51"]]),Nt={class:"module-ui home-header"},Wt={class:"home-header-left"},Ut={class:"mr-[8px] flex items-center"},qt={class:"cursor-pointer flex items-center mr-[4px] ml-[4px]"},Gt=["title"],Kt={class:"block"},$t={class:"home-header-right"},Jt=["title"],Zt={class:"flex items-center"},Qt={class:"ml-2 text-xs text-info"},Yt={class:"flex items-center"},Xt={class:"flex items-center"},ea=Pe(e({__name:"index",setup(e){const{payment:t,aliyunEcsLtd:s,forceLtd:S,isHideAd:I,mainWidth:P,globalTheme:L}=we(),{authType:T}=a(t.value),j=x(()=>Se(()=>import("./index339.js?v=1764728423"),__vite__mapDeps([]),import.meta.url)),M=x(()=>Se(()=>import("./index217.js?v=1764728423"),__vite__mapDeps([]),import.meta.url)),E=Mt(),{bindUser:B,systemInfo:R,panelInfo:D,panelVersion:O}=u(E),A=m(()=>Le.value),V=()=>{switch(A.value){case"auto":return"tools-adaptive-"+(Me.value?"dark":"light");case"light":return"tools-light";case"dark":return"tools-dark"}return"tools-light"},z=e=>{Ee(e),L.value.theme.preset=e,Et({data:JSON.stringify(L.value)})};l(()=>{Te()});const F=m(()=>P.value<968),H=m(()=>{var e;return R.value.name?null==(e=R.value.name.split(" ")[0])?void 0:e.toLowerCase():""});return m(()=>!s.value||"ltd"===t.value.authType),(e,t)=>{const a=jt,l=b,s=Tt,u=Lt,m=Ht,x=Be,S=w,P=_,L=k,N=C;return n(),i("div",Nt,[r("div",Wt,[p(l,{width:"420","popper-class":"el-popover-shadow",trigger:"hover"},{reference:v(()=>[r("div",Ut,[p(a,{name:"tools-user",size:"26",class:"mr-[4px]"}),o(F)?d("",!0):(n(),i("span",{key:0,class:"user-phone",onClick:t[0]||(t[0]=()=>o(mt)(o(B)?"切换宝塔账号":"绑定宝塔账号，享受更多服务"))},c(o(B)?o(B):"未绑定帐号，点击绑定"),1))])]),default:v(()=>[(n(),f(y(o(j))))]),_:1}),p(s),p(l,{width:"280","popper-class":"el-popover-shadow"},{reference:v(()=>[r("span",qt,[p(a,{name:"system-"+o(H),size:"18",class:"mr-[4px]"},null,8,["name"]),r("span",null,c(o(R).name||"获取中"),1)])]),default:v(()=>[r("div",null,[r("span",{class:"!mb-4px inline-block max-w-[26rem] truncate",title:o(R).simpleName||"获取中"},"系统："+c(o(R).simpleName||"获取中"),9,Gt),r("span",Kt," 持续运行："+c(o(D).runningDays||"获取中"),1)])]),_:1}),o(I)?d("",!0):(n(),f(s,{key:0})),o(I)?d("",!0):(n(),f(l,{key:1,width:"580",disabled:"free"!==o(T),"show-arrow":!1,"popper-style":"padding: 0;border-radius: var(--el-border-radius-round);overflow: hidden;","popper-class":"el-product-state-popover"},{reference:v(()=>[p(u,{"is-home":!0,"disable-pro":!0})]),default:v(()=>[(n(),f(y(o(M))))]),_:1},8,["disabled"])),o(I)||o(F)?d("",!0):(n(),f(m,{key:2}))]),r("div",$t,[o(D).isBeta?(n(),f(x,{key:0,class:"mr-[16px] reset-link bug-feedback",href:"https://www.bt.cn/bbs/forum-39-1.html"},{default:v(()=>[...t[8]||(t[8]=[h("[找Bug奖宝塔币]",-1)])]),_:1})):d("",!0),o(F)?d("",!0):(n(),f(L,{key:1,trigger:"hover",placement:"bottom-end",onCommand:z},{dropdown:v(()=>[p(P,null,{default:v(()=>[p(S,{command:"auto",class:g({"is-active":"auto"===o(A)})},{default:v(()=>[r("div",Zt,[p(a,{name:"tools-adaptive-"+("dark"===o(je)?"dark":"light"),size:"16",class:"mr-2"},null,8,["name"]),t[9]||(t[9]=r("span",null,"自动",-1)),r("span",Qt,"("+c("dark"===o(je)?"暗色":"亮色")+")",1)])]),_:1},8,["class"]),p(S,{command:"light",class:g({"is-active":"light"===o(A)})},{default:v(()=>[r("div",Yt,[p(a,{name:"tools-light",size:"16",class:"mr-2"}),t[10]||(t[10]=r("span",null,"亮色",-1))])]),_:1},8,["class"]),p(S,{command:"dark",class:g({"is-active":"dark"===o(A)})},{default:v(()=>[r("div",Xt,[p(a,{name:"tools-dark",size:"16",class:"mr-2"}),t[11]||(t[11]=r("span",null,"暗色",-1))])]),_:1},8,["class"])]),_:1})]),default:v(()=>[r("div",{class:"header-operation-icon",title:"auto"===o(A)?"自动切换主题":"light"===o(A)?"切换到暗色主题":"切换到亮色主题"},[p(a,{name:V(),size:"18",class:"hob-icon"},null,8,["name"])],8,Jt)]),_:1})),o(F)?d("",!0):(n(),f(l,{key:2,width:"1",placement:"bottom",trigger:"hover"},{reference:v(()=>[r("div",{class:"header-operation-icon",onClick:t[1]||(t[1]=e=>o(E).jumpRouter("ui"))},[p(a,{name:"tools-theme",size:"18",class:"hob-icon"})])]),default:v(()=>[t[12]||(t[12]=r("div",{class:"text-small text-center w-full"},"打开界面设置",-1))]),_:1})),o(F)?d("",!0):(n(),f(l,{key:3,width:"1",placement:"bottom",trigger:"hover"},{reference:v(()=>[r("div",{class:"header-operation-icon",onClick:t[2]||(t[2]=e=>o(E).jumpRouter("alarm"))},[p(a,{name:"tools-alarm",size:"18",class:"hob-icon"})])]),default:v(()=>[t[13]||(t[13]=r("div",{class:"text-small text-center w-full"},"打开告警设置",-1))]),_:1})),o(F)?d("",!0):(n(),f(l,{key:4,width:"20",placement:"bottom",trigger:"hover"},{reference:v(()=>[r("div",{class:"header-operation-icon",onClick:t[3]||(t[3]=e=>o(pt)({type:7,isNoRate:!0,isCard:!0}))},[p(a,{name:"tools-feedback",size:"18",class:"hob-icon"})])]),default:v(()=>[t[14]||(t[14]=r("div",{class:"text-small text-center w-full"},"打开需求反馈",-1))]),_:1})),o(F)?d("",!0):(n(),f(s,{key:5})),r("span",{class:"versionInfo mx-[8px] bt-hover-link cursor-pointer",onClick:t[4]||(t[4]=(...e)=>o(E).histVersionInfoDialog&&o(E).histVersionInfoDialog(...e))}," v"+c((o(D).isBeta?"Beta ":"")+(o(O)||"获取中")),1),p(s),p(N,{class:"mr-[8px]","is-dot":"",hidden:1!==o(D).upgrade||o(D).hideBadge},{default:v(()=>[r("span",{class:"bt-link header-operation-btn",title:"点击获取最新版面板程序",onClick:t[5]||(t[5]=(...e)=>o(E).updateVersionDialog&&o(E).updateVersionDialog(...e))},[p(a,{name:"tools-update",size:"18",class:"hob-icon"}),t[15]||(t[15]=r("span",null,"更新",-1))])]),_:1},8,["hidden"]),r("span",{class:"bt-link header-operation-btn mr-[8px]",title:"修复面板会获取最新的面板代码程序，包含bug修复",onClick:t[6]||(t[6]=(...e)=>o(E).onRepair&&o(E).onRepair(...e))},[p(a,{name:"tools-repair",size:"18",class:"hob-icon"}),t[16]||(t[16]=r("span",null,"修复",-1))]),r("span",{class:"bt-link header-operation-btn",title:"点击可选择重启面板或重启服务器",onClick:t[7]||(t[7]=(...e)=>o(E).restartSeverDialog&&o(E).restartSeverDialog(...e))},[p(a,{name:"tools-restart",size:"18",class:"hob-icon"}),t[17]||(t[17]=r("span",null,"重启",-1))])])])}}}),[["__scopeId","data-v-eb3c6045"]]);const ta=new class{constructor(){this.watchList=new Map;const e=Bt();this.refs=u(e),this.useHomeData()}useRunCallback(){for(const[e,t]of this.watchList.entries())e in this.refs&&t(this.refs[e].value)}async useHomeData(){this.stopWatching=S(this.refs.isRefreshData,e=>{e&&(this.useRunCallback(),this.refs.isRefreshData.value=!1)},{immediate:!0})}useSetCallback(e,t){this.watchList.set(e,t)}stopUseHomeData(){this.stopWatching&&this.stopWatching()}unload(){this.watchList.size>0&&this.watchList.clear(),this.stopUseHomeData()}async getFirewallStatus(){Ce({area:45,component:()=>Se(()=>import("./index340.js?v=1764728423"),__vite__mapDeps([]),import.meta.url)})}},aa=I("NOTICE-STORE",()=>{const{panel:e}=we(),a=P(),l=t({memRealUsed:0,memTotal:0,memFree:0,memShared:0,memAvailable:0,memBuffers:0,memCached:0,memNewRealUsed:"0",memNewTotal:"0",memNewRealUsedList:[],memNewTotalList:[]}),s=t([]),o=t(!1),n=t(!1),i=t(!1),r=t(!1),c=t([]),d=t([]),u=m(()=>8888===e.value.port&&!e.value.noticeIgnore.port),p=m(()=>!(window.location.protocol.indexOf("https")>=0||e.value.noticeIgnore.https)),v=m(()=>o.value||n.value||u.value||p.value||i.value||r.value);ta.useSetCallback("memory",e=>{l.value=e;const{memTotal:t,memRealUsed:a}=l.value,s=t-a;o.value=s<64}),ta.useSetCallback("diskUsage",e=>{d.value=e,f()}),ta.useSetCallback("disk",e=>{s.value=e;s.value.some(e=>parseInt(e.data.inodes[3])>90)?(r.value=!0,c.value=[],c.value=s.value.map(e=>{if(parseInt(e.data.inodes[3])>90)return e.data.path})):r.value=!1});const f=()=>{d.value&&Number(d.value[2])<524288&&(i.value=!0)};return{noticeStatus:v,memoryStatus:o,usernameStatus:n,portStatus:u,httpsStatus:p,diskFullStatus:i,inodeFullStatus:r,inodePath:c,setNoticeStatus:async(t,a)=>{try{await Re({title:"忽略通知",content:"是否忽略".concat(a,"通知，不再提醒？")});const{data:l}=await De({name:t});e.value.noticeIgnore[t]=!0,Oe().request(l)}catch(l){}},checkFullDisk:f,onClear:async()=>{await Re({type:"calc",title:"释放内存",content:"若您的站点处于有大量访问的状态，释放内存可能带来无法预测的后果，您确定现在就释放内存吗？"}),_e({loading:"正在释放内存，请稍后...",request:vt(),message:!0})},editPortInfo:()=>{window.localStorage.setItem("config-dialog","port"),a.push({path:"/config/common"})},jumpConfig:()=>{window.localStorage.setItem("config-dialog","ssl"),a.push({path:"/config/common"})},jumpFiles:()=>{a.push({path:"/files"})}}}),la={key:0,class:"module-ui !p-0 mx-[1.2rem] mb-[1.2rem]"},sa={class:"mr-16px"},oa=["title"],na=Pe(e({__name:"index",setup(e){const a=aa(),{noticeStatus:s,memoryStatus:m,usernameStatus:y,portStatus:x,httpsStatus:b,diskFullStatus:w,inodeFullStatus:_,inodePath:k}=u(a),C=t(!1);return l(()=>{a.checkFullDisk(),L(()=>{const e=setInterval(async()=>{if(window.$extension){const t=await window.$extension();Ae(t.extensionElement)&&!t.extensionElement&&clearTimeout(e),t.extensionElement&&(t.extensionElement(),C.value=!0,clearTimeout(e))}},1e3)})}),(e,t)=>{const l=Be,u=M,S=E;return n(),i("div",null,[o(s)?(n(),i("div",la,[p(S,{class:"playTips",height:"5.6rem",direction:"vertical"},{default:v(()=>[o(m)?(n(),f(u,{key:1},{default:v(()=>[t[4]||(t[4]=r("i",{class:"svgtofont-el-warning-filled mr-[8px] text-large"},null,-1)),t[5]||(t[5]=r("span",{class:"mr-[16px]"},"当前可用物理内存小于64M，这可能导致MySQL自动停止，站点502等错误，请尝试释放内存！",-1)),p(l,{type:"info",title:"该风险不可忽略，请尽快处理",class:"align-middle mr-[16px]",size:"1.4rem",disabled:!0,href:"javascript:;"},{default:v(()=>[...t[2]||(t[2]=[h("[ 不可忽略 ]",-1)])]),_:1}),p(l,{onClick:o(a).onClear,class:"align-middle flex items-center",size:"1.4rem"},{default:v(()=>[...t[3]||(t[3]=[h("[ 立即清理 ]",-1)])]),_:1},8,["onClick"])]),_:1})):d("",!0),o(y)?(n(),f(u,{key:2},{default:v(()=>[t[8]||(t[8]=r("i",{class:"svgtofont-el-warning-filled mr-[8px] text-large"},null,-1)),t[9]||(t[9]=r("div",{class:"mr-[16px]"},"当前面板用户为admin,这可能为面板安全带来风险！",-1)),p(l,{type:"info",title:"该风险不可忽略，请尽快处理",class:"align-middle mr-[16px]",size:"1.4rem",disabled:!0,href:"javascript:;"},{default:v(()=>[...t[6]||(t[6]=[h("[ 不可忽略 ]",-1)])]),_:1}),p(l,{onClick:o(ft),class:"align-middle flex items-center",size:"1.4rem"},{default:v(()=>[...t[7]||(t[7]=[h("[ 立即修复 ] ",-1)])]),_:1},8,["onClick"])]),_:1})):d("",!0),o(x)?(n(),f(u,{key:3},{default:v(()=>[t[12]||(t[12]=r("i",{class:"svgtofont-el-warning-filled mr-[8px] text-large"},null,-1)),t[13]||(t[13]=r("div",{class:"mr-[16px]"},"当前面板使用的是默认端口[8888]，可能存在入侵风险，请到面板设置中修改面板端口！",-1)),p(l,{type:"info",title:"该风险可忽略，但存在一定的风险，推荐修改面板端口",class:"align-middle mr-[16px]",size:"1.4rem",onClick:t[0]||(t[0]=e=>o(a).setNoticeStatus("port","面板端口"))},{default:v(()=>[...t[10]||(t[10]=[h("[ 点击忽略 ]",-1)])]),_:1}),p(l,{onClick:o(a).editPortInfo,target:"_self",class:"align-middle flex items-center",size:"1.4rem"},{default:v(()=>[...t[11]||(t[11]=[h("[ 立即修复 ] ",-1)])]),_:1},8,["onClick"])]),_:1})):d("",!0),o(b)?(n(),f(u,{key:4},{default:v(()=>[t[16]||(t[16]=r("i",{class:"svgtofont-el-warning-filled mr-[8px] text-large"},null,-1)),t[17]||(t[17]=r("div",{class:"mr-[16px]"},"警告！当前面板使用HTTP访问，可能存在被窃取敏感信息风险，请立即开启【面板SSL】。",-1)),p(l,{type:"info",title:"该风险可忽略，但存在一定的风险，推荐开启面板SSL访问",class:"align-middle mr-[16px]",disabled:!0,size:"1.4rem",onClick:t[1]||(t[1]=e=>o(a).setNoticeStatus("https","面板SSL"))},{default:v(()=>[...t[14]||(t[14]=[h("[ 点击忽略 ]",-1)])]),_:1}),p(l,{onClick:o(a).jumpConfig,class:"align-middle flex items-center",size:"1.4rem"},{default:v(()=>[...t[15]||(t[15]=[h("[ 立即处理 ]",-1)])]),_:1},8,["onClick"])]),_:1})):d("",!0),o(w)?(n(),f(u,{key:5},{default:v(()=>[t[19]||(t[19]=r("i",{class:"svgtofont-el-warning-filled mr-8px text-large"},null,-1)),t[20]||(t[20]=r("div",{class:"mr-16px"},"警告：检测到磁盘可用空间不足，无法访问面板数据库，请前往文件管理清理",-1)),p(l,{onClick:o(a).jumpFiles,class:"align-middle",size:"1.4rem"},{default:v(()=>[...t[18]||(t[18]=[h("[ 立即前往 ]",-1)])]),_:1},8,["onClick"])]),_:1})):d("",!0),o(_)?(n(),f(u,{key:6},{default:v(()=>[t[24]||(t[24]=r("i",{class:"svgtofont-el-warning-filled mr-8px text-large"},null,-1)),r("div",sa,[t[21]||(t[21]=h(" 警告：检测到磁盘【 ",-1)),r("div",{class:"inline-block",title:o(k).join("\n")},[(n(!0),i(T,null,j(o(k),(e,t)=>(n(),i("span",{key:t},c(e),1))),128))],8,oa),t[22]||(t[22]=h(" 】Inode使用率超过90%，可用空间不足，请前往文件管理清理 ",-1))]),p(l,{onClick:o(a).jumpFiles,class:"align-middle",size:"1.4rem"},{default:v(()=>[...t[23]||(t[23]=[h("[ 立即前往 ]",-1)])]),_:1},8,["onClick"])]),_:1})):d("",!0)]),_:1})])):d("",!0),r("div",{id:"extension",class:g(o(C)?"module-ui !p-0 mx-[1.2rem] mb-[1.2rem]":"")},null,2)])}}}),[["__scopeId","data-v-1b882d8e"]]),ia=I("HOME-STATE-STORE",()=>{const e=Bt(),{payment:l,push:s}=we(),{authType:o}=a(l.value),n=t(0),i=t(12),r=t(!1),c=t(!1),d=B("colSpan",6),u=B("diskColSpan",6),m=B("stateHeight","22rem"),v=B("displayMode","single"),f=t([]),y=t("loadPopover"),h=t(!1),g=t(!0),x=t(null);let b=!1;const w=t([]),_=t({one:0,max:0,five:0,fifteen:0}),k=t({occupy:"",framework:"",coresOccupy:[0,0,0],cpuNumber:0,logicCores:0,cores:0,process:[0,0]}),C=t({memRealUsed:0,memTotal:0,memFree:0,memShared:0,memAvailable:0,memBuffers:0,memCached:0,memNewRealUsedList:[],memNewTotalList:[]}),S=t([]),I=R({memory:"success",cpu:"success",load:"success"}),P=t(null),L=t(!1),T=t(null),j=t(null),M=t(null),E=new Fe,D=R({type:"load",title:"负载",range:0}),O=R({type:"cpu",title:"CPU",range:0,desc:"获取中"}),A=R({type:"mem",title:"内存",range:0,desc:"0 / 0(MB)",disabled:!1});ta.useSetCallback("cpuTimes",e=>{S.value=[[{title:"用户级别的 CPU 时间百分比",name:"user",value:e.user},{title:'运行带有 "nice" 优先级的进程时使用的 CPU 时间百分比',name:"nice",value:e.nice}],[{title:"系统级别的 CPU 时间百分比",name:"system",value:e.system},{title:"空闲状态的 CPU 时间百分比",name:"idle",value:e.idle}],[{title:"等待 I/O 操作完成的 CPU 时间百分比",name:"iowait",value:e.iowait},{title:"处理硬件中断的 CPU 时间百分比",name:"irq",value:e.irq}],[{title:"处理软件中断的 CPU 时间百分比",name:"softirq",value:e.softirq},{title:"当前 CPU 被其他虚拟机偷取的CPU时间百分比",name:"steal",value:e.steal}],[{title:"运行虚拟机时使用的 CPU 时间百分比",name:"guest",value:e.guest},{title:'运行带有 "nice" 优先级的虚拟机时使用的CPU时间百分比',name:"guest_nice",value:e.guest_nice}]]}),ta.useSetCallback("load",e=>{_.value=e,V()}),ta.useSetCallback("disk",e=>{w.value=e});const V=()=>{const{one:e,max:t}=_.value,a=parseInt(Math.round(e/t*100).toFixed(0)),l=a>100?100:a;D.range=l<0?0:l,I.load=l>=90?"danger":l>=80?"warning":"success"};ta.useSetCallback("cpu",e=>{k.value=e,z(),(()=>{const{cpuNumber:e,logicCores:t,cores:a}=k.value;O.desc=e&&t&&a?"".concat(a,"核心"):"获取中"})(),F()});const z=()=>{const{occupy:e}=k.value;O.range=parseInt(e)||0,O.range>80?I.cpu="warning":O.range>90?I.cpu="danger":I.cpu="success"},F=()=>{let e=[],t=0,a="核心 ",l="";for(let s=0;s<k.value.coresOccupy.length;s++)if(t<2){if(t++,s===k.value.coresOccupy.length-1){a+="".concat(s+1," "),l+="".concat(parseFloat(k.value.coresOccupy[s]).toFixed(1),"% "),e.push({name:a,value:l});break}a+="".concat(s+1," / "),l+="".concat(parseFloat(k.value.coresOccupy[s]).toFixed(1),"% / "),k.value.coresOccupy.length%2==1&&s===k.value.coresOccupy.length-1&&e.push({name:a,value:l})}else t=0,a+="".concat(s+1),l+="".concat(parseFloat(k.value.coresOccupy[s]).toFixed(1),"%"),e.push({name:a,value:l}),a="核心 ",l="";f.value=e};ta.useSetCallback("memory",e=>{C.value=e,H()});const H=()=>{const{memRealUsed:e,memTotal:t,memNewRealUsedList:a,memNewTotalList:l}=C.value;if(h.value)return;const s=parseInt((Math.round(e/t*1e3)/10).toFixed(0));I.memory=s>=80?"warning":s>=90?"danger":"success",A.type="mem",A.range=s,A.desc={used:null==a?void 0:a[0],used_unit:null==a?void 0:a[1],total:null==l?void 0:l[0],total_unit:null==l?void 0:l[1]}},N=async()=>{try{(()=>{let e="";h.value=!0,g.value=!1,A.disabled=!0,x.value=setInterval(()=>{let{range:t}=A;e="..."===e?".":"".concat(e,"."),A.rangeText="释放中".concat(e),t>0&&(t-=.2*t),t=Number(t.toFixed(2)),t<0&&(t=0),A.range=t},400)})();const{data:e}=await vt();(e=>{x.value&&clearInterval(x.value);const t=e.memRealUsed-e.memRealUsed,a=We(t)?t:Ue(t);A.range=1,A.rangeText="已释放\n ".concat(a),setTimeout(()=>{h.value=!1,A.rangeText="",A.disabled=!1,g.value=!0},1500)})(e)}catch(e){}},W=t(),U=R({name:"",path:""}),q=R({loading:!0,list:[],total:0}),G=e=>{Z(!0,e)},K=async e=>{await Re({title:"删除告警任务",isHtml:!0,icon:"warning-filled",iconColor:"warning",content:"删除后将不再告警此条任务，是否继续？"}),await _e({loading:"正在删除告警任务，请稍后...",request:He({task_id:e.id}),message:!0,success:Q})},$=[{title:"钉钉",type:"dingding"},{title:"飞书",type:"feishu"},{title:"邮箱",type:"mail"},{title:"企业微信",type:"weixin"},{title:"微信公众号",type:"wx_account"},{title:"短信通知",type:"sms"},{title:"自定义消息通道",type:"webhook"}],J=t([{label:"标题",prop:"title"},Rt({event:async e=>{const t=e.status,a=e.title;await Re({title:(t?"停用":"启用")+"告警任务【"+a+"】",content:"".concat(t?"停用":"启用","选中的告警任务后，该告警任务将").concat(t?"停止":"开启","告警，是否继续操作？"),icon:"warning-filled"}),await _e({loading:"正在设置告警状态，请稍后...",request:Ne({task_id:e.id,status:t?0:1}),message:!0}),await Q()},width:80,data:["已停用","已启用"]}),{label:"告警方式",width:140,showOverflowTooltip:!0,render:e=>{let t=[];return e.sender.forEach(e=>{const a=s.value.config.find(t=>t.id===e);if(null==a?void 0:a.sender_type){const e=$.find(e=>e.type===a.sender_type);(null==e?void 0:e.title)&&t.push("sms"===a.sender_type?e.title:a.data.title?a.data.title+"(".concat(e.title,")"):e.title)}}),p("span",{class:"truncate"},[t.join("、")])}},{label:"告警条件",render:e=>{const t=e.view_msg.match(/<span>(.*?)<\/span>/);return t?t[1]:""}},Dt([{title:"编辑",onClick:G},{title:"删除",onClick:K}])]),Z=(e,t)=>{Ce({title:"进程告警",area:[80],btn:["保存","取消"],component:()=>Se(()=>import("./index120.js?v=1764728423"),__vite__mapDeps([]),import.meta.url),compData:{isEdit:e,row:t||{},diyProcessTemplate:!0,diyProcessTemplateTid:["60","61","62"],onRefresh:Q}})},Q=async()=>{var e;const{data:t}=await ze();q.list=(null==(e=null==t?void 0:t.data)?void 0:e.filter(e=>["60","61","62"].includes(e.template_id)))||[],q.list.length>0||Z(!1),q.loading=!1};return{stateMainWidth:n,gutter:i,isBreakLines:r,isShowAllDisk:c,colSpan:d,diskColSpan:u,stateHeight:m,displayMode:v,cpuCoreDesc:f,statePopoverTimr:P,loadInfo:D,loadPopover:T,processAlarmShow:L,tagsType:I,load:_,cpu:k,loadInfoList:S,cpuInfo:O,cpuPopover:j,memoryInfo:A,memoryPopover:M,memory:C,disk:w,getProcessAlarm:async()=>{const{data:e}=await Ve({sName:"task_manager"});e.setup?L.value=!0:L.value=!1},moveStatePopover:async(t,a)=>{if(y.value=a,"ltd"!==o.value)return;const l=async()=>{b||(b=!0,await e.getHomeProcessInfo(),b=!1)};P.value=setInterval(l,5e3),E.removePending({method:"post",url:"/monitor/process_management/specific_resource_load_type"}),await l()},removeStatePopover:()=>{clearInterval(P.value)},onClearMemory:async()=>{try{await Re({type:"calc",title:"释放内存",content:"若您的站点处于有大量访问的状态，释放内存可能带来无法预测的后果，您确定现在就释放内存吗？"}),N()}catch(e){}},$reset:()=>{E.reset(),clearInterval(P.value),clearInterval(x.value)},setPsFormRef:W,setPsForm:U,onConfirmPs:e=>{_e({loading:"正在修改备注，请稍后...",request:yt(U),message:!0,success:t=>{t.status&&e()}})},processAlarmTableColumn:J,processTableData:q,openProcessAlarm:Z,initAlarm:Q,hoverType:y,isClearMemory:h,showMemoryDesc:g}}),ra=I("HOME-STATE-POPOVER-STORE",()=>{var e;const l=Bt(),{specificResource:s,diskQuota:o}=u(l),{payment:n,push:i,getAlarmData:r}=we(),{authType:c}=a(n.value),d=ia(),{setPsForm:m}=u(d),v=t(),f=t(),y=t();let h=null;const g=[{desc:"运行堵塞",val:90,color:"#dd2f00"},{desc:"运行缓慢",val:80,color:"#ff9900"},{desc:"运行正常",val:70,color:"var(--el-color-primary)"},{desc:"运行流畅",val:30,color:"var(--el-color-primary)"}],x=t("show"),b=t("two"),w=R({loading:!0,list:[]}),_=t((null==(e=i.value)?void 0:e.alarmPopupData)||[]),k={load:{title:"负载",id:"22"},cpu:{title:"cpu",id:"21"},mem:{title:"内存",id:"23"},disk:{title:"磁盘",id:"20"}},C=t({});t();const S=async e=>{var t;C.value={...e,id:e.id||k[null==(t=e.type)?void 0:t.split("-")[0]].id},Ce({title:"告警设置",component:()=>Se(()=>import("./alarm-config.js?v=1764728423"),__vite__mapDeps([]),import.meta.url),area:60,btn:"保存",onConfirm:O,onCancel:()=>{r()}})},I=e=>{let t,a,l;switch(e){case"load":a="平均负载超过";break;case"mem":a="内存超过";break;case"cpu":a="平均CPU超过"}const s=L(e);return t=s.cycle,l=s.count,a||(a=s.text),Ke(t)||Ke(a)?"":"".concat((null==e?void 0:e.includes("disk"))?"":"".concat(t,"分钟内")).concat(a).concat(l,"触发")},P=e=>{var t;const a=k[e.split("-")[0]];return!!Array.isArray(_.value)&&(null==(t=_.value)?void 0:t.find(t=>(null==e?void 0:e.includes("disk"))?t.template_id===a.id&&t.task_data.project===e.split("-")[1]:t.template_id===a.id))},L=e=>{let t,a,l;const s=P(e);if(s){const o=s.task_data;t=o.cycle,l="".concat(o.count,"%"),e.includes("disk")&&o.project===e.split("-")[1]&&(a=2===o.cycle?"该磁盘用量超过":"该磁盘余量不足",l=2===o.cycle?"".concat(o.count,"%"):"".concat(o.count,"GB"))}return{cycle:t,text:a,count:l}},T=t(!1),j=t(),M=R({num:0,usageRate:0,give:[],option:{},type:"",selectOptions:[],typeDetection:"2",next_data:[]}),E=t(100),B=t([]),D=t([]),O=async()=>{await j.value.validate();const{type:e,data:t,id:a}=C.value;let l={task_data:{...t||{},type:e.includes("disk")?e.split("-")[0]:e,count:parseInt("".concat(M.usageRate)),cycle:e.includes("disk")?parseInt(M.typeDetection):5,project:e.split("-")[1]?e.split("-")[1]:"",next_data:M.next_data},time_rule:{send_interval:0,time_range:[0,86399]},number_rule:{day_num:parseInt("".concat(M.num)),total:0},sender:M.give};await _e({loading:"正在保存告警配置，请稍后...",request:$e({task_data:JSON.stringify(l),template_id:a}),message:!0,success:async t=>{await r(),I(e)}})},A=t([{label:"磁盘路径",prop:"filesystem",render:e=>p("div",{class:"flex items-center"},[p("span",{class:"svgtofont-file-hdd mr-4px !text-medium align-text-bottom"},null),p("span",null,[e.filesystem])])},{label:"总大小",prop:"size"}]),V=e=>{if("0"===e)return 0;const t=e.match(/^(\d+(?:\.\d+)?)(?: )?([a-zA-Z]+)$/);if(!t)throw new Error("Invalid size format: ".concat(e));const a=parseFloat(t[1]),l=t[2].toUpperCase(),s=["B","KB","MB","G","GB","T","TB"].indexOf(l);if(-1===s)throw new Error("Invalid unit: ".concat(l));return a*Math.pow(1024,s)};return{virtualRef:v,popover:f,popoverContent:y,chartColorActive:(e,t)=>{let a={};for(let l=0;l<g.length;l++){const t=g[l];if(e>=t.val){a={...t};break}if(e<30){a={...g[g.length-1]};break}}return t&&(a.color="#dd2f00"),a.val=e,a},dirEvent:(e,t)=>{"None"!==t?(qe("Path",e),Ge.push({path:"/files"})):ht({name:"sysdisk"})},init:()=>{h=new ResizeObserver(()=>{f.value&&f.value.updatePopper()}),y.value&&h.observe(y.value)},$reset:()=>{h&&y.value&&h.unobserve(y.value)},authType:c,specificResource:s,tableData:w,foldExpand:x,foldActive:b,useHomeTableColumn:(e,a,l)=>t([{label:"进程名称",minWidth:80,render:e=>{const t="备注：".concat(e.explain,"\n启动路径： ").concat(e.exe_path,"\n运行目录：").concat(e.cwd_path,"\n线程数量：").concat(e.num_threads);return p("span",{title:t},[e.proc_name])}},{label:a,prop:l,minWidth:70},{label:"操作",align:"right",fixed:"right",width:50,render:t=>p("span",{class:"cursor-pointer text-primary",onClick:()=>{(async(e,t)=>{if(1!==e.important){const a=t?"结束进程":"释放内存";await Re({type:"calc",title:a,content:"结束".concat(e.proc_name,"进程会导致").concat(e.explain.split("的进程")[0],"无法正常运行，是否结束?")}),await _e({loading:"正在".concat(a,"，请稍后..."),request:xt({pid:e.pid}),message:!0})}})(t,e)}},[1===t.important?"":"cpu_percent"===l?"结束":"释放"])}]),openProcessAlarmDialog:()=>{Ce({title:"进程告警",area:["100","50"],component:()=>Se(()=>import("./process-alarm-manage.js?v=1764728423"),__vite__mapDeps([]),import.meta.url)})},openProduct:()=>{gt({sourceId:141})},push:i,devTaskList:_,openAlarmPopup:async(e,t)=>{if(0===t.id)S(t);else try{const a=e?"开启":"关闭";!e&&await Re({title:"".concat(a,"告警"),content:"".concat(a,"告警后，将").concat(e?"":"不再","接收到该项的告警信息，是否继续操作？")});const l=P(t.type);await _e({loading:"正在".concat(a,"告警，请稍后..."),request:Ne({task_id:l.id,status:e?1:0}),message:!0,success:r})}catch(a){t.flag=!e,r()}},setAlarmDialog:S,createPushStatus:I,getCurrentTask:P,onConfirm:O,giveFormDisabled:T,giveFormRef:j,msgForm:M,maxCapacityAndUsageRate:E,nextOptions:B,options:D,alarmInfo:async()=>{(async()=>{try{const e=await Je();B.value=e.data.map(e=>({label:e.title,value:e.value}))}catch(e){}})();const{type:e,data:t,id:a}=C.value;t?(M.usageRate=t.count,M.num=t.push_count,M.next_data=t.next_data||[],-1!==e.indexOf("disk")&&(M.typeDetection=t.cycle.toString()),M.give=t.module):(M.usageRate=80,M.num=3,-1!==e.indexOf("disk")&&(M.typeDetection="2"))},rowData:C,mountColumn:A,computedSpace:(e,t)=>{const a=["B","KB","MB","GB","TB"];let l=V(e)-V(t),s=0;for(;l>=1024&&s<a.length-1;)l/=1024,s++;return l=Math.round(100*l)/100,"".concat(l," ").concat(a[s])},setPsDialog:async e=>{m.value.name=e.ps,m.value.path=e.path,Ce({title:"设置磁盘【"+e.path+"】别名",area:45,component:()=>Se(()=>import("./index341.js?v=1764728423"),__vite__mapDeps([]),import.meta.url),btn:!0,onConfirm:d.onConfirmPs})},scanRubbishFile:async e=>{ht({pluginName:"disk_analysis",source:120,type:"ltd"}),qe("diskPath",e),qe("taskStatus","true")},switchTypeDetection:()=>{const{type:e,data:t,id:a}=C.value;M.typeDetection!==t.cycle&&("2"===M.typeDetection?M.usageRate=80:o.value.forEach(t=>{t.diskName===e.split("-")[1]&&(E.value=t.diskQuota,M.usageRate=parseInt((.2*t.diskQuota).toString()))}))}}}),ca={class:"alarm"},da={class:"w-[21rem] ml-[0.8rem]"},ua=Pe(e({__name:"alarm",props:{type:{},diskName:{}},setup(e){const a=e,s=m(()=>a.type),d=ra(),{push:f,devTaskList:y}=u(d);S(()=>f.value.alarmPopupData,e=>{y.value=e},{deep:!0,immediate:!0});const g=t(!1),x=m(()=>{var e;const t={type:s.value,data:!1,id:0,status:!1},a=d.getCurrentTask(s.value);if(a){const l=a.task_data;(null==(e=s.value)?void 0:e.includes("disk"))?(2===l.cycle?"".concat(l.count,"%"):"".concat(l.count,"GB"),g.value=!!a.status,t.status=!!a.status,t.data={...l,module:a.sender,push_count:a.number_rule.day_num},t.id=a.template_id):(g.value=!!a.status,t.status=!!a.status,t.data={...l,module:a.sender,push_count:a.number_rule.day_num},t.id=a.template_id)}return t});return S(()=>x.value,e=>{g.value=e.status},{deep:!0,immediate:!0}),l(()=>{}),(e,t)=>{const a=O,l=Be;return n(),i("div",ca,[t[4]||(t[4]=r("div",null,[r("span",null,"告警")],-1)),p(a,{size:"small",class:"ml-[0.8rem]",modelValue:o(g),"onUpdate:modelValue":t[0]||(t[0]=e=>D(g)?g.value=e:null),onChange:t[1]||(t[1]=e=>o(d).openAlarmPopup(o(g),o(x)))},null,8,["modelValue"]),t[5]||(t[5]=r("div",{class:"switch"},null,-1)),p(l,{onClick:t[2]||(t[2]=e=>o(d).setAlarmDialog(o(x)))},{default:v(()=>[...t[3]||(t[3]=[h("设置",-1)])]),_:1}),r("span",da,c(o(d).createPushStatus(o(s))),1)])}}}),[["__scopeId","data-v-155cf61f"]]),ma={class:""},pa={class:"flex justify-between w-full"},va={class:"px-[8px] text-secondary"},fa={class:"mt-[10px] space-y-[1rem] mx-[8px] text-secondary"},ya={class:"flex justify-between items-center w-full"},ha={class:"px-[8px] text-secondary leading-[3rem] text-center"},ga={class:"space-y-[1rem] text-secondary leading-[1.4rem] px-[0.8rem]"},xa={class:"flex justify-between w-full"},ba={class:"px-[8px] text-secondary leading-[3rem] text-center"},wa={class:"mt-[8px] space-y-[1rem]"},_a={key:0,class:"mb-1rem"},ka={class:"flex items-center justify-center flex-nowrap w-full"},Ca={class:"whitespace-nowrap"},Sa=Pe(e({__name:"popover-content",props:{loadType:{default:""},type:{default:""},processAlarmShow:{type:Boolean,default:!1}},setup(e,{expose:t}){const a=e,{hoverType:l}=u(ia()),s=ra(),{specificResource:y,authType:x,tableData:b,foldExpand:w,foldActive:_}=u(s),k=m(()=>{const{type:e}=a;return-1!==e.indexOf("未挂载")}),C=m(()=>"loadPopover"===l.value||"cpuPopover"===l.value),I=m(()=>s.useHomeTableColumn(C.value,C.value?"CPU占用率":"内存使用率",C.value?"cpu_percent":"memory_usage").value),P=m(()=>"memoryInfo"!==a.loadType),L=m(()=>"diskInfo"!==a.loadType),j=m(()=>{const{loadType:e}=a,t={one:"",two:"",three:""};return t.one="memoryInfo"===e?"内存信息":"基础信息","diskInfo"!==e?C.value?("loadInfo"===e?t.two="更多负载信息":"cpuInfo"===e&&(t.two="核心使用率"),t.three="CPU占用率top5的进程信息"):"memoryInfo"===e&&(t.two="内存信息",t.three="内存使用率top5的进程信息"):t.two="Inode信息",t});return S(()=>y.value,e=>{"ltd"===x.value?(b.value.loading=!1,C.value?b.value.list=y.value.cpuProcess:b.value.list=y.value.memProcess):(b.value.loading=!1,b.value.list=[])},{deep:!0,immediate:!0}),S(()=>x.value,e=>{"ltd"!==e&&(b.value.loading=!1,b.value.list=[])}),t({showTwo:P,showThree:L}),(t,l)=>{const u=H,m=N,y=W,C=Be,S=Ze,M=U,E=A("bt-loading");return n(),f(M,{shadow:"never",class:"card-popover !p-[8px]"},{default:v(()=>[r("div",ma,[V(t.$slots,"button",{},void 0,!0)]),p(m,{class:"text-small",modelValue:o(w),"onUpdate:modelValue":l[0]||(l[0]=e=>D(w)?w.value=e:null),accordion:!0},{default:v(()=>[p(u,{ref:"base-info",name:"show"},{title:v(()=>[r("div",pa,[r("span",va,c(o(j).one),1)])]),default:v(()=>[r("div",fa,[V(t.$slots,"base-info",{},void 0,!0)]),o(k)?d("",!0):(n(),i(T,{key:0},[l[2]||(l[2]=r("hr",{style:{width:"calc(100% - 16px)",margin:"12px auto","border-top":"1px solid var(--el-color-border-extra-light)"}},null,-1)),p(ua,{type:e.type,class:"mx-[8px]"},null,8,["type"])],64))]),_:3},512)]),_:3},8,["modelValue"]),o(k)?d("",!0):(n(),f(m,{key:0,class:"text-small",modelValue:o(_),"onUpdate:modelValue":l[1]||(l[1]=e=>D(_)?_.value=e:null),accordion:!0},{default:v(()=>[o(P)?(n(),f(u,{key:0,name:"two"},{title:v(()=>[r("div",ya,[r("span",ha,c(o(j).two),1),r("span",null,c("two"===o(_)?"收起":"展开"),1)])]),default:v(()=>[r("div",ga,[V(t.$slots,"content-info",{},void 0,!0)])]),_:3})):d("",!0),o(L)?(n(),f(u,{key:1,name:"three",class:g({"!mb-0":!o(P)})},{title:v(()=>[r("div",xa,[r("span",ba,c(o(j).three),1),r("span",null,c("three"===o(_)?"收起":"展开"),1)])]),default:v(()=>[r("div",wa,[r("div",null,[a.processAlarmShow?(n(),i("div",_a,[p(y,{size:"small",onClick:o(s).openProcessAlarmDialog},{default:v(()=>[...l[3]||(l[3]=[h("进程告警",-1)])]),_:1},8,["onClick"])])):d("",!0),z((n(),f(S,{column:o(I),data:o(b).list,"max-height":450},F({_:2},["ltd"!==o(x)?{name:"empty",fn:v(()=>[r("div",ka,[r("span",Ca,[l[5]||(l[5]=h("当前为企业版专享功能, ",-1)),p(C,{onClick:o(s).openProduct},{default:v(()=>[...l[4]||(l[4]=[h("立即购买",-1)])]),_:1},8,["onClick"])])])]),key:"0"}:void 0]),1032,["column","data"])),[[E,o(b).loading]])])])]),_:1},8,["class"])):d("",!0)]),_:3},8,["modelValue"]))]),_:3})}}}),[["__scopeId","data-v-fe406548"]]),Ia={class:"flex items-center justify-between mb-[1.2rem] leading-[2.8rem]"},Pa={class:"flex items-center"},La={class:"flex align-left flex-col"},Ta={class:"flex items-center"},ja=["title"],Ma={class:"flex align-left flex-col"},Ea={class:"mb-[2px]"},Ba={key:0,class:"m-4x flex items-center"},Ra={class:"!my-[1rem]"},Da={class:"!my-[1rem]"},Oa={class:"!my-[1rem]"},Aa=Pe(e({__name:"disk-popover",props:{custom:{type:Boolean,default:!1},item:{default:[]}},setup(e){const t=e,{enterpriseRec:a}=we(),l=ra(),{mountColumn:s}=u(l),y=m(()=>"None"===t.item.data.path),x=m(()=>{const e="string"==typeof t.item.data.size?0:parseFloat(t.item.data.size[3].substring(0,t.item.data.size[3].lastIndexOf("%")));return e>=90?"danger":e>=80?"warning":"success"});return(u,m)=>{const b=G,w=K,_=W,k=$,C=Be,S=Ze;return n(),f(Sa,{"load-type":"diskInfo",type:"disk-".concat(t.item.info.title)},{button:v(()=>[o(y)?d("",!0):(n(),i(T,{key:0},[parseInt(t.item.data.inodes[3])>90?(n(),f(b,{key:0,title:"Inode可用不足10%，请前往文件管理清理不必要文件",type:"error",class:"!mb-8px !min-h-[24px] !py-4px",closable:!1})):d("",!0),r("div",Ia,[r("div",Pa,[m[2]||(m[2]=r("span",{class:"text-secondary text-base mr-[4px] ml-[8px]"},"检测到当前磁盘",-1)),p(w,{type:o(x)},{default:v(()=>[h(c("容量占用".concat(t.item.data.size[3].substring(0,t.item.data.size[3].lastIndexOf("%")),"%")),1)]),_:1},8,["type"])]),z(p(_,{type:"primary",onClick:m[0]||(m[0]=e=>o(l).scanRubbishFile(t.item.info.title))},{default:v(()=>[...m[3]||(m[3]=[h("立即清理",-1)])]),_:1},512),[[q,o(a)]])])],64))]),"base-info":v(()=>[o(y)?(n(),f(S,{key:1,data:e.item.data.list,column:o(s)},null,8,["data","column"])):(n(),i(T,{key:0},[r("div",La,[r("div",Ta,[r("div",{class:"block truncate max-w-[30rem] mb-[2px]",title:"挂载点：".concat(e.item.info.title,"\n备注：").concat(e.item.data.rname)},"挂载点： "+c(e.item.info.title+(e.item.data.rname?" (".concat(e.item.data.rname,")"):"")),9,ja),p(k,{placement:"right",content:"点击设置备注"},{default:v(()=>[r("i",{class:"svgtofont-el-edit text-primary ml-[8px] cursor-pointer",onClick:m[1]||(m[1]=t=>o(l).setPsDialog({ps:e.item.data.rname||e.item.info.title,path:e.item.info.title}))})]),_:1})]),r("span",null,c("共：".concat(e.item.data.size[0])+"，可用：".concat(e.item.data.size[2])+"，\t已用：".concat(e.item.data.size[1])),1)]),r("div",Ma,[r("span",Ea," 文件系统："+c(e.item.data.filesystem),1),r("span",null," 类型："+c(e.item.data.type+"，系统占用：".concat(e.item.data.size[3])),1)]),"None"!==e.item.data.d_size?(n(),i("div",Ba,[r("span",null," 磁盘大小："+c(e.item.data.d_size),1),p(k,{class:"item",effect:"dark",content:"根据系统设置的不同，如分区/SWAP/LVM/扩容，可能显示大小不一致，点击查看详情",placement:"top-start"},{default:v(()=>[r("span",null,[p(C,{class:"bt-ico-ask ml-3",href:"https://www.bt.cn/bbs/thread-136532-1-1.html",target:"_blank"},{default:v(()=>[...m[4]||(m[4]=[h("?",-1)])]),_:1})])]),_:1})])):d("",!0)],64))]),"content-info":v(()=>[r("p",Ra,"总数："+c(e.item.data.inodes[0]),1),r("p",Da,"已用："+c(e.item.data.inodes[1]),1),r("p",Oa,"可用："+c(e.item.data.inodes[2]),1),r("p",{class:g(["!my-[1rem]",{"text-warning":parseInt(t.item.data.inodes[3])>90&&parseInt(t.item.data.inodes[3])<100,"text-danger":100===parseInt(t.item.data.inodes[3])}])}," 使用率："+c(e.item.data.inodes[3]+(e.item.data.inodes[3].includes("%")?"":"%")),3)]),_:1},8,["type"])}}}),[["__scopeId","data-v-8e7d8285"]]),Va={class:"disk-info flex flex-col items-start flex-1 min-w-0"},za={class:"disk-title text-default text-small md:text-2xl font-semibold mb-2 break-all truncate w-full"},Fa={class:"disk-desc text-small text-gray-500 break-all mb-1 truncate w-full"},Ha={class:"disk-progress ml-5 flex items-center justify-center"},Na={class:"flex flex-col items-center text-small"},Wa={class:"text-medium"},Ua={class:"flex items-center justify-between mb-[1.2rem] leading-[2.8rem]"},qa={class:"flex items-center"},Ga={class:"flex align-left flex-col"},Ka={class:"flex items-center"},$a=["title"],Ja=["onClick"],Za={class:"flex align-left flex-col"},Qa={key:0,class:"m-4x flex items-center"},Ya={class:"mb-[2px]"},Xa={class:"!my-[1rem]"},el={class:"!my-[1rem]"},tl={class:"!my-[1rem]"},al={key:1,class:"p-4 text-gray-400"},ll=Pe(e({__name:"disk-popover-extends",props:{list:{default:()=>[]},isShowAllDisk:{type:Boolean,default:!1}},setup(e){const t=e,{enterpriseRec:a}=we(),l=ra(),{mountColumn:s}=u(l),m=(e,t)=>{var a;const l=null==(a=e.info)?void 0:a.range;return Number(l)>90?"var(--el-color-danger)":Number(l)>80?"var(--el-color-warning)":"var(--el-color-primary)"},y=e=>{const t="string"==typeof e.data.size?0:parseFloat(e.data.size[3].substring(0,e.data.size[3].lastIndexOf("%")));return t>=90?"danger":t>=80?"warning":"success"};return(e,u)=>{const x=Z,w=G,_=K,k=W,C=$,S=Be,I=Ze,P=b;return t.list&&t.list.length?(n(!0),i(T,{key:0},j(t.list,(e,b)=>{var L;return n(),f(P,{key:(null==(L=null==e?void 0:e.info)?void 0:L.title)?e.info.title+"-"+b:b,trigger:"hover",width:400,placement:"bottom-start",teleported:!1,"popper-class":"el-popover-shadow","show-after":100,"hide-after":0},{reference:v(()=>{var a,l,s,o,d,f,y,b,w,_,k,C,S,I;return[r("div",{class:g([t.isShowAllDisk?"p-[1rem]":"px-[1rem]","flex items-center justify-between min-w-0 cursor-pointer transition-colors hover:bg-lighter rounded-medium"])},[r("div",Va,[r("div",za,c((null==(a=e.info)?void 0:a.title)||"-"),1),r("div",Fa,["object"==typeof(null==(l=e.info)?void 0:l.desc)&&"disk"===(null==(s=e.info)?void 0:s.type)?(n(),i(T,{key:0},[r("span",{style:J({color:null==(o=e.info)?void 0:o.color})},c(null==(f=null==(d=e.info)?void 0:d.desc)?void 0:f.used)+" "+c(null==(b=null==(y=e.info)?void 0:y.desc)?void 0:b.used_unit),5),u[0]||(u[0]=r("span",null," / ",-1)),r("span",null,c(null==(_=null==(w=e.info)?void 0:w.desc)?void 0:_.total)+" "+c(null==(C=null==(k=e.info)?void 0:k.desc)?void 0:C.total_unit),1)],64)):(n(),i(T,{key:1},[h(c((null==(S=e.info)?void 0:S.desc)||"-"),1)],64))])]),r("div",Ha,[p(x,{"show-text":!0,type:"circle",width:50,"stroke-width":6,color:m(e),percentage:(null==(I=e.info)?void 0:I.range)||0},{default:v(({percentage:t})=>[r("div",Na,[r("span",{class:"percentage-value",style:J({color:m(e)})},[r("span",Wa,c(t),1),u[1]||(u[1]=h("% ",-1))],4)])]),_:2},1032,["color","percentage"])])],2)]}),default:v(()=>[e&&e.data&&e.info?(n(),f(Sa,{key:0,"load-type":"diskInfo",type:"disk-".concat(e.info.title),item:e},{button:v(()=>["None"!==e.data.path?(n(),i(T,{key:0},[parseInt(e.data.inodes[3])>90?(n(),f(w,{key:0,title:"Inode可用不足10%，请前往文件管理清理不必要文件",type:"error",class:"!mb-8px !min-h-[24px] !py-4px",closable:!1})):d("",!0),r("div",Ua,[r("div",qa,[u[2]||(u[2]=r("span",{class:"text-secondary text-base mr-[4px] ml-[8px]"},"检测到当前磁盘",-1)),p(_,{type:y(e)},{default:v(()=>[h(c("容量占用".concat(e.data.size[3].substring(0,e.data.size[3].lastIndexOf("%")),"%")),1)]),_:2},1032,["type"])]),z(p(k,{type:"primary",onClick:t=>o(l).scanRubbishFile(e.info.title)},{default:v(()=>[...u[3]||(u[3]=[h("立即清理",-1)])]),_:1},8,["onClick"]),[[q,o(a)]])])],64)):d("",!0)]),"base-info":v(()=>["None"!==e.data.path?(n(),i(T,{key:0},[r("div",Ga,[r("div",Ka,[r("div",{class:"block truncate max-w-[30rem]",title:"挂载点：".concat(e.info.title,"\n备注：").concat(e.data.rname)},"挂载点： "+c(e.info.title+(e.data.rname?" (".concat(e.data.rname,")"):"")),9,$a),p(C,{placement:"right",content:"点击设置备注"},{default:v(()=>[r("i",{class:"svgtofont-el-edit text-primary ml-[8px] cursor-pointer",onClick:t=>o(l).setPsDialog({ps:e.data.rname||e.info.title,path:e.info.title})},null,8,Ja)]),_:2},1024)]),r("span",null,c("共：".concat(e.data.size[0],"，可用：").concat(e.data.size[2],"，\t已用：").concat(e.data.size[1])),1)]),r("div",Za,[r("span",null," 文件系统："+c(e.data.filesystem),1),r("span",null," 类型："+c(e.data.type+"，系统占用：".concat(e.data.size[3])),1)]),"None"!==e.data.d_size?(n(),i("div",Qa,[r("span",Ya," 磁盘大小："+c(e.data.d_size),1),p(C,{class:"item",effect:"dark",content:"根据系统设置的不同，如分区/SWAP/LVM/扩容，可能显示大小不一致，点击查看详情",placement:"top-start"},{default:v(()=>[r("span",null,[p(S,{class:"bt-ico-ask ml-3",href:"https://www.bt.cn/bbs/thread-136532-1-1.html",target:"_blank"},{default:v(()=>[...u[4]||(u[4]=[h("?",-1)])]),_:1})])]),_:1})])):d("",!0)],64)):(n(),f(I,{key:1,data:e.data.list,column:o(s)},null,8,["data","column"]))]),"content-info":v(()=>[r("p",Xa,"总数："+c(e.data.inodes[0]),1),r("p",el,"已用："+c(e.data.inodes[1]),1),r("p",tl,"可用："+c(e.data.inodes[2]),1),r("p",{class:g(["!my-[1rem]",{"text-warning":parseInt(e.data.inodes[3])>90&&parseInt(e.data.inodes[3])<100,"text-danger":100===parseInt(e.data.inodes[3])}])}," 使用率："+c(e.data.inodes[3]+(e.data.inodes[3].includes("%")?"":"%")),3)]),_:2},1032,["type","item"])):(n(),i("div",al,"无数据"))]),_:2},1024)}),128)):d("",!0)}}}),[["__scopeId","data-v-a44f2c40"]]),sl={class:"w-full"},ol={class:"flex items-center justify-between mb-[1.2rem] leading-[2.8rem]"},nl={class:"flex items-center"},il={class:"disk-body-list flex justify-between"},rl={id:"load_one"},cl={class:"disk-body-list flex justify-between"},dl={id:"load_cpu_times_num"},ul={class:"disk-item-body",id:"other_info_html"},ml={class:"table table-fixed whitespace-nowrap"},pl=["title"],vl=["title"],fl={class:"flex items-center justify-between mb-[1.2rem] leading-[2.8rem]"},yl={class:"flex items-center"},hl={class:"max-h-[8.2rem] overflow-y-auto"},gl={class:"flex items-center justify-between mb-[1.2rem] leading-[2.8rem]"},xl={class:"flex items-center"},bl={class:"flex align-left flex-col"},wl={class:"flex justify-between mb-[4px]"},_l={class:"w-[50%]"},kl={class:"inline-flex justify-start"},Cl={class:"w-[50%]"},Sl={class:"inline-flex justify-start"},Il={class:"flex justify-between mb-[4px]"},Pl={class:"w-[50%]"},Ll={class:"inline-flex justify-start"},Tl={class:"w-[50%]"},jl={class:"inline-flex justify-start"},Ml={class:"flex justify-between mb-[4px]"},El={class:"w-[50%]"},Bl={class:"w-[50%]"},Rl={class:"inline-flex justify-start"},Dl={class:"disk-grid grid gap-4 w-full box-border",style:{"grid-template-columns":"repeat(3, minmax(0, 1fr))"}},Ol={class:"disk-grid grid gap-4 w-full box-border h-full",style:{"grid-template-columns":"repeat(auto-fill, minmax(220px, 1fr))"}},Al={key:1,class:"module-ui mb-[1.2rem]"},Vl={class:"module-ui-body mt-[1.2rem]"},zl={class:"flex items-center justify-between mb-[1.2rem] leading-[2.8rem]"},Fl={class:"flex items-center"},Hl={class:"disk-body-list flex justify-between"},Nl={id:"load_one"},Wl={class:"disk-body-list flex justify-between"},Ul={id:"load_cpu_times_num"},ql={class:"disk-item-body",id:"other_info_html"},Gl={class:"table table-fixed whitespace-nowrap"},Kl=["title"],$l=["title"],Jl={class:"flex items-center justify-between mb-[1.2rem] leading-[2.8rem]"},Zl={class:"flex items-center"},Ql={class:"max-h-[8.2rem] overflow-y-auto"},Yl={class:"flex items-center justify-between mb-[1.2rem] leading-[2.8rem]"},Xl={class:"flex items-center"},es={class:"flex align-left flex-col"},ts={class:"flex justify-between mb-[4px]"},as={class:"w-[50%]"},ls={class:"inline-flex justify-start"},ss={class:"w-[50%]"},os={class:"inline-flex justify-start"},ns={class:"flex justify-between mb-[4px]"},is={class:"w-[50%]"},rs={class:"inline-flex justify-start"},cs={class:"w-[50%]"},ds={class:"inline-flex justify-start"},us={class:"flex justify-between mb-[4px]"},ms={class:"w-[50%]"},ps={class:"w-[50%]"},vs={class:"inline-flex justify-start"},fs="home_state_layout_cache",ys=Pe(e({__name:"index",props:{mainWidth:{}},setup(e){const{globalTheme:a}=we(),y=x(()=>"default"===a.value.home.overview_view?Se(()=>import("./main2.js?v=1764728423"),__vite__mapDeps([]),import.meta.url):Se(()=>import("./main-tile.js?v=1764728423"),__vite__mapDeps([]),import.meta.url)),b=x(()=>"default"===a.value.home.overview_view?Se(()=>import("./disk-main.js?v=1764728423"),__vite__mapDeps([]),import.meta.url):Se(()=>import("./disk-main-tile.js?v=1764728423"),__vite__mapDeps([]),import.meta.url)),w=e,_=t(null),k=t(0);Q(_,e=>{if(!e[0])return;const{width:t}=e[0].contentRect;k.value=t});const C={diskCount:-1,containerWidth:-1},I={baseComponentCount:3,minElementWidth:235,elementGap:12,stackMinWidth:460,stackMaxWidth:650,tileMinWidth:600,tileMaxWidth:800,defaultContainerWidth:1200,maxSingleLineComponents:6,maxHybridDisks:6},P=ia(),{stateMainWidth:L,gutter:M,displayMode:E,stateHeight:B,isBreakLines:R,isShowAllDisk:D,cpuCoreDesc:O,statePopoverTimr:A,loadInfo:V,loadPopover:z,processAlarmShow:F,tagsType:H,load:N,cpu:U,loadInfoList:q,cpuInfo:G,cpuPopover:$,memoryInfo:Z,memoryPopover:te,memory:ae,disk:le}=u(P),se=t(null);Q(se,e=>{const t=e[0],{width:a}=t.contentRect;L.value=a}),m(()=>"single"===E.value&&R.value);const oe=sessionStorage.getItem(fs);if(oe)try{const e=JSON.parse(oe);E.value=e.displayMode,B.value=e.stateHeight,R.value=e.isBreakLines,D.value=e.isShowAllDisk}catch(me){sessionStorage.removeItem(fs)}const ne=(e,t,a,l)=>{E.value=e,B.value=t,R.value=a,D.value=l;const s={displayMode:e,stateHeight:t,isBreakLines:a,isShowAllDisk:l};try{sessionStorage.setItem(fs,JSON.stringify(s))}catch(me){}},ie=()=>{const e=L.value||w.mainWidth||I.defaultContainerWidth,t=(le.value||[]).length;if(C.diskCount===t&&C.containerWidth===e)return;C.diskCount=t,C.containerWidth=e;const a=I.baseComponentCount,l=a+t,s=I.minElementWidth,o=I.elementGap;if(e>=s*l+o*(l-1)){if((e-o*(l-1))/l>=s)return void ne("single","18rem",!1,!1)}if(t>=2&&t<=4){if(e>=s*a+I.stackMinWidth+o*a){if((e-I.stackMinWidth-o*a)/a>=s)return void ne("stack","22rem",!1,!1)}}if(t>=5&&t<=6){if(e>=s*a+I.tileMinWidth+o*a)return void ne("tile","22rem",!1,!1)}if(t>6){const l=t-6;return e>=(a+l+1-1)*o+(a+l)*s+I.tileMinWidth?void ne("hybrid","22rem",!1,!0):void ne("tile","18rem",!0,!0)}ne("single","18rem",!0,t>6)},re=m(()=>"".concat(N.value.one.toFixed(2)," / ").concat(N.value.five.toFixed(2)," / ").concat(N.value.fifteen.toFixed(2))),ce=m(()=>{const{process:e}=U.value;return Array.isArray(e)?"".concat(e[0]," / ").concat(e[1]):"获取中"});Y(ie),S(()=>A.value,(e,t)=>{clearInterval(e)},{immediate:!0}),S(()=>[(le.value||[]).length,L.value],([e,t])=>{if(0===t)return;if(C.diskCount!==e||C.containerWidth!==t){const{baseComponentCount:a,minElementWidth:l,elementGap:s,stackMinWidth:o,tileMinWidth:n}=I,i=a*l+(a-1)*s,r=t-i-s;let c="single";if(e>Math.floor(r/(l+s))&&(c=e>=5?t>=i+n?"tile":"stack":t>=i+o?"stack":"single"),e>6&&"single"!==c){const o=e-6;(t-n-(a+o+1)*s)/(a+o)>=l&&(c="hybrid")}ne(c,B.value,R.value,D.value),C.diskCount=e,C.containerWidth=t}},{immediate:!0,deep:!0}),l(async()=>{ut({promises:[P.getProcessAlarm],delay:1e3}),ie()}),s(P.$reset);const de=e=>{const t=L.value||w.mainWidth||I.defaultContainerWidth,a=I.elementGap;if(E.value,"single"===E.value){if(R.value){const e=I.baseComponentCount+(le.value||[]).length,l=ue(t,e,a),s="calc((100% - ".concat(a*(l-1),"px) / ").concat(l,")");return{flex:"1 0 ".concat(s),minWidth:"".concat(I.minElementWidth,"px")}}{const e=I.baseComponentCount+(le.value||[]).length,l=t-a*(e-1),s=Math.floor(l/e),o=Math.max(s,I.minElementWidth);return{width:"".concat(o,"px"),minWidth:"".concat(I.minElementWidth,"px"),flexShrink:0}}}if("hybrid"===E.value){const l=(le.value||[]).length-6,s=I.baseComponentCount+l,o=(s+1-1)*a;if("disk-area"===e)return{width:"".concat(I.tileMinWidth,"px"),minWidth:"".concat(I.tileMinWidth,"px"),flexShrink:0};{const e=t-I.tileMinWidth-o,a=Math.floor(e/s),l=Math.max(a,I.minElementWidth);return{width:"".concat(l,"px"),minWidth:"".concat(I.minElementWidth,"px"),flexShrink:0}}}{if(R.value)return{width:"100%"};const l="stack"===E.value?I.stackMinWidth:I.tileMinWidth,s="stack"===E.value?I.stackMaxWidth:I.tileMaxWidth,{baseComponentCount:o,minElementWidth:n}=I,i=a*o,r=t-n*o-i,c=Math.max(l,Math.min(r,s));let d=(t-c-i)/o;return d<n&&(d=n),"disk-area"===e?{width:"".concat(c,"px"),minWidth:"".concat(l,"px"),flexShrink:0}:{width:"".concat(d,"px"),minWidth:"".concat(n,"px"),flexShrink:0}}},ue=(e,t,a)=>{const l=I.minElementWidth;for(let s=Math.min(t,6);s>=1;s--){if(l*s+a*(s-1)<=e)return s}return 1};return(e,t)=>{const l=K,s=W,u=X,m=ee;return n(),i("div",sl,["default"===o(a).home.overview_view?(n(),i("div",{key:0,ref_key:"stateMainRef",ref:se},[r("div",{class:g(["state-container flex gap-[1.2rem] mb-[1.2rem]",{"flex-wrap":o(R),"flex-nowrap":!o(R)}])},[r("div",{style:J(de("load")),ref_key:"loadRef",ref:_,class:g(["state-component",o(D)?"flex-1":""])},[p(o(y),{style:J({height:o(B)}),info:o(V),"main-width":o(k),onShow:t[0]||(t[0]=e=>o(P).moveStatePopover(o(z),"loadPopover")),onHide:o(P).removeStatePopover,href:"https://www.bt.cn/bbs/thread-11402-1-1.html"},{default:v(()=>[p(Sa,{"load-type":"loadInfo",ref_key:"loadPopover",ref:z,type:"load","process-alarm-show":o(F)},{button:v(()=>[r("div",ol,[r("div",nl,[t[6]||(t[6]=r("span",{class:"text-secondary text-base mr-[4px] ml-[8px]"},"检测到当前负载",-1)),p(l,{type:o(H).load},{default:v(()=>[h(c("运行达到".concat(o(V).range,"%")),1)]),_:1},8,["type"])])])]),"base-info":v(()=>[r("div",il,[t[7]||(t[7]=r("div",null,"最近1/5/15分钟平均负载：",-1)),r("div",rl,c(re.value),1)]),r("div",cl,[t[8]||(t[8]=r("div",null,"活动进程数 / 总进程数:",-1)),r("div",dl,c(ce.value),1)])]),"content-info":v(()=>[r("div",ul,[r("table",ml,[r("tbody",null,[(n(!0),i(T,null,j(o(q),(e,t)=>(n(),i("tr",{key:t},[(n(!0),i(T,null,j(e,(e,t)=>(n(),i(T,{key:t},[r("td",{title:e.title,class:"break-all text-ellipsis p-[.4rem] pl-0"},[r("span",null,c(e.name),1)],8,pl),r("td",{title:e.title,class:"break-all text-ellipsis"},[r("span",null,c(e.value),1)],8,vl)],64))),128))]))),128))])])])]),_:1},8,["process-alarm-show"])]),_:1},8,["style","info","main-width","onHide"])],6),r("div",{style:J(de("cpu")),class:g(["state-component",o(D)?"flex-1":""])},[p(o(y),{style:J({height:o(B)}),info:o(G),type:"cpu","main-width":o(k),onShow:t[1]||(t[1]=e=>o(P).moveStatePopover(o($),"cpuPopover")),onHide:o(P).removeStatePopover},{default:v(()=>[p(Sa,{"load-type":"cpuInfo",type:"cpu",ref_key:"cpuPopover",ref:$,"process-alarm-show":o(F)},{button:v(()=>[r("div",fl,[r("div",yl,[t[9]||(t[9]=r("span",{class:"text-secondary text-base mr-[4px] ml-[8px]"},"检测到当前CPU使用率",-1)),p(l,{type:o(H).cpu},{default:v(()=>[h(c("占用".concat(o(G).range,"%")),1)]),_:1},8,["type"])])])]),"content-info":v(()=>[r("div",hl,[(n(!0),i(T,null,j(o(O),(e,t)=>(n(),i("div",{key:t,class:"flex direction-row items-center justify-between my-[1rem]"},[r("span",null,c(e.name),1),r("span",null,c(e.value),1)]))),128))])]),"base-info":v(()=>[r("p",null,c(o(U).framework),1),r("p",null,c("".concat(o(U).cpuNumber,"个物理CPU，").concat(o(U).logicCores,"个物理核心，").concat(o(U).cores,"个逻辑核心")),1)]),_:1},8,["process-alarm-show"])]),_:1},8,["style","info","main-width","onHide"])],6),r("div",{style:J(de("mem")),class:g(["state-component",o(D)?"flex-1":""])},[p(o(y),{style:J({height:o(B)}),type:"mem",info:o(Z),"main-width":o(k),onShow:t[2]||(t[2]=e=>o(P).moveStatePopover(o(te),"memoryPopover")),onHide:o(P).removeStatePopover},{default:v(()=>[p(Sa,{"load-type":"memoryInfo",type:"mem",ref_key:"memoryPopover",ref:te,"process-alarm-show":o(F)},{button:v(()=>[r("div",gl,[r("div",xl,[t[10]||(t[10]=r("span",{class:"text-secondary text-base mr-[4px] ml-[8px]"},"检测到当前内存",-1)),p(l,{type:o(H).memory},{default:v(()=>[h(c("占用".concat(o(Z).range,"%")),1)]),_:1},8,["type"])]),p(s,{type:"primary",onClick:o(P).onClearMemory},{default:v(()=>[...t[11]||(t[11]=[h("立即释放",-1)])]),_:1},8,["onClick"])])]),"base-info":v(()=>[r("div",bl,[r("div",wl,[r("div",_l,[t[12]||(t[12]=r("span",{class:"w-[81px] inline-flex justify-end"},"空闲内存：",-1)),r("span",kl,c(o(ae).memFree+" MB"),1)]),r("div",Cl,[t[13]||(t[13]=r("span",{class:"w-[81px] inline-flex justify-end"},"已用：",-1)),r("span",Sl,c(o(ae).memRealUsed+" MB"),1)])]),r("div",Il,[r("div",Pl,[t[14]||(t[14]=r("span",{class:"w-[81px] inline-flex justify-end"},"总内存：",-1)),r("span",Ll,c(o(ae).memTotal+" MB"),1)]),r("div",Tl,[t[15]||(t[15]=r("span",{class:"w-[81px] inline-flex justify-end"},"共享：",-1)),r("span",jl,c(o(ae).memShared+" MB"),1)])]),r("div",Ml,[r("div",El,[t[16]||(t[16]=r("span",{class:"w-[81px] inline-flex justify-end"},"可分配内存：",-1)),r("span",null,c(o(ae).memAvailable+"MB"),1)]),r("div",Bl,[t[17]||(t[17]=r("span",{class:"w-[81px] inline-flex justify-end"},"buff/cache：",-1)),r("span",Rl,c(o(ae).memCached+"/"+o(ae).memBuffers+" MB"),1)])])])]),_:1},8,["process-alarm-show"])]),_:1},8,["style","info","main-width","onHide"])],6),"single"===o(E)?(n(!0),i(T,{key:0},j(o(le),(e,t)=>(n(),i("div",{key:t,style:J(de("disk")),class:"state-component"},[p(o(y),{style:J({height:o(B)}),type:"disk",info:e.info,"main-width":o(k),onHide:o(P).removeStatePopover,data:e.data,alert:"None"!==e.data.path&&100===parseInt(e.data.inodes[3])},{default:v(()=>[p(Aa,{item:e},null,8,["item"])]),_:2},1032,["style","info","main-width","onHide","data","alert"])],4))),128)):"hybrid"===o(E)?(n(),i(T,{key:1},[(n(!0),i(T,null,j(o(le).slice(0,o(le).length-6),(e,t)=>(n(),i("div",{key:"hybrid-disk-".concat(t),style:J(de("disk")),class:"state-component"},[p(o(y),{style:J({height:o(B)}),type:"disk",info:e.info,"main-width":o(k),onHide:o(P).removeStatePopover,data:e.data,alert:"None"!==e.data.path&&100===parseInt(e.data.inodes[3])},{default:v(()=>[p(Aa,{item:e},null,8,["item"])]),_:2},1032,["style","info","main-width","onHide","data","alert"])],4))),128)),r("div",{style:J(de("disk-area")),class:"state-component"},[r("div",{class:"module-ui rounded-medium p-[2.4rem]",style:J({height:o(B)})},[r("div",Dl,[p(ll,{list:o(le).slice(o(le).length-6),"is-show-all-disk":o(D)},null,8,["list","is-show-all-disk"])])],4)],4)],64)):(n(),i("div",{key:2,style:J(de("disk-area")),class:"state-component"},["stack"===o(E)?(n(),f(o(b),{key:0,list:o(le),class:"bg-white shadow rounded",style:J({height:o(B)})},null,8,["list","style"])):"tile"===o(E)?(n(),i("div",{key:1,class:"module-ui rounded-medium p-[2.4rem]",style:J({height:o(D)?"auto":o(B)})},[r("div",Ol,[p(ll,{list:o(D)?o(le):o(le).slice(0,6),"is-show-all-disk":o(D)},null,8,["list","is-show-all-disk"])])],4)):d("",!0)],4))],2)],512)):"tile"===o(a).home.overview_view?(n(),i("div",Al,[t[30]||(t[30]=r("div",{class:"module-ui-header"},[r("div",{class:"flex w-full justify-between"},[r("span",{class:"font-alibaba-semibold"},"状态")])],-1)),r("div",Vl,[p(m,{span:24,class:"w-full"},{default:v(()=>[p(u,{class:"state-component",span:4,xs:12,sm:6,md:6,lg:4,xl:4},{default:v(()=>[p(o(y),{info:o(V),onShow:t[3]||(t[3]=e=>o(P).moveStatePopover(o(z),"loadPopover")),onHide:o(P).removeStatePopover,href:"https://www.bt.cn/bbs/thread-11402-1-1.html"},{default:v(()=>[p(Sa,{"load-type":"loadInfo",ref_key:"loadPopover",ref:z,type:"load","process-alarm-show":o(F)},{button:v(()=>[r("div",zl,[r("div",Fl,[t[18]||(t[18]=r("span",{class:"text-secondary text-base mr-[4px] ml-[8px]"},"检测到当前负载",-1)),p(l,{type:o(H).load},{default:v(()=>[h(c("运行达到".concat(o(V).range,"%")),1)]),_:1},8,["type"])])])]),"base-info":v(()=>[r("div",Hl,[t[19]||(t[19]=r("div",null,"最近1/5/15分钟平均负载：",-1)),r("div",Nl,c(re.value),1)]),r("div",Wl,[t[20]||(t[20]=r("div",null,"活动进程数 / 总进程数:",-1)),r("div",Ul,c(ce.value),1)])]),"content-info":v(()=>[r("div",ql,[r("table",Gl,[r("tbody",null,[(n(!0),i(T,null,j(o(q),(e,t)=>(n(),i("tr",{key:t},[(n(!0),i(T,null,j(e,(e,t)=>(n(),i(T,{key:t},[r("td",{title:e.title,class:"break-all text-ellipsis p-[.4rem] pl-0"},[r("span",null,c(e.name),1)],8,Kl),r("td",{title:e.title,class:"break-all text-ellipsis"},[r("span",null,c(e.value),1)],8,$l)],64))),128))]))),128))])])])]),_:1},8,["process-alarm-show"])]),_:1},8,["info","onHide"])]),_:1}),p(u,{class:"state-component",span:4,xs:12,sm:6,md:6,lg:4,xl:4},{default:v(()=>[p(o(y),{info:o(G),type:"cpu",onShow:t[4]||(t[4]=e=>o(P).moveStatePopover(o($),"cpuPopover")),onHide:o(P).removeStatePopover},{default:v(()=>[p(Sa,{"load-type":"cpuInfo",type:"cpu",ref_key:"cpuPopover",ref:$,"process-alarm-show":o(F)},{button:v(()=>[r("div",Jl,[r("div",Zl,[t[21]||(t[21]=r("span",{class:"text-secondary text-base mr-[4px] ml-[8px]"},"检测到当前CPU使用率",-1)),p(l,{type:o(H).cpu},{default:v(()=>[h(c("占用".concat(o(G).range,"%")),1)]),_:1},8,["type"])])])]),"content-info":v(()=>[r("div",Ql,[(n(!0),i(T,null,j(o(O),(e,t)=>(n(),i("div",{key:t,class:"flex direction-row items-center justify-between my-[1rem]"},[r("span",null,c(e.name),1),r("span",null,c(e.value),1)]))),128))])]),"base-info":v(()=>[r("p",null,c(o(U).framework),1),r("p",null,c("".concat(o(U).cpuNumber,"个物理CPU，").concat(o(U).logicCores,"个物理核心，").concat(o(U).cores,"个逻辑核心")),1)]),_:1},8,["process-alarm-show"])]),_:1},8,["info","onHide"])]),_:1}),p(u,{class:"state-component",span:4,xs:12,sm:6,md:6,lg:4,xl:4},{default:v(()=>[p(o(y),{type:"mem",info:o(Z),onShow:t[5]||(t[5]=e=>o(P).moveStatePopover(o(te),"memoryPopover")),onHide:o(P).removeStatePopover},{default:v(()=>[p(Sa,{"load-type":"memoryInfo",type:"mem",ref_key:"memoryPopover",ref:te,"process-alarm-show":o(F)},{button:v(()=>[r("div",Yl,[r("div",Xl,[t[22]||(t[22]=r("span",{class:"text-secondary text-base mr-[4px] ml-[8px]"},"检测到当前内存",-1)),p(l,{type:o(H).memory},{default:v(()=>[h(c("占用".concat(o(Z).range,"%")),1)]),_:1},8,["type"])]),p(s,{type:"primary",onClick:o(P).onClearMemory},{default:v(()=>[...t[23]||(t[23]=[h("立即释放",-1)])]),_:1},8,["onClick"])])]),"base-info":v(()=>[r("div",es,[r("div",ts,[r("div",as,[t[24]||(t[24]=r("span",{class:"w-[81px] inline-flex justify-end"},"空闲内存：",-1)),r("span",ls,c(o(ae).memFree+" MB"),1)]),r("div",ss,[t[25]||(t[25]=r("span",{class:"w-[81px] inline-flex justify-end"},"已用：",-1)),r("span",os,c(o(ae).memRealUsed+" MB"),1)])]),r("div",ns,[r("div",is,[t[26]||(t[26]=r("span",{class:"w-[81px] inline-flex justify-end"},"总内存：",-1)),r("span",rs,c(o(ae).memTotal+" MB"),1)]),r("div",cs,[t[27]||(t[27]=r("span",{class:"w-[81px] inline-flex justify-end"},"共享：",-1)),r("span",ds,c(o(ae).memShared+" MB"),1)])]),r("div",us,[r("div",ms,[t[28]||(t[28]=r("span",{class:"w-[81px] inline-flex justify-end"},"可分配内存：",-1)),r("span",null,c(o(ae).memAvailable+"MB"),1)]),r("div",ps,[t[29]||(t[29]=r("span",{class:"w-[81px] inline-flex justify-end"},"buff/cache：",-1)),r("span",vs,c(o(ae).memCached+"/"+o(ae).memBuffers+" MB"),1)])])])]),_:1},8,["process-alarm-show"])]),_:1},8,["info","onHide"])]),_:1}),(n(!0),i(T,null,j(o(le).filter((e,t,a)=>"None"!==e.data.path||a.findIndex(e=>"None"===e.data.path)===t),(e,t)=>(n(),f(u,{key:t,class:"state-component",span:4,xs:12,sm:6,md:6,lg:4,xl:4},{default:v(()=>[p(o(y),{type:"disk",info:e.info,onHide:o(P).removeStatePopover,data:e.data,alert:"None"!==e.data.path&&100===parseInt(e.data.inodes[3])},{default:v(()=>[p(Aa,{item:e},null,8,["item"])]),_:2},1032,["info","onHide","data","alert"])]),_:2},1024))),128))]),_:1})])])):d("",!0)])}}}),[["__scopeId","data-v-2dc75395"]]);function hs(e,t,a={}){let l;const{document:s=le,...o}=a,n={onUpdate:e=>{!function(e,t,a,l=null){null!=l&&((s=l.item).parentNode&&s.parentNode.removeChild(s),function(e,t,a){const l=e.children[a];e.insertBefore(t,l)}(l.from,l.item,t));var s;const o=D(e),n=o?[...se(e)]:se(e);if(a>=0&&a<n.length){const l=n.splice(t,1)[0];L(()=>{n.splice(a,0,l),o&&(e.value=n)})}}(t,e.oldIndex,e.newIndex,e)}},i=()=>{const t=null==s?void 0:s.querySelector(e);t&&void 0===l&&(l=new Qe(t,{...n,...o}))},r=()=>{null==l||l.destroy(),l=void 0};return te(i),ae(r),{stop:r,start:i,option:(e,t)=>{if(void 0===t)return null==l?void 0:l.option(e);null==l||l.option(e,t)}}}const gs=I("HOME-OVERVIEW-STORE",()=>{const e=P(),{mainWidth:l,payment:s}=we(),{authType:o}=a(s.value),n=t([]),i=t(!0),r=t(!1),c=async()=>{try{const e=await _e({request:bt(),data:{data:[Array,n]}});return d(),Promise.resolve(e.data)}catch(e){Ye(e)}finally{i.value=!1,L(()=>{y()})}},d=()=>{const e=n.value.findIndex(e=>"ssh_log"===e.name);-1!==e&&_e({loading:r,request:wt({log_type:n.value[e].params[0].source}),success:t=>{Array.isArray(t.data)&&(n.value[e].value=t.data)}})},u=async e=>Ce({title:"自定义概览模块",area:100,compData:e,component:()=>Se(()=>import("./index342.js?v=1764728423"),__vite__mapDeps([]),import.meta.url)}),m=async()=>Ce({title:"备忘录",area:[70,60],component:()=>Se(()=>import("./index343.js?v=1764728423"),__vite__mapDeps([]),import.meta.url)}),p=async()=>Ce({area:[90,60],component:()=>Se(()=>import("./index344.js?v=1764728423").then(e=>e.i),__vite__mapDeps([]),import.meta.url)}),v=e=>{const{type:t}=e.plugin_info;return"free"===o.value&&(8===t||12===t)||"ltd"!==o.value&&12===t},f=e=>{const{type:t,endtime:a,setup:l}=e.plugin_info,s="total"===e.name?41:"btwaf"===e.name?366:42;if(v(e)&&a<0)return gt({disablePro:!0,sourceId:s});ht({name:e.name})},y=()=>{hs(".overview-wrapper",n,{animation:500,handle:".move-icon",chosenClass:"ghost",onUpdate:async e=>{const t=e.oldIndex,a=e.newIndex,l=n.value[t];n.value.splice(t,1),n.value.splice(a,0,l),(async()=>{const e=n.value.map((e,t)=>e.id);await _e({request:It({overview:JSON.stringify(e)}),message:!0,success:e=>{e.status||c()}})})()}})},h=()=>{qe("searchFile","true"),e.push({path:"/files"})},g=t(""),x=t("/www/server/panel/data/memo.txt"),b=oe([]),w=t([]),_=oe(!1),k=oe(0),C=t({val0:0,val1:0,val2:0,val3:0}),S=t(["sites","databases","total","ssh_log","monitor"]),I=t(["open_dir"]),T=()=>{let e={};w.value=[],n.value.forEach(t=>{e[t.name]=t}),b.value.forEach(t=>{const a=t.template;t.option.forEach(t=>{const l=e[t.name]||!1;w.value.push({...t,isShow:Boolean(l),showItem:l,template:a,overviewPopover:!1})})})},j=(e,t=!1)=>{let a={...e},l=[],s=[];for(const o in C.value)e.params.length&&s.push(C.value[o]);if(0===s.length&&(s=[0]),"open_dir"===e.name){const t=C.value.val0||e.params[0].option[0].source;l=[{name:t,source:t}]}else l=a.params.map((t,a)=>"select"===t.type?t.option[s[a]]:e.params?e.params[a]:void 0);return delete a.overviewPopover,t?(e.showItem.params=l,a={...e.showItem}):(delete a.showItem,a.params=l),a},M=async e=>{const t=Boolean(e.showItem);if(!t&&6===n.value.length)return e.overviewPopover=!1,L(()=>e.isShow=!1),tt.warn("最多只能显示6个模块");const a={overview:JSON.stringify(j(e,t))},l=t&&e.isShow?Ct:kt;_e({loading:"正在".concat(t?"修改":"添加","模块，请稍后..."),request:l(a),message:!0,success:async t=>{e.overviewPopover=!1,e.isShow=!0,E(),t.status&&(await c(),T())}})},E=()=>{C.value={val0:0,val1:0,val2:0,val3:0}},B=async()=>{await _e({loading:_,request:at(),data:{data:[Array,b]}})};return{mainWidth:l,loading:i,isSshLoading:r,overviewShowList:n,getOverviewData:c,openOverviewTemplate:()=>{u({getOverviewData:c})},openModelDialog:async t=>{switch(t.type){case"base":const a=t.params[0].source,l="/"+(["ftps","sites","databases"].includes(t.name)&&"all"===a?"":a).replace("proxy","nginx");return e.push({path:t.source.href+l});case"model":if("memo"===t.name)return m();if("safety_risk"===t.name)return p();if("ssh_log"===t.name)return e.push({path:"/logs/ssh"});case"plugin":return f(t);default:if("search_file"===t.name)return h();if("open_dir"===t.name)return Ot({path:t.params[0].name})}},securityRisksDialog:p,getModelTitle:e=>{let t=e.title,a=0,l=e.params.length||0,s=["ssh_log"];if(!e.status)return t;if("open_dir"===e.name)return t;l>=2&&(t="");for(let o=l-1;o>=0;o--){let n=e.params[o];(t===n.name||s.indexOf(e.name)>-1)&&(t=""),2!==a&&(1===l&&""!=t&&(t+=" - "),t+="".concat(n.name)+(o===l-1&&l>1?" - ":""),a++),a=0}return t.replace(" - 全部","")},getPayStatus:v,getModelTips:e=>{switch(e.template){case"base":return"memo"===e.name||"safety_risk"===e.name?"打开".concat(e.title,"模块"):"跳转至".concat(e.title,"页面");case"browse":return"plugin"===e.type?"打开".concat(e.title,"插件"):"打开".concat(e.title,"模块");case"open_dir":return"打开".concat(e.title)}},content:g,path:x,saveFileEvent:async()=>{_e({loading:"正在保存备忘录，请稍后...",request:Xe({path:x.value,data:g.value,encoding:"utf-8"}),message:!0,success:e=>{e.status&&c()}})},getMemoData:async()=>{_e({loading:"正在获取备忘录数据，请稍后...",request:et(),data:[String,g]})},isLoading:_,overviewModelList:w,supportConfig:S,supportPath:I,form:C,onPathChange:e=>{St({type:"dir",change:t=>{C.value.val0=t,M(e)}})},getOverviewTemplateData:B,dataAlignment:T,setOverviewTemplateShow:async e=>{try{if(e.isShow&&6===n.value.length)return L(()=>e.isShow=!1),tt.warn("最多只能显示6个模块");const t=j(e);!e.isShow&&Ke(e.showItem.id)&&(await B(),(e=w.value.find(t=>t.name===e.name)).isShow=!e.isShow);const a=e.isShow?kt:_t,l=e.isShow?{overview:JSON.stringify(t)}:{overview_id:e.showItem.id};_e({loading:"正在".concat(e.isShow?"删除":"添加","模块，请稍后..."),request:a(l),message:!0,data:{data:Array,msg:String,status:Boolean},success:async t=>{t.status&&(e.isShow&&(e.showItem=t.data.length?t.data[t.data.length-1]:e.showItem),await c(),T())}})}catch(t){Ye(t)}},addOverviewFun:M,setPopoverShow:(e,t)=>{w.value[t].overviewPopover=!0,k.value=t;const a=e.showItem.params,l=Object.entries(C.value);for(let s=0;s<l.length&&s<e.params.length;s++){const t=e.params[s];if("select"===t.type){const e=t.option.findIndex(e=>!a||(!a[s]||e.source===a[s].source));C.value["val"+s]=e}else C.value["val"+s]=a?a[s].source:t.option[s].source}}}}),xs={class:"module-ui mb-[1.2rem] mx-[1.2rem]"},bs={class:"module-ui-header"},ws={class:"flex w-full justify-between"},_s={class:"module-ui-body mt-[1.2rem]"},ks={class:"!mx-0 w-full"},Cs={class:"flex flex-col w-full relative inline-block"},Ss={class:"overview-box"},Is={class:"overview-content"},Ps={class:"content w-full"},Ls={class:"title"},Ts={class:"flex h-[4.4rem] items-center w-full"},js={key:0,class:"risk not-install bt-blink"},Ms={key:1,class:"model font-bold"},Es={class:"to-day"},Bs={class:"yester-day ml-[1.6rem]"},Rs={key:2,class:"path-info bt-link-primary truncate"},Ds={key:3,class:"path-info bt-link-primary truncate"},Os={key:4,class:"icon-open-routes"},As={class:"icon-open-routes-text"},Vs=Pe(e({__name:"index",setup(e){const t=gs(),{mainWidth:a,loading:s,isSshLoading:y,overviewShowList:h}=u(t),x=m(()=>{let e=0;const t=a.value<1100?a.value<800?a.value<400?1:2:4:a.value>1800?8:6,l=Math.floor((a.value-16*t-50)/t);return e=Math.min(Math.max(l,200),270),{number:24/(t>h.value.length?h.value.length:t),width:e}}),b=m(()=>x.value.width<230);return l(async()=>{ut({promises:[t.getOverviewData],delay:100})}),(e,a)=>{const l=ie,u=re,m=X,w=ee,_=ce;return n(),i("div",xs,[r("div",bs,[r("div",ws,[a[3]||(a[3]=r("span",{class:"font-alibaba-semibold"},"概览",-1)),r("span",{title:"自定义概览模块",class:"!ml-[1rem] cursor-pointer",onClick:a[0]||(a[0]=e=>o(t).openOverviewTemplate())},[...a[2]||(a[2]=[r("i",{class:"svgtofont-el-more-filled !text-large hover:text-primary inline-block",style:{transform:"rotate(90deg)"}},null,-1)])])])]),r("div",_s,[r("div",ks,[p(w,{span:24,gutter:20,class:"overview-wrapper draggable-group"},{default:v(()=>[o(s)?(n(),i(T,{key:0},j(5,e=>p(u,{style:J({width:"".concat(o(x).width,"px")}),class:"overview-box",key:e},{template:v(()=>[r("div",Cs,[p(l,{variant:"text",class:"!w-[40%]"}),p(l,{variant:"text",class:"mt-10px"})])]),_:1},8,["style"])),64)):d("",!0),(n(!0),i(T,null,j(o(h),e=>(n(),f(m,{span:o(x).number,xl:o(x).number,class:"rounded-large",key:e.id,onClick:a=>o(t).openModelDialog(e),style:J({minWidth:"".concat(o(x).width,"px")})},{default:v(()=>[r("div",Ss,[r("i",{class:"svgtofont-icon-drag move-icon",onClick:a[1]||(a[1]=ne(()=>{},["stop"])),title:"可拖拽"}),r("div",Is,[r("div",Ps,[r("span",Ls,c(o(t).getModelTitle(e)),1),r("div",Ts,["base"===e.template?(n(),i("span",{key:0,class:g(["bt-link-primary !text-subtitleLarge text-alibaba",{memo:"memo"===e.name,risk:"safety_risk"===e.name&&e.value[0]>0,"!text-disabled":"memo"===e.name&&!e.value[0]}])},c(e.value[0]||("memo"===e.name?"当前内容为空，点击编辑":e.value[0])),3)):"browse"===e.template?(n(),i(T,{key:1},["plugin"!==e.type||e.plugin_info.setup?"plugin"===e.type||"model"===e.type?z((n(),i("div",Ms,[r("div",Es,[a[4]||(a[4]=r("span",{class:""},"今日",-1)),r("span",null,c(e.value[0]||0),1)]),r("div",Bs,[a[5]||(a[5]=r("span",null,"昨日",-1)),r("span",null,c(e.value[1]||0),1)])])),[[_,o(y)&&"ssh_log"===e.name]]):d("",!0):(n(),i("span",js,c(o(t).getPayStatus(e)?"立即购买":"立即安装"),1))],64)):"open_dir"===e.template?(n(),i("span",Rs,c(e.params[0].name),1)):"search_file"===e.template?(n(),i("span",Ds," 点击搜索内容 ")):d("",!0),"base"===e.type||"safety_risk"===e.name?(n(),i("div",Os,[a[6]||(a[6]=r("span",{class:"icon-open-routes-icon"},[r("i",{class:"svgtofont-el-arrow-right font-bold text-medium"})],-1)),r("span",As,c(o(b)?"打开":"打开到".concat(o(t).getModelTitle(e).split("-")[0])),1)])):d("",!0)])])])])]),_:2},1032,["span","xl","onClick","style"]))),128))]),_:1})])])])}}}),[["__scopeId","data-v-d39ddaca"]]),zs={class:"module-ui flex flex-col"},Fs={class:"module-ui-header"},Hs={class:"w-full flex justify-between items-center"},Ns={class:"plugin-search"},Ws={class:"pluginInfo"},Us=["src"],qs={class:"plugin-desc"},Gs={class:"wrapper module-ui-body soft-wrapper"},Ks=["onClick"],$s={key:0,id:"freeTagCon"},Js={class:"h-38 pt-5 w-full text-center flex justify-center items-center"},Zs={class:"w-[6rem] h-[6rem] rounded-large bg-dark flex items-center justify-center"},Qs=["src","custom"],Ys={class:"text-tertiary h-9 leading-9 flex items-center justify-center pb-[8px]"},Xs={class:"w-full truncate text-center"},eo=["onClick"],to={class:"h-38 pt-5 w-full text-center flex justify-center items-center"},ao={class:"w-[6rem] h-[6rem] rounded-large bg-dark flex items-center justify-center"},lo=["src"],so={class:"flex justify-center items-center h-9 leading-9 pb-[8px]"},oo={class:"text-tertiary h-9 leading-9 w-full truncate text-center"},no={class:"flex justify-center align-middle mt-2 mb-4 opacity-70"},io=Pe(e({__name:"index",setup(e){const t=At(),{popShow:a,pluginKeyword:s,recommendList:m,containerRef:y,mySoftList:x,tableLoading:w,isGetSoft:_,softShowList:k}=u(t);return S(m,e=>{e.length>0&&t.createSoftList()},{immediate:!0}),l(async()=>{await ut({promises:[t.getHomeInstallSoftData,t.getRecommendInfo],delay:100}),L(()=>{const{type:e}=Vt();if(e.includes("aliyun")){const e=setInterval(async()=>{if(window.$extension){const t=await window.$extension();Ae(t.extensionElement)&&!t.extensionElement&&clearTimeout(e),t.extensionElement&&(t.extensionElement(),clearTimeout(e))}},1e3)}})}),(e,l)=>{const u=W,m=me,C=pe,S=O,I=ve,P=b,L=A("table-scroll-load"),M=A("bt-loading");return n(),i("div",zs,[r("div",Fs,[r("div",Hs,[r("span",{onClick:l[0]||(l[0]=(...e)=>o(t).goSoft&&o(t).goSoft(...e)),class:"cursor-pointer hover:text-primary font-alibaba-semibold"},"软件"),p(P,{"popper-class":"myPopover",placement:"right-start",visible:o(a),width:"400",onShow:l[7]||(l[7]=e=>o(t).showPopoverHandle(""))},{reference:v(()=>[p(u,{ref:"softButton",class:"soft-button-no-padding",type:"default",title:"软件自定义编辑",link:"",onClick:l[6]||(l[6]=e=>a.value=!o(a))},{default:v(()=>[...l[10]||(l[10]=[r("i",{class:"svgtofont-el-more-filled text-default !text-large hover:text-primary inline-block",style:{transform:"rotate(90deg)"}},null,-1)])]),_:1},512)]),default:v(()=>[r("div",{ref_key:"containerRef",ref:y,class:"plugin-box p-[.8rem]",onMouseleave:l[5]||(l[5]=(...e)=>o(t).leave&&o(t).leave(...e))},[r("div",Ns,[p(m,{placeholder:"请输入要搜索的应用",modelValue:o(s),"onUpdate:modelValue":l[2]||(l[2]=e=>D(s)?s.value=e:null),"fetch-suggestions":o(t).querySearch,"trigger-on-focus":!1,class:"search-input w-full","popper-class":"soft-search-popover",onKeyup:l[3]||(l[3]=de(e=>o(t).searchPluginHandle("select"),["enter","native"])),onSelect:l[4]||(l[4]=e=>o(t).searchPluginHandle())},{append:v(()=>[p(u,{onClick:l[1]||(l[1]=e=>o(t).searchPluginHandle("select"))},{default:v(()=>[...l[9]||(l[9]=[r("i",{class:"svgtofont-el-search"},null,-1)])]),_:1})]),_:1},8,["modelValue","fetch-suggestions"])]),z((n(),f(I,{data:o(x),height:"400"},{default:v(()=>[p(C,{width:"260",property:"date",label:"软件名称"},{default:v(e=>[r("div",Ws,[r("img",{class:"plugin-img",src:o(t).renderSoftImages(e.row.name)},null,8,Us),r("span",qs,c(e.row.title)+" "+c(e.row.version),1)])]),_:1}),p(C,{property:"setup",sortable:"",label:"首页显示",prop:"index_display"},{default:v(e=>[p(S,{modelValue:e.row.index_display,"onUpdate:modelValue":t=>e.row.index_display=t,"active-color":"var(--el-color-primary)","inactive-color":"var(--el-color-text-disabled)",width:32,size:"small",onChange:a=>o(t).changeSwitchHandle(e.row,e.$index)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1})]),_:1},8,["data"])),[[L,o(t).load],[M,o(w)]])],544)]),_:1},8,["visible"])])]),z((n(),i("div",Gs,[p(ue,null,{default:v(()=>[(n(!0),i(T,null,j(o(k),(e,a)=>(n(),i("div",{key:e.name+"_id",class:g(e.title?"box-wrapper cursor-pointer relative":"")},[a<12?(n(),i(T,{key:0},[e.id&&e.setup?(n(),i("div",{key:0,onClick:a=>o(t).openSoftView(e)},[r("i",{class:"svgtofont-icon-drag !text-base text-secondary !hidden absolute right-6 top-6 cursor-move mover soft-move",onClick:l[8]||(l[8]=ne(()=>{},["stop"]))}),e.tag?(n(),i("span",$s)):d("",!0),r("div",Js,[r("div",Zs,[r("img",{src:o(t).renderSoftImages(e.name),class:"w-[4rem]",custom:!o(lt)},null,8,Qs)])]),r("div",Ys,[r("span",Xs,[h(c(e.title.replace(/PHP-[{0-9},\.]+/,"PHP-")+" "+e.version)+" ",1),z(r("i",{style:J("color:".concat(o(t).softStatusColor(e))),class:g("ml-[5px] svgtofont-icon-".concat(o(t).softStatus(e)))},null,6),[[q,5===e.type]])])])],8,Ks)):o(st)(e)?d("",!0):(n(),i(T,{key:1},[r("div",{onClick:a=>o(t).openRecommendSoftView(e),class:"absolute rounded- left-2 top-2 py-.5 px-3 transform scale-75 bg-lighter text-tertiary opacity-80"},"推荐",8,eo),r("div",to,[r("div",ao,[r("img",{src:"".concat(o(lt)?"/static/images":"/static/img","/soft_ico/ico-").concat(e.name,".png"),class:"w-[4rem]"},null,8,lo)])]),r("div",so,[r("div",oo,[h(c(e.title)+" "+c(e.version),1),l[11]||(l[11]=r("span",{class:"text-btColor"},null,-1))])]),r("div",no,[e.preview?(n(),f(u,{key:0,type:"default",size:"small",onClick:a=>o(t).openSoftPreLink(e),plain:""},{default:v(()=>[...l[12]||(l[12]=[h("预览",-1)])]),_:1},8,["onClick"])):d("",!0),e.isBuy?d("",!0):(n(),f(u,{key:1,type:"primary",size:"small",plain:"",onClick:a=>o(t).openLtdPayView(e)},{default:v(()=>[...l[13]||(l[13]=[h("购买",-1)])]),_:1},8,["onClick"])),e.isBuy&&!e.install?(n(),f(u,{key:2,type:"primary",size:"small",plain:"",onClick:a=>o(t).openInstall(e)},{default:v(()=>[...l[14]||(l[14]=[h("安装",-1)])]),_:1},8,["onClick"])):d("",!0)])],64))],64)):d("",!0)],2))),128))]),_:1})])),[[M,o(_)],[M,"正在获取软件列表，请稍后...","title"]])])}}}),[["__scopeId","data-v-12d56308"]]),ro={class:"monitor monitor-chart w-full"},co=Pe(e({__name:"main",props:fe({info:{default:()=>({info:[],option:{}})}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(e,{expose:a}){const l=ye(e,"modelValue"),s=t();S(l,e=>{e&&u(e)});const{BtECharts:r,getEChart:c,setOption:d}=ot({options:{xAxis:{type:"category",boundaryGap:!1,data:[]},yAxis:{boundaryGap:[0,"50%"],type:"value"},series:[]}}),u=async e=>{var t;d(m(e)),s.value=await c(),null==(t=s.value)||t.resize()},m=(e={})=>{var t,a;const s={grid:{right:"5%",bottom:"6%",top:"6%"},tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{formatter:null==(t=e.axisPointerLabel)?void 0:t.formatter}},formatter:e.formatter},xAxis:{type:"category",boundaryGap:!1,data:e.tData,axisLine:{lineStyle:{color:Me.value?"#888":"#cccccc"}}},yAxis:{type:"value",boundaryGap:[0,"100%"],splitNumber:e.splitNumber,min:0,...e.axisLabel?{axisLabel:e.axisLabel}:{},..."iostat"===(null==(a=l.value)?void 0:a.type)?{axisLabel:{formatter:(e,t)=>Ue(e,!1,0),color:"#666"}}:{},splitLine:{lineStyle:{color:Me.value?"#888":"#cccccc",type:"dashed"}},axisLine:{lineStyle:{color:Me.value?"#888":"#cccccc"}}},series:[]},{legend:o,dataZoom:n,list:i}=e;return o&&(s.legend=o),n&&(s.dataZoom=n),i.forEach(e=>{const t={name:e.name,data:e.data,type:e.type||"line",smooth:e.smooth||!0,symbol:"circle",symbolSize:6,showSymbol:!0,emphasis:{symbolSize:8},sampling:e.sampling||"average",areaStyle:e.areaStyle||{},lineStyle:{...e.lineStyle||{}},itemStyle:{...e.itemStyle||{},borderColor:"#fff",borderWidth:"1px"}};s.series.push(t)}),s};return a({echartRef:s,setConfig:u}),(e,t)=>(n(),i("div",ro,[V(e.$slots,"default",{},void 0,!0),p(o(r),{class:"w-full"})]))}}),[["__scopeId","data-v-427e0bc0"]]),uo=I("HOME-MONITOR-STORE",()=>{const e=Bt(),{isRefreshData:a}=u(e),l=t(!0),s=t(!1),o=t(),n=t(),i=t("net"),r=t(0),c=m(()=>_(r.value)),d=oe({}),p=oe({}),v=t([]),f=t([]),y=R({net:{selectVal:"ALL",selectList:[],data:{timeList:[],upList:[],downList:[]},info:{up:{label:"上行",value:"0 B",bgColor:"#20a53a"},down:{label:"下行",value:"0 B",bgColor:" #FF9901"},upTotal:{label:"总发送",value:"0 B"},downTotal:{label:"总接收",value:"0 B"}}},iostat:{selectVal:"ALL",selectList:[],data:{timeList:[],readList:[],writeList:[],tipsList:[]},info:{read:{label:"读取",value:"0 B",bgColor:"#FF4683"},write:{label:"写入",value:"0 B",bgColor:"#6CC0CF"},second:{label:"每秒读写",value:"0次"},io:{label:"IO延迟",value:"0 ms",color:"#20a53a"}}}}),h=t([{label:"KB/s",value:"KB",disable:!1},{label:"MB/s",value:"MB",disable:!1},{label:"GB/s",value:"GB",disable:!1},{label:"TB/s",value:"TB",disable:!1}]);let g;var x;(x=g||(g={})).Net="net",x.Iostat="iostat",ta.useSetCallback("network",e=>{var t,a;if(!e)return;v.value=e,"net"===i.value&&C(e,c.value);const l=M("net","data");d.value=S(l),(null==(a=null==(t=j(i.value))?void 0:t.echartRef)?void 0:a.id)&&(s.value=!1),w()}),ta.useSetCallback("diskIo",async e=>{var t,a;if(!e)return;f.value=e,"iostat"===i.value&&I(e);const l=M("iostat","data");p.value=P(l),(null==(a=null==(t=j(i.value))?void 0:t.echartRef)?void 0:a.id)&&(s.value=!1),w()});const b=m(()=>y[i.value].selectVal),w=()=>{for(const e in y){const t=E(e),a=y[e],{selectList:l}=a;l.length=0,Object.keys(t).forEach(e=>{if("ALL"===e)return a.selectVal||(a.selectVal=e),void l.unshift({label:"所有",value:"ALL"});l.push({label:e,value:e})})}},_=e=>{const t=[" B"," KB"," MB"," GB"," TB"," PB"," EB"];return e<1024?t[0]:e<1048576?t[1]:e<1024**3?t[2]:e<1024**4?t[3]:e<1024**5?t[4]:e<1024**6?t[5]:t[6]},k=(e,t)=>{const{up:a,down:l,upTotal:s,downTotal:o}=e;return{up:Ue(1024*a,!1,2,t),down:Ue(1024*l,!1,2,t),upTotal:Ue(1024*s,!1,2,t),downTotal:Ue(1024*o,!1,2,t)}},C=(e,t)=>{const{info:a,data:l}=M("net"),s=e[b.value||"ALL"];if(!s)return;const{up:o,down:n,upTotal:i,downTotal:d}=a;for(let c=0;c<l.upList.length;c++){const e=l.upList[c];e>r.value&&(r.value=e);const t=l.downList[c];t>r.value&&(r.value=t)}k(s,c.value);const u=k(s,"MB");if(o.value=Ue(1024*s.up,!0,1),n.value=Ue(1024*s.down,!0,1),i.value=Ue(s.upTotal,!0,1),d.value=Ue(s.downTotal,!0,1),100*parseFloat(u.down)==0||100*parseFloat(u.down)==0)h.value=[{label:"KB/s",value:"KB",disable:!1},{label:"MB/s",value:"MB",disable:!0},{label:"GB/s",value:"GB",disable:!0},{label:"TB/s",value:"TB",disable:!0}];else{const e=k(s,"GB");if(100*parseFloat(e.down)==0||100*parseFloat(e.down)==0)h.value=[{label:"KB/s",value:"KB",disable:!1},{label:"MB/s",value:"MB",disable:!1},{label:"GB/s",value:"GB",disable:!0},{label:"TB/s",value:"TB",disable:!0}];else{const e=k(s,"TB");100*parseFloat(e.down)!=0&&100*parseFloat(e.down)!=0||(h.value=[{label:"KB/s",value:"KB",disable:!1},{label:"MB/s",value:"MB",disable:!1},{label:"GB/s",value:"GB",disable:!1},{label:"TB/s",value:"TB",disable:!0}])}}T("net",[{key:"timeList"},{key:"upList",value:Number(1024*s.up)},{key:"downList",value:Number(1024*s.down)}])},S=e=>({dataZoom:[],tData:e.timeList,list:[{name:"上行",data:e.upList,circle:"circle",itemStyle:{color:"#20a53a"},lineStyle:{width:2,color:"#20a53a"},areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,global:!1,colorStops:[{offset:0,color:"rgba(32, 165, 58, .6)"},{offset:.8,color:"rgba(32, 165, 58, 0)"}]}}},{name:"下行",data:e.downList,circle:"circle",itemStyle:{color:" #FF9901"},lineStyle:{width:2,color:"#FF9901"},areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,global:!1,colorStops:[{offset:0,color:"rgba(255, 153, 1, .6)"},{offset:.8,color:"rgba(255, 153, 1, 0)"}]}}}],axisLabel:{formatter:e=>Ue(e,!1,0,c.value)},axisPointerLabel:{formatter:e=>"y"===e.axisDimension?Ue(e.value,!1,2,c.value)+" "+c.value:e.value},formatter(e){let t="";for(let a=0;a<e.length;a++){const l=e[a];if(Ke(l.data))return!1;t+='<span class="inline-block w-[1rem] h-[1rem] mr-[1rem]" style="border-radius: var(--el-border-radius-circle); background: '.concat(l.color,';"></span>').concat(l.seriesName,"：").concat(Ue(parseFloat(l.data),!0,1),"/s ").concat(e.length-1!==a?"<br />":"")}return"时间：".concat(e[0].axisValue,"<br />").concat(t)}}),I=e=>{const{info:t}=M("iostat"),a=e[y.iostat.selectVal||"ALL"],{read:l,write:s,second:o,io:n}=t;if(!a)return;const{read_bytes:i,write_bytes:r}=a,{read_count:c,write_count:d}=a,{read_time:u,write_time:m}=a;l.value=Ue(i,!0,1),s.value=Ue(r,!0,1),o.value="".concat(c+d," 次"),n.value="".concat(m>u?m:u," ms");const p=parseInt(n.value);n.color=p>=1e3?"var(--el-color-danger)":p>100&&p<1e3?"var(--el-color-warning)":"var(--el-color-primary)",T("iostat",[{key:"timeList"},{key:"readList",value:i},{key:"writeList",value:r},{key:"tipsList",value:a}])},P=e=>({dataZoom:[],type:"iostat",tData:e.timeList,list:[{name:"读取字节数",data:e.readList,circle:"circle",itemStyle:{color:"#FF4683"},lineStyle:{width:2,color:"#FF4683"},areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,global:!1,colorStops:[{offset:0,color:"rgba(255, 70, 131, .8)"},{offset:.8,color:"rgba(255, 70, 131, 0)"}]}}},{name:"写入字节数",data:e.writeList,circle:"circle",itemStyle:{color:"#6CC0CF"},lineStyle:{width:2,color:"#6CC0CF"},areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,global:!1,colorStops:[{offset:0,color:"rgba(108, 192, 207, .8)"},{offset:.8,color:"rgba(108, 192, 207, 0)"}]}}}],axisPointerLabel:{formatter:e=>"y"===e.axisDimension?Ue(e.value,!0,1):e.value},formatter(t){let a="时间：".concat(t[0].axisValue,"<br />");const l={read_bytes:"读取字节数",read_count:"读取字节数",read_merged_count:"合并读取次数",read_time:"读取延迟",write_bytes:"写入字节数",write_count:"写入次数",write_merged_count:"合并写入次数",write_time:"写入延迟"},s=e.tipsList[t[0].dataIndex];for(let e=0;e<t.length;e++){const l=t[e];if(Ke(l.data))return!1;a+='<span class="inline-block w-[1rem] h-[1rem] mr-[.1rem]" style="border-radius: var(--el-border-radius-circle); background: '.concat(l.color,';"></span>&nbsp;&nbsp;<span>').concat(l.seriesName,"：").concat(Ue(parseFloat(l.data),!0,1),"/s</span><br />")}return["read_count","write_count","read_merged_count","write_merged_count","read_time","write_time"].forEach(e=>{const t=s[e],o=t>100&&t<1e3?"#ff9900":t>=1e3?"red":"#20a53a",n=e.indexOf("time")>-1?"color: ".concat(o):"",i=e.indexOf("time")>-1?" ms":" 次/秒";a+='<span class="inline-block w-[1rem] h-[1rem]"></span>&nbsp;&nbsp;<span style="'.concat(n,'">').concat(l[e],"：").concat(t+i,"</span><br />")}),a}}),T=(e,t,a=8)=>{const l=M(e,"data");t.forEach(e=>{const{key:t,value:s}=e,o=l[t];o.length>=a&&o.splice(0,1),"timeList"==t?o.push(nt((new Date).getTime(),"hh:mm:ss",!0)):o.push(s)})},j=e=>"net"==e?o.value:"iostat"==e?n.value:void 0,M=(e="net",t="")=>t?y[e][t]:y[e],E=(e="net")=>"net"==e?v.value:"iostat"==e?f.value:{};return{netRefs:o,iostatRefs:n,loading:s,iostatConfig:p,resource:y,unitList:h,activeName:i,netConfig:d,netUnit:c,initChart:()=>{s.value=!0;const e=localStorage.getItem("home-model-active"),t=localStorage.getItem("home-".concat(e,"-active"));e&&(i.value=e,y[e].selectVal=t||"ALL"),L(()=>{a.value=!0});const l=M("net","data");d.value=S(l);const o=M("iostat","data");p.value=P(o)},onSelectChange:()=>{localStorage.setItem("home-model-active",i.value),localStorage.setItem("home-".concat(i.value,"-active"),b.value),"net"===i.value?C(v.value,c.value):I(f.value)},onNetUnitChange:()=>{y.net.data.timeList=[],y.net.data.upList=[],y.net.data.downList=[],localStorage.setItem("netUnit",c.value),C(v.value,c.value)},onTabsChange:()=>{const e=i.value;localStorage.setItem("home-model-active",e);const t=localStorage.getItem("home-".concat(e,"-active"));t&&y[e].selectList.some(e=>e.value===t)?y[e].selectVal=t:y[e].selectVal="ALL",L(()=>{const t=j(e);if((null==t?void 0:t.echartRef)&&setTimeout(()=>{t.echartRef.resize()},100),l.value&&"iostat"===e){l.value=!1;const e=M("iostat","data");t&&e&&t.setConfig(P(e))}})}}}),mo={class:"module-ui"},po={class:"module-ui-header"},vo={class:"flex justify-between items-center w-full -ml-[1.4rem]"},fo={class:"flex items-center"},yo={class:"flex items-center"},ho={class:"text-tertiary font-500 text-small mr-[1.5rem] whitespace-pre"},go={class:"module-ui-body"},xo=e({__name:"index",setup(a){const s=t(!1),d=t(!1),h=e({name:"NetMonitor",setup(e,{emit:t}){const a=uo(),{netConfig:s,resource:o,unitList:n,netUnit:i,netRefs:r}=u(a);return l(()=>{t("cache-status",{type:"net",cached:!0})}),()=>p("div",{class:"home-monitor-content"},[p("div",{class:"home-monitor__stats-grid"},[Object.values(o.value.net.info).map((e,t)=>p("div",{key:t,class:"home-monitor__stat-item"},[p("div",{class:"home-monitor__stat-content"},[p("div",{class:"home-monitor__stat-left"},[e.bgColor&&p("div",{class:"home-monitor__stat-dot-wrapper"},[p("span",{class:"home-monitor__stat-dot",style:{backgroundColor:e.bgColor}},null),p("span",{class:"home-monitor__stat-dot-ripple",style:{borderColor:e.bgColor}},null)]),p("span",{class:"home-monitor__stat-label"},[e.label])]),p("div",{class:"home-monitor__stat-right"},[p("div",{class:"home-monitor__stat-value",style:{color:e.color||"var(--el-color-text-secondary)"}},[e.value])])])]))]),p("div",{class:"home-monitor__chart-container"},[p(co,{ref:r,modelValue:s.value,info:o.value.net.info},null)])])}}),x=e({name:"IostatMonitor",setup(e,{emit:t}){const a=uo(),{iostatConfig:s,resource:o,iostatRefs:n}=u(a);return l(()=>{t("cache-status",{type:"iostat",cached:!0})}),()=>p("div",{class:"home-monitor-content"},[p("div",{class:"home-monitor__stats-grid"},[Object.values(o.value.iostat.info).map((e,t)=>p("div",{key:t,class:"home-monitor__stat-item"},[p("div",{class:"home-monitor__stat-content"},[p("div",{class:"home-monitor__stat-left"},[e.bgColor&&p("div",{class:"home-monitor__stat-dot-wrapper"},[p("span",{class:"home-monitor__stat-dot",style:{backgroundColor:e.bgColor}},null),p("span",{class:"home-monitor__stat-dot-ripple",style:{borderColor:e.bgColor}},null)]),p("span",{class:"home-monitor__stat-label"},[e.label])]),p("div",{class:"home-monitor__stat-right"},[p("div",{class:"home-monitor__stat-value",style:{color:e.color||"var(--el-color-text-secondary)"}},[e.value])])])]))]),p("div",{class:"home-monitor__chart-container"},[p(co,{ref:n,modelValue:s.value,info:o.value.iostat.info},null)])])}}),b=uo(),{loading:w,resource:_,activeName:k}=u(b),C=m(()=>"net"===k.value?h:x),S=m(()=>"net"===k.value?"正在获取流量信息，请稍候...":"正在获取磁盘IO信息，请稍候..."),I=e=>{"net"===e.type?s.value=e.cached:"iostat"===e.type&&(d.value=e.cached)},P=e=>{k.value!==e&&(performance.now(),k.value=e,b.onTabsChange())};return l(()=>{const e=localStorage.getItem("home-model-active");e&&["net","iostat"].includes(e)&&(k.value=e),b.initChart()}),(e,t)=>{const a=ge,l=xe,s=A("bt-loading");return n(),i("div",mo,[r("div",po,[r("div",vo,[r("div",fo,[r("div",{class:g(["tab-item",{active:"net"===o(k)},"font-alibaba-semibold"]),onClick:t[0]||(t[0]=e=>P("net"))},"流量",2),r("div",{class:g(["tab-item",{active:"iostat"===o(k)},"font-alibaba-semibold"]),onClick:t[1]||(t[1]=e=>P("iostat"))},"磁盘IO",2)]),r("div",yo,[r("span",ho,c("net"===o(k)?"网卡":"磁盘"),1),(n(!0),i(T,null,j(o(_),(e,t)=>z((n(),f(l,{key:t,modelValue:e.selectVal,"onUpdate:modelValue":t=>e.selectVal=t,placeholder:"请选择","fit-input-width":!0,onChange:o(b).onSelectChange,size:"small",class:"!min-w-[100px] !rounded-large"},{default:v(()=>[(n(!0),i(T,null,j(e.selectList,e=>(n(),f(a,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])),[[q,"".concat(t)==o(k)]])),128))])])]),r("div",go,[(n(),f(he,null,[z((n(),f(y(o(C)),{key:o(k),"v-bt-loading:title":o(S),onCacheStatus:I},null,40,["v-bt-loading:title"])),[[s,o(w)]])],1024))])])}}}),bo=I("RECOMMEND-STORE",()=>{const{payment:e}=we(),{authType:l,authExpirationTime:s}=a(e.value),o=t(!1),n=t([["time","5分钟极速响应"],["refund","15天无理由退款"],["plunge","30+款付费插件"],["function","20+企业版专享功能"],["certificate","2张SSL商用证书（年付）"],["message","1000条免费短信（年付）"]]),i=t([["speed","5分钟极速响应"],["fifteen","15天无理由退款"],["plugin","30+款付费插件"],["more","20+企业版专享功能"],["recom","2张SSL商用证书（年付）"],["message","1000条免费短信（年付）"]]),r=t(["多对一技术支持","全年5次安全排查","5分钟极速响应","30+款付费插件","20+企业版专享功能","1000条免费短信（年付）","2张SSL商用证书（年付）","一对一服务（年付）","WAF防火墙","更换授权IP","客服优先响应","15+款付费插件","15天无理由退款"]),c=t([0,0,0,0,0,0,0,0,1,1,1,1,1]),d=t([0,0,1,1,1,1,1,1,1,1,1,1,1]),u=t([1,1,1,1,1,1,1,1,1,1,1,1,1]),m=t(!1),p=t(!0);return{plusPrivilegeList:u,ltdPrivilegeList:d,proPrivilegeList:c,privilegeList:r,limitTimeShow:m,advantageList:n,newAdvantageList:i,recommendShow:p,showPrivilege:o,authType:l,authExpirationTime:s,setRecommendHide:e=>{const t=((new Date).getTime()+864e5*e).toString();localStorage.setItem("HOME-RECOMMEND-HIDE-TIME",t),p.value=!1},checkRecommendHide:()=>{const e=parseInt(localStorage.getItem("HOME-RECOMMEND-HIDE-TIME")||"0");e&&(p.value=e<(new Date).getTime())},openProduct:e=>gt({sourceId:e,disablePro:!0})}}),wo={key:0,class:"h-auto"},_o={class:"absolute left-0 right-0 flex items-center px-[16px]"},ko={class:"advantage-list"},Co={class:"text-tertiary text-base"},So={class:"absolute left-0 right-0 flex items-center px-[16px]"},Io={class:"flex items-center"},Po={class:"relative mr-[2rem]"},Lo={class:"advantage-list"},To={class:"text-tertiary text-base"},jo={class:"p-[24px] flex justify-center flex-col items-center"},Mo={class:"flex items-center mt-[20px]"},Eo={class:"flex-col items-center border border-base justify-center w-[22rem]"},Bo={class:"flex flex-col text-base text-secondary function-text"},Ro={class:"flex-col border border-[var(--bt-pro-border-color)] items-center bg-[var(--bt-pro-bg-color)] justify-center w-[22rem]"},Do={class:"text-extraLarge text-default font-medium h-[9.4rem] leading-[9.4rem] text-center"},Oo={class:"flex flex-col text-base text-secondary pro-text"},Ao={key:0,class:"svgtofont-el-close text-danger text-large font-bold"},Vo={key:1,class:"svgtofont-el-check text-[var(--el-color-warning-light-3)] text-large font-bold"},zo={key:0,class:"recommend-left"},Fo={class:"text-[var(--bt-ltd-sub-bg-color)] flex justify-center font-bold"},Ho={class:"flex flex-col text-base text-secondary ltd-text"},No={key:0,class:"svgtofont-el-close text-danger text-large font-bold"},Wo={key:1,class:"svgtofont-el-check text-[var(--el-color-warning-light-3)] text-large font-bold"},Uo={key:0,class:"svgtofont-el-close text-danger text-large font-bold"},qo={key:1,class:"svgtofont-el-check text-[var(--el-color-warning-light-3)] text-large font-bold"},Go=Pe(e({__name:"index",setup(e){const{forceLtd:t,aliyunEcsLtd:a,authRemainingDays:s,ltdRemarks:m}=we(),f=bo(),{plusPrivilegeList:y,ltdPrivilegeList:x,proPrivilegeList:b,privilegeList:w,limitTimeShow:_,recommendShow:k,showPrivilege:C,authType:S,authExpirationTime:I}=u(f);return l(()=>{f.checkRecommendHide()}),(e,t)=>{const l=Be,u=jt,P=it,L=rt;return o(k)&&!o(a)?(n(),i("div",wo,["ltd"===o(S)?(n(),i("div",{key:0,class:"advantage-view",onMouseover:t[2]||(t[2]=e=>_.value=!0),onMouseleave:t[3]||(t[3]=e=>_.value=!1)},[r("div",_o,[r("div",{class:"flex items-center text-base mr-[3rem] flex-shrink-0 cursor-pointer",onClick:t[0]||(t[0]=e=>o(f).openProduct(28))},[t[11]||(t[11]=r("div",{class:"ltd-privilege-title flex flex-shrink-0 items-center ltd-title-edit"},[r("span",{class:"text-base pl-[2.4rem] font-bold !text-[#fff]"}," 企业版 ")],-1)),r("span",{class:g({"text-danger":o(s)<7,"text-warning":o(s)>=7,"ml-[8px]":!0,"font-bold":!0})},c(o(nt)(o(I),"yyyy-MM-dd")),3),p(l,{class:"ml-[8px]",size:"13px"},{default:v(()=>[...t[10]||(t[10]=[h("续费",-1)])]),_:1})]),r("div",ko,[(n(!0),i(T,null,j(o(m),(e,t)=>(n(),i("div",{class:"advantage-item",key:t},[p(u,{name:"tools-".concat(e[0].split("_")[0]),size:"20",class:"mr-[4px]"},null,8,["name"]),r("span",Co,c(e[1]),1)]))),128))])]),z(r("div",{class:"day-not-display",onClick:t[1]||(t[1]=e=>o(f).setRecommendHide(3))},[...t[12]||(t[12]=[r("i",{class:"svgtofont-el-close"},null,-1),r("span",null,"近3天不再显示",-1)])],512),[[q,o(_)]])],32)):"free"===o(S)?(n(),i("div",{key:1,class:"advantage-view",onMouseover:t[6]||(t[6]=e=>_.value=!0),onMouseleave:t[7]||(t[7]=e=>_.value=!1)},[r("div",So,[r("div",Io,[r("div",Po,[r("button",{class:"product-payment-btn",onClick:t[4]||(t[4]=e=>o(f).openProduct(27))},[...t[13]||(t[13]=[r("span",{class:"ml-[1.2rem text-base"}," 立即开通 ",-1)])])]),t[14]||(t[14]=r("div",{class:"ltd-privilege-title flex flex-shrink-0 items-center mr-[8px]"},[r("span",{class:"text-medium ml-[.4rem] mr-[2rem] pl-[3rem] font-bold"}," 企业版VIP特权 ")],-1))]),r("div",Lo,[(n(!0),i(T,null,j(o(m),(e,t)=>(n(),i("div",{class:"advantage-item",key:t},[p(u,{name:"tools-".concat(e[0].split("_")[0]),size:"20",class:"mr-[4px]"},null,8,["name"]),r("span",To,c(e[1]),1)]))),128))])]),z(r("div",{class:"day-not-display",onClick:t[5]||(t[5]=e=>o(f).setRecommendHide(1))},[...t[15]||(t[15]=[r("i",{class:"svgtofont-el-close"},null,-1),h("近24小时不再显示",-1)])],512),[[q,o(_)]])],32)):d("",!0),p(L,{modelValue:o(C),"onUpdate:modelValue":t[9]||(t[9]=e=>D(C)?C.value=e:null),area:96},{default:v(()=>[r("div",jo,[p(P,{src:"/advantage/privilege-contrast.png"}),r("div",Mo,[r("div",Eo,[t[16]||(t[16]=r("p",{class:"text-extraLarge text-default font-bold h-[9.4rem] leading-[9.4rem] text-center"},"功能特权",-1)),r("ul",Bo,[(n(!0),i(T,null,j(o(w),(e,t)=>(n(),i("li",{class:"px-[24px] h-[4rem] leading-[4rem]",key:t},c(e),1))),128))])]),r("div",Ro,[r("div",Do,[r("p",null,[p(P,{src:"/advantage/privilege-pro.svg",class:"mr-[8px]"}),t[17]||(t[17]=h("专业版",-1))])]),r("ul",Oo,[(n(!0),i(T,null,j(o(b),(e,t)=>(n(),i("li",{class:"px-[24px] h-[4rem] leading-[4rem] text-center",key:t},[e?(n(),i("i",Vo)):(n(),i("i",Ao))]))),128))])]),(n(),i(T,null,j(2,(e,a)=>r("div",{class:g(["w-[22rem] bg-[var(--bt-ltd-bg-color)] flex-col relative",a?"":"border-2 border-darkSecondary h-[64.6rem] shadow"]),key:a},[0===a?(n(),i("span",zo)):d("",!0),r("div",{class:g(["text-extraLarge flex flex-col justify-center items-center",a?" h-[9.4rem]":" h-[11rem]"])},[r("div",Fo,[p(P,{class:"mr-[8px]",src:"/advantage/privilege-diamond.svg"}),r("span",{class:g(a?"":"linear")},c(a?"企业运维托管":"企业版"),3)]),r("button",{class:g(["px-[20px] py-[4px]",a?"linear text-border privilege-button font-bold":"button-linear privilege-button"]),onClick:t[8]||(t[8]=e=>o(f).openProduct(45))},"立即购买",2)],2),r("ul",Ho,[0===a?(n(!0),i(T,{key:0},j(o(x),(e,t)=>(n(),i("li",{key:t},[e?(n(),i("i",Wo)):(n(),i("i",No))]))),128)):d("",!0),0!=a?(n(!0),i(T,{key:1},j(o(y),(e,t)=>(n(),i("li",{key:t},[e?d("",!0):(n(),i("i",Uo)),e?(n(),i("i",qo)):d("",!0)]))),128)):d("",!0)])],2)),64))])])]),_:1},8,["modelValue"])])):d("",!0)}}}),[["__scopeId","data-v-44adae4e"]]),Ko={class:"pt-[1.2rem]"},$o=Pe(e({__name:"index",setup(e){const{getAlarmData:c,payment:m,paymentVoucherType:y,aliyunEcsLtd:h,getUserInfo:g,isHideAd:x,panel:b,getSoftRemarks:w}=we(),_=Bt(),{panelInfo:k}=u(_),{isRestart:C}=a(k.value),I=P(),L=be(),T=t(null),j=t(0);Q(T,e=>{const t=e[0];j.value=t.contentRect.width});let M=null;return S(()=>b.value.initInstall,e=>{if(!e){if(h.value&&"free"===m.value.authType)return;_.recommendInstallDialog()}},{immediate:!0,deep:!0}),S(()=>b.value.oem,e=>{e&&Pt()},{immediate:!0}),l(async()=>{if("bind-cupon"===L.query.model){const e={...L.query};delete e.model,I.replace({path:L.path,query:e}),await g(),gt({disablePro:!0,sourceId:999}),y.value=0}_.monitorLoginInfo(),M=ct({idle:36e5,request:async()=>(await _.getSystemInfo(),C.value),timeout:3e3,retries:3}),_.getHomeConfig(),ut({promises:[c,_.getUpdateInfoNew,w],delay:1e3})}),s(()=>{null==M||M.stop(),dt(["/system?action=GetNetWork","/panel/overview/GetOverview","/plugin?action=get_index_list","/ajax?action=get_pay_type","/mod/push/task/get_task_list","/auth?action=get_coupon_list"])}),(e,t)=>{const a=X,l=ee;return n(),i("section",Ko,[p(ea,{class:"mx-[1.2rem]"}),p(l,{span:24},{default:v(()=>[p(a,{span:24},{default:v(()=>[p(na),r("div",{ref_key:"stateMainRef",ref:T},[p(ys,{class:"px-[1.2rem]","main-width":o(j)},null,8,["main-width"])],512),p(Vs)]),_:1})]),_:1}),p(l,{span:24,class:"px-[1.2rem]"},{default:v(()=>[p(l,{span:24,gutter:12,class:"flex-1"},{default:v(()=>[p(a,{md:24,sm:24,span:12,xs:24,lg:12},{default:v(()=>[p(xo,{class:"mb-0 monitor-view"})]),_:1}),p(a,{md:24,sm:24,span:12,xs:24,lg:12},{default:v(()=>[p(io,{class:"mb-0 software-view"})]),_:1})]),_:1})]),_:1}),o(x)?d("",!0):(n(),f(Go,{key:0,class:"mt-[1.2rem] mx-[1.2rem]"}))])}}}),[["__scopeId","data-v-7e77d484"]]),Jo=Object.freeze(Object.defineProperty({__proto__:null,default:$o},Symbol.toStringTag,{value:"Module"}));export{ia as H,ra as a,Aa as b,gs as c,Jo as i};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
