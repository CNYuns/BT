import{hA as e,bT as a,hz as t,ao as l,b as s,ap as r,$ as o,j as i}from"./utils-lib.js?v=1764728423";import{_ as n}from"./index109.js?v=1764728423";import{B as p}from"./index119.js?v=1764728423";import{c as m,I as d,x as u,y as c,e as f,C as h,z as b,H as j,D as v,O as y,G as x,A as _,J as C,R as g}from"./base-lib.js?v=1764728423";import{a as k,b as V,u as B}from"./column.js?v=1764728423";import{u as H}from"./useStore4.js?v=1764728423";import{u as R,i as S,f as T,g as w,a as z,e as A,j as U,h as q,b as D,s as E,c as F,d as G,k as I}from"./useController20.js?v=1764728423";import"./__commonjsHelpers__.js?v=1764728423";import"./ace.js?v=1764728423";import"./index110.js?v=1764728423";import"./site.js?v=1764728423";const J={class:"h-full"},L={class:"p-[20px]"},O=m({__name:"redirect",setup(m){const O=s(),{siteType:$}=H(),{isRefreshList:K}=R(),M=r([{label:"启用重定向规则",value:"start",event:I},{label:"停用重定向规则",value:"stop",event:I},{label:"删除重定向规则",value:"delete",event:I}]),{BtTable:N,BtRefresh:P,BtBatch:Q}=e({request:S,columns:[k(),{label:"被重定向",render:e=>{var t;return e.errorpage?"404错误页面":"domain"===e.domainorpath?null==(t=a(e.redirectdomain,"array",[]))?void 0:t.join("、"):e.redirectpath}},{label:"重定向类型",prop:"domainorpath",render:e=>e.errorpage?"错误":"domain"===e.domainorpath?"域名":"路径"},{label:"重定向到",render:e=>e.topath?e.topath:e.tourl},V({prop:"type",event:T,data:["已停止","运行中"]}),B([{width:70,title:"配置文件",onClick:e=>{if(!e.type)return O.warn("请先启用重定向规则再查看配置文件");w(e)}},{title:"编辑",onClick:e=>{e.errorpage?z(e):A(e)}},{onClick:U,title:"删除"}])],extension:[t(),M,l(K)]});return(e,a)=>{const t=n,l=o,s=i,r=d("bt-loading");return u(),c("div",J,[f(t,null,{"header-left":h(()=>[f(b(j),{type:"primary",onClick:a[0]||(a[0]=e=>b(A)())},{default:h(()=>[...a[6]||(a[6]=[v("添加重定向",-1)])]),_:1}),["php","html"].includes(b($))?(u(),y(b(j),{key:0,type:"default",onClick:a[1]||(a[1]=e=>b(z)())},{default:h(()=>[...a[7]||(a[7]=[v("404重定向",-1)])]),_:1})):x("",!0)]),"header-right":h(()=>[f(b(P))]),content:h(()=>[f(b(N),{"max-height":460})]),"footer-left":h(()=>[f(b(Q))]),_:1}),f(l,{class:"mt-2rem",options:b(q),"list-style":"disc"},null,8,["options"]),f(s,{title:"编辑配置文件",modelValue:b(G),"onUpdate:modelValue":a[5]||(a[5]=e=>g(G)?G.value=e:null),area:54},{default:h(()=>[_("div",L,[a[9]||(a[9]=v(" 提示：Ctrl+F 搜索关键字，Ctrl+S 保存，Ctrl+H 查找替换 ",-1)),C(f(b(p),{class:"!h-[36rem] my-[8px]",ref:"aceEditor",modelValue:b(D),"onUpdate:modelValue":a[2]||(a[2]=e=>g(D)?D.value=e:null),onSave:a[3]||(a[3]=e=>b(E)())},null,8,["modelValue"]),[[r,b(F)]]),f(b(j),{type:"primary",onClick:a[4]||(a[4]=e=>b(E)())},{default:h(()=>[...a[8]||(a[8]=[v("保存",-1)])]),_:1}),a[10]||(a[10]=_("ul",{class:"mt-[8px] leading-8 text-small list-disc ml-[20px]"},[_("li",null,"此处为该重定向的配置文件，若您不了解配置规则,请勿随意修改。")],-1))])]),_:1},8,["modelValue"])])}}});export{O as default};
